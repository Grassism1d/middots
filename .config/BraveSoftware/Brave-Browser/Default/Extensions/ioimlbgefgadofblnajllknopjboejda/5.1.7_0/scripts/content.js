!function t(e,n,o){function i(r,s){if(!n[r]){if(!e[r]){var c="function"==typeof require&&require;if(!s&&c)return c(r,!0);if(a)return a(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[r]={exports:{}};e[r][0].call(l.exports,(function(t){return i(e[r][1][t]||t)}),l,l.exports,t,e,n,o)}return n[r].exports}for(var a="function"==typeof require&&require,r=0;r<o.length;r++)i(o[r]);return i}({1:[function(t,e,n){"use strict";window.___t_isInitialized||(window.___t_isInitialized=!0,function(){var t=null,e=1,n=-1,o=!1,i=0,a=0,r=null,s=null,c=null,u=null,l=null,d=!1,p=!0,h=!1;function m(e){var n,o,i,a,r,s,c,u,l,d,p,m,v,f;if(""===(null===(n=document.location)||void 0===n?void 0:n.href)||"about:blank"===(null===(o=document.location)||void 0===o?void 0:o.href)||(null===(i=document.location)||void 0===i||null===(a=i.href)||void 0===a?void 0:a.indexOf("account.google.com"))>-1||(null===(r=document.location)||void 0===r||null===(s=r.href)||void 0===s?void 0:s.indexOf("adservice.google.com"))>-1||(null===(c=document.location)||void 0===c||null===(u=c.href)||void 0===u?void 0:u.indexOf("doubleclick.net"))>-1||(null===(l=document.location)||void 0===l||null===(d=l.href)||void 0===d?void 0:d.indexOf("chrome://"))>-1||(null===(p=document.location)||void 0===p||null===(m=p.href)||void 0===m?void 0:m.indexOf("edge://"))>-1||(null===(v=document.location)||void 0===v||null===(f=v.href)||void 0===f?void 0:f.indexOf("https://chrome.google.com/"))>-1)e();else{var y=[],b=()=>{var t,e,n;return y.push(...document.querySelectorAll(["video","audio"])),S()&&(y=y.filter((t=>isNaN(t.duration)||t.duration>10))),y.sort(((t,e)=>isNaN(t.duration)||isNaN(e.duration)?isNaN(t.duration)&&isNaN(e.duration)?e.src.length===t.src.length?t.paused&&!e.paused?1:-1:e.src.length-t.src.length:isNaN(t.duration)?1:-1:e.src.length===t.src.length?t.paused&&!e.paused?1:-1:e.src.length-t.src.length)),y.length,y.length>-1&&y[0]&&((null===(t=y[0])||void 0===t||null===(e=t.src)||void 0===e?void 0:e.length)>0||S())&&(n=y[0]),n},w=b();if(w)e(w);else var g=0,k=1,T=setInterval((()=>{if(g%k==0){1===k&&g>20&&(k=5),5===k&&g>10&&(k=10),2===g&&window.__transpose__mediaList&&y.push(...window.__transpose__mediaList);var n=b();if(n||g>200||h||t)return clearInterval(T),void e(n)}g++}),100)}}function v(t){w(t),t.addEventListener("error",(t=>{d=!1})),window.location.host.includes("youtu")&&t.addEventListener("ratechange",(n=>{e=t.playbackRate})),""!==t.crossOrigin||(t.crossOrigin="anonymous"),t.playbackRate=e;var o=T((t=>{b({tabId:r,currentTime:t.currentTime,duration:t.duration})}),250);if(t.ontimeupdate=()=>{d=!1,t.playbackRate=e,n>-1&&t.currentTime>a&&(t.currentTime=i,g()),o(t)},t.onplay=()=>{b({tabId:r,transportPlayState:"play"})},t.onpause=()=>{b({tabId:r,transportPlayState:"pause"})},!h){var c=window.AudioContext||window.webkitAudioContext;try{var p=new c({latencyHint:"playback"});"suspended"===p.state&&p.resume();var m=null;document.location.host.includes("soundcloud.com")?(m=p.createMediaStreamSource(t.captureStream()),t.volume=1e-5):m=w(t)?p.createMediaStreamSource(t.captureStream()):p.createMediaElementSource(t),s=new x(l,p,m,u?u.pitch:0,u?u.semiTone:0)}catch(t){var v="Error catching stream: "+JSON.stringify(null==t?void 0:t.message);(v.toLowerCase().includes("cross")||v.toLowerCase().includes("origin")||v.toLowerCase().includes("cors")||v.toLowerCase().includes("capture not supported"))&&(v="Capture is not allowed by this site"),b({tabId:r,connectionStatusError:!0,connectionStatusMessage:v,error:JSON.stringify(t)}),s=null}}}function f(){p?(e=1,n=-1,i=0,a=0,t.playbackRate=1,u=null,s&&s.setPitchTranspose(0,0),k(),b({command:"reset",tabId:r,altUrl:c,hasPitchShift:null!==s})):t.playbackRate=e}function y(t){b(u?{command:"videoReconnected",tabId:r,transportPlayState:t.paused?"pause":"play",duration:t.duration,currentTime:t.currentTime,speed:t.playbackRate,altUrl:c,media:u,loopIndex:n,hasPitchShift:null!==s}:{command:"videoConnected",tabId:r,transportPlayState:t.paused?"pause":"play",duration:t.duration,currentTime:t.currentTime,speed:t.playbackRate,altUrl:c,hasPitchShift:null!==s})}function b(t){t.command,document.dispatchEvent(new CustomEvent("transposeExt_content",{detail:t}))}function w(t){var e;try{e=new URL(t.src)}catch(t){if(!(t instanceof TypeError))throw t;return!1}return!!document.location.origin.includes("archive.org")||e.origin!==document.location.origin}function g(){if(o){var n,i=240/(((null===(n=u)||void 0===n?void 0:n.virtualTempo)>0?u.virtualTempo:100)*e);i>5&&(i=5),i<2&&(i=2),b({command:"waitCountIn",tabId:r}),t.pause(),setTimeout((()=>{t.play()}),1e3*i)}}function k(){if(c=null,"open.spotify.com"===window.location.host){var t,e=null===(t=document.querySelector('[data-context-item-type="track"]'))||void 0===t?void 0:t.href;if(e&&decodeURIComponent(e).indexOf("track:")>-1){var n=decodeURIComponent(e).split("track:")[1].split("&")[0].split("?")[0].split("#")[0].split(":")[0];c="https://open.spotify.com/track/"+n}}else if("soundcloud.com"===window.location.host){var o,i=null===(o=document.querySelector(".playbackSoundBadge__avatar"))||void 0===o?void 0:o.href;i&&i.includes("https://soundcloud.com")&&(c=i)}}function S(){return"open.spotify.com"===window.location.host}document.addEventListener("transposeExt_controls",(c=>{if(null!=c&&c.detail){var w=c.detail;switch(w.media&&(u=w.media),w.command){case"connect":r=w.tabId,l=w.path,p=w.autoReset,o=w.loopCountIn,h&&b({tabId:r,alreadyinTabcaptureMode:!0,media:u}),k(),t?y(t):(m((e=>{e&&(t=e,v(e),y(e),function(t){var e=t.src,n=T(f,250);new MutationObserver((o=>{for(var i of o)if("src"===i.attributeName){var a,r,s,c,u,l;if(!d&&(0===(null===(a=e)||void 0===a?void 0:a.length)&&(null==t||null===(r=t.src)||void 0===r?void 0:r.length)>0||(null===(s=e)||void 0===s?void 0:s.length)>0&&(null==t||null===(c=t.src)||void 0===c?void 0:c.length)>0&&t.src!==e||(null===(u=e)||void 0===u?void 0:u.length)>0&&0===(null==t||null===(l=t.src)||void 0===l?void 0:l.length))){n();break}e=t.src}})).observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["src"]})}(e),window.addEventListener("hashchange",(function(){setTimeout(T(f,350),150)})),window.addEventListener("popstate",(function(){setTimeout(T(f,350),150)})))})),document.querySelectorAll('iframe[src*="vimeo"],  iframe[src*="youtu"]').length>0&&b({tabId:r,contentHasEmbeddedVideo:!0}));break;case"autoReset":p=w.autoReset;break;case"loopCountIn":o=w.loopCountIn;break;case"tabCapture":s&&s.setPitchTranspose(0,0)&&s.disconnect(),h=!0;break;case"exit-tabCapture":h=!1}if(t)switch(w.command){case"set":e=w.speed,t.playbackRate=e,n=-1,i=0,a=0,s&&s.setPitchTranspose(w.pitch,w.semiTone);break;case"pitchShift":s&&s.setPitchTranspose(w.pitch,w.semiTone);break;case"playbackRate":e=w.speed,t.playbackRate=e;break;case"transportPlayState":var S,x;if(d=!0,w.play){if("suspended"===(null===(S=s)||void 0===S||null===(x=S.context)||void 0===x?void 0:x.state)&&s.context.resume(),t.paused){if(0===t.readyState){var I=document.querySelector('[data-testid="play-button"]');(I||(I=document.querySelector('[data-testid="control-button-playpause"]')))&&I.click()}4!==t.readyState&&t.load(),setTimeout((function(){var e=t.play();null!==e&&e.catch((e=>{try{t.play()}catch(t){}}))}),0)}}else t.paused||t.pause();break;case"transportJump":t.currentTime=w.time,w.countIn&&g();break;case"loop":n=w.index,i=w.start,a=w.end}}}));var T=(t,e)=>{var n,o;return function(){var i=this,a=arguments;o?(clearTimeout(n),n=setTimeout((function(){Date.now()-o>=e&&(t.apply(i,a),o=Date.now())}),e-(Date.now()-o))):(t.apply(i,a),o=Date.now())}},x=function(t,e,n,o,i){this.pitch=o,this.semitone=i,this.input,this.context=e,this.source=n;var a=t+"scripts/audioworklet-pitch-hq-processor.js";this.context.audioWorklet.addModule(a).then((()=>{this.input=new AudioWorkletNode(this.context,"audioworklet-pitch-hq-processor",{channelCount:2,channelCountMode:"clamped-max"}),this.source.connect(this.input).connect(this.context.destination),this.setPitchTranspose(this.pitch,this.semitone)})),this.stop=function(){this.disconnect(),this.source.disconnect(),this.source.mediaStream.getAudioTracks()[0].stop()},this.disconnect=function(){this.input&&this.input.disconnect(),this.source&&(this.source.disconnect(),this.source.connect(this.context.destination))},this.setPitchTranspose=function(t,e){this.pitch=t,this.semitone=e,this.input&&((0===this.pitch||this.pitch)&&(this.input.parameters.get("pitch").value=this.pitch),(0===this.semitone||this.semitone)&&(this.input.parameters.get("semitone").value=this.semitone))}}}())},{}]},{},[1]);