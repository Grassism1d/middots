[debug] [2025-05-16T20:45:48.460Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/, '$grzK2TKBJ6earh2NOVHO30-pbxiod-0'/*+25 bytes*/, '@telegram_channel-1835296767:bee'/*+9 bytes*/, 1730354292000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'IMAGE', 6299.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!Y6FMK8kz1AB'/*+1911 bytes*/, 'batch/1747428316261/25') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.468Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/, '$nmu2vh_NluxGuRtAWglvp7xYhHLblV1'/*+25 bytes*/, '@telegram_6114614513:beeper.loca'/*+1 bytes*/, 1747286069000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6201.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!grRrysIOK3a'/*+527 bytes*/, 'batch/1747428311479/19') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.469Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/13'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.478Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.eventID = '$zHfgwUKG4t8YNmGB9eTcP20SUxupu3Z'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.504Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.eventID = '$Es5yyoSVz4lkSh3IUKt163zbCwbVFHs'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.504Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.eventID = '$SRkBtGAKzCuQBz5ec9Z1DJy-a3xerV_'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.504Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$ryCpQTKbyJ9hJlr4PG4y3DWzPSSnQTU'/*+25 bytes*/, '@telegram_7458013732:beeper.loca'/*+1 bytes*/, 1746538753000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'IMAGE', 5981.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+982 bytes*/, 'batch/1747428309827/13') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.506Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428342188/26'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.514Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428316261/26'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.515Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428311479/20'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.515Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$Iz9navrHPXfNYBHqPpT4R75V3T67K5j'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.515Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/, '$zHfgwUKG4t8YNmGB9eTcP20SUxupu3Z'/*+25 bytes*/, '@telegram_channel-1368728425:bee'/*+9 bytes*/, 1667409701000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6439.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!RbrZlVP9cuG'/*+1895 bytes*/, 'batch/1747428342188/26') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.540Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/, '$Es5yyoSVz4lkSh3IUKt163zbCwbVFHs'/*+25 bytes*/, '@telegram_channel-1835296767:bee'/*+9 bytes*/, 1730369959000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'FILE', 6300.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!Y6FMK8kz1AB'/*+1304 bytes*/, 'batch/1747428316261/26') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.540Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/, '$SRkBtGAKzCuQBz5ec9Z1DJy-a3xerV_'/*+25 bytes*/, '@telegram_7058682033:beeper.loca'/*+1 bytes*/, 1747292596000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6202.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!grRrysIOK3a'/*+527 bytes*/, 'batch/1747428311479/20') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.541Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/14'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.546Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.eventID = '$J4aU5t75bDG_FpotZnC6tq0eEdIcI6u'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.547Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.eventID = '$kacB9NTo9QRCdtUc5L1MsL6Jw6zLcPZ'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.548Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.eventID = '$uDUvcXXQlnz7um54KIh6wjXp4-Nc9Sp'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.548Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$Iz9navrHPXfNYBHqPpT4R75V3T67K5j'/*+25 bytes*/, '@telegram_7458013732:beeper.loca'/*+1 bytes*/, 1746540342000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 5982.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+526 bytes*/, 'batch/1747428309827/14') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.551Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428342188/27'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.551Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428316261/27'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.551Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428311479/21'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.551Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$CUa-A8AJNlONE9bctTORZPO61cuJ88D'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.552Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/, '$J4aU5t75bDG_FpotZnC6tq0eEdIcI6u'/*+25 bytes*/, '@telegram_channel-1368728425:bee'/*+9 bytes*/, 1667409703000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6440.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!RbrZlVP9cuG'/*+1771 bytes*/, 'batch/1747428342188/27') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.554Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/, '$kacB9NTo9QRCdtUc5L1MsL6Jw6zLcPZ'/*+25 bytes*/, '@telegram_channel-1835296767:bee'/*+9 bytes*/, 1730479920000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6301.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!Y6FMK8kz1AB'/*+611 bytes*/, 'batch/1747428316261/27') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.555Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/, '$uDUvcXXQlnz7um54KIh6wjXp4-Nc9Sp'/*+25 bytes*/, '@telegram_609517172:beeper.local', 1747292596000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$SRkBtGAKzCuQBz5ec9Z1DJy-a3xerV_'/*+25 bytes*/, 0.0, 'TEXT', 6203.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!grRrysIOK3a'/*+610 bytes*/, 'batch/1747428311479/21') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.555Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/15'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.562Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.eventID = '$6bQxyDxSea-Jor-RZBMWrcsl8f-8NFX'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.563Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.eventID = '$BsHnOoY_hJJajH76FLZG_xG1CElOOgb'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.566Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.eventID = '$BxxA5UVwQLobWYuADYo02Sv0ukjriH7'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.566Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$CUa-A8AJNlONE9bctTORZPO61cuJ88D'/*+25 bytes*/, '@telegram_7458013732:beeper.loca'/*+1 bytes*/, 1746540355000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 5983.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+545 bytes*/, 'batch/1747428309827/15') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.567Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428342188/28'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.570Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428316261/28'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.570Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428311479/22'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.570Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$ExCqNk98zyrHisGO4c-64dP40FJKOIU'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.571Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/, '$6bQxyDxSea-Jor-RZBMWrcsl8f-8NFX'/*+25 bytes*/, '@telegram_channel-1368728425:bee'/*+9 bytes*/, 1667409705000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6441.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!RbrZlVP9cuG'/*+1603 bytes*/, 'batch/1747428342188/28') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.575Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/, '$BsHnOoY_hJJajH76FLZG_xG1CElOOgb'/*+25 bytes*/, '@telegram_channel-1835296767:bee'/*+9 bytes*/, 1730487374000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'IMAGE', 6302.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!Y6FMK8kz1AB'/*+1029 bytes*/, 'batch/1747428316261/28') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.576Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/, '$BxxA5UVwQLobWYuADYo02Sv0ukjriH7'/*+25 bytes*/, '@telegram_609517172:beeper.local', 1747333329000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$MeK4x5UexOxmmvLBz9MtWcidKaCp4id'/*+25 bytes*/, 0.0, 'TEXT', 6204.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!grRrysIOK3a'/*+615 bytes*/, 'batch/1747428311479/22') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.576Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/16'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.583Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.eventID = '$h6mm1ZSy21yFN6NuPrKMiPt6uDjaK0i'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.591Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.eventID = '$pQQ3fDJWuHCNQL69z6SoQSueg7uCH4c'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.593Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.eventID = '$ZR5hdDYmBVP13-bnwX1YOXnbw5MkJLt'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.593Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$ExCqNk98zyrHisGO4c-64dP40FJKOIU'/*+25 bytes*/, '@telegram_891990904:beeper.local', 1746603083000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 5984.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+875 bytes*/, 'batch/1747428309827/16') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.593Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428342188/29'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.593Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428316261/29'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.594Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428311479/23'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.594Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$-o_WyJzGpMPRuAIlhKBXS2ONcl582H_'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.595Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/, '$h6mm1ZSy21yFN6NuPrKMiPt6uDjaK0i'/*+25 bytes*/, '@telegram_channel-1368728425:bee'/*+9 bytes*/, 1667495490000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6442.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!RbrZlVP9cuG'/*+1971 bytes*/, 'batch/1747428342188/29') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.595Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/, '$pQQ3fDJWuHCNQL69z6SoQSueg7uCH4c'/*+25 bytes*/, '@telegram_channel-1835296767:bee'/*+9 bytes*/, 1730726128000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'IMAGE', 6303.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!Y6FMK8kz1AB'/*+1910 bytes*/, 'batch/1747428316261/29') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.596Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/, '$ZR5hdDYmBVP13-bnwX1YOXnbw5MkJLt'/*+25 bytes*/, '@telegram_7058682033:beeper.loca'/*+1 bytes*/, 1747337923000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$BxxA5UVwQLobWYuADYo02Sv0ukjriH7'/*+25 bytes*/, 0.0, 'TEXT', 6205.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!grRrysIOK3a'/*+606 bytes*/, 'batch/1747428311479/23') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.599Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/17'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.605Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.eventID = '$OOUd8rCcD8CA-p4R8iEUh8Lx0Ci0ybm'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.608Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.eventID = '$v34MQvWI_9i1F_VHh5_6WqXuCfve-oa'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.608Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.eventID = '$Hvv0IRIGYyHNGqrrdk6sladFjWI54_2'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.609Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$-o_WyJzGpMPRuAIlhKBXS2ONcl582H_'/*+25 bytes*/, '@telegram_891990904:beeper.local', 1746603096000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$IbdGIwtjWhKyqqpfqzNOiFTMOitf4B3'/*+25 bytes*/, 0.0, 'TEXT', 5985.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+953 bytes*/, 'batch/1747428309827/17') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.610Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428342188/30'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.610Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428316261/30'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.610Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428311479/24'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.615Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$zbMWCPejrsmmdF8G9m7IuvNaGdQyaUd'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.615Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/, '$OOUd8rCcD8CA-p4R8iEUh8Lx0Ci0ybm'/*+25 bytes*/, '@telegram_channel-1368728425:bee'/*+9 bytes*/, 1667840512000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6443.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!RbrZlVP9cuG'/*+1657 bytes*/, 'batch/1747428342188/30') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.615Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/, '$v34MQvWI_9i1F_VHh5_6WqXuCfve-oa'/*+25 bytes*/, '@telegram_channel-1835296767:bee'/*+9 bytes*/, 1730726191000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6304.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!Y6FMK8kz1AB'/*+564 bytes*/, 'batch/1747428316261/30') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.616Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/, '$Hvv0IRIGYyHNGqrrdk6sladFjWI54_2'/*+25 bytes*/, '@telegram_7058682033:beeper.loca'/*+1 bytes*/, 1747339221000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6206.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!grRrysIOK3a'/*+525 bytes*/, 'batch/1747428311479/24') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.620Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/18'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.717Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.eventID = '$8K8w9q7aebcXw_4EscGEBwRzDDz5SVv'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.717Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.eventID = '$RxnbN3dk019PPLZi7iMiYesZe9DVymH'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.717Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.eventID = '$t92w_E-sTgUl-_-ouaB61r6YWuinlV8'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.717Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$zbMWCPejrsmmdF8G9m7IuvNaGdQyaUd'/*+25 bytes*/, '@telegram_891990904:beeper.local', 1746603108000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$L2jX82hU6dwabzknqIIPcw-1VtdwAbU'/*+25 bytes*/, 0.0, 'TEXT', 5986.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+953 bytes*/, 'batch/1747428309827/18') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.722Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428342188/31'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.722Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428316261/31'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.722Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428311479/25'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.725Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$5UjSw4sH2hNakM4rb7yBdUw57TQJL3Z'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.725Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/, '$8K8w9q7aebcXw_4EscGEBwRzDDz5SVv'/*+25 bytes*/, '@telegram_channel-1368728425:bee'/*+9 bytes*/, 1667928135000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6444.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!RbrZlVP9cuG'/*+1783 bytes*/, 'batch/1747428342188/31') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.729Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/, '$RxnbN3dk019PPLZi7iMiYesZe9DVymH'/*+25 bytes*/, '@telegram_channel-1835296767:bee'/*+9 bytes*/, 1730726263000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$pQQ3fDJWuHCNQL69z6SoQSueg7uCH4c'/*+25 bytes*/, 0.0, 'TEXT', 6305.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!Y6FMK8kz1AB'/*+701 bytes*/, 'batch/1747428316261/31') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.735Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/, '$t92w_E-sTgUl-_-ouaB61r6YWuinlV8'/*+25 bytes*/, '@telegram_609517172:beeper.local', 1747390452000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6207.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!grRrysIOK3a'/*+608 bytes*/, 'batch/1747428311479/25') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.738Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/19'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.739Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.eventID = '$YbHVjdhh6D8fj_pkOAtiphSVLMxYmLp'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.741Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.eventID = '$KS4Xu0Q2TJD__3EOcOR8PvS2-Y2EsXr'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.741Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.eventID = '$xM5MarfwhI3RRCU5pKB2xxdC0qHTmPK'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.741Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$5UjSw4sH2hNakM4rb7yBdUw57TQJL3Z'/*+25 bytes*/, '@telegram_5566112878:beeper.loca'/*+1 bytes*/, 1746603839000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 5987.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+668 bytes*/, 'batch/1747428309827/19') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.744Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428342188/32'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.744Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428316261/32'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.744Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428311479/26'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.748Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$N1ftEc-Bk02tFTfG3CUKHbDviwU3tW7'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.749Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/, '$YbHVjdhh6D8fj_pkOAtiphSVLMxYmLp'/*+25 bytes*/, '@telegram_channel-1368728425:bee'/*+9 bytes*/, 1668014503000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6445.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!RbrZlVP9cuG'/*+1783 bytes*/, 'batch/1747428342188/32') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.749Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/, '$KS4Xu0Q2TJD__3EOcOR8PvS2-Y2EsXr'/*+25 bytes*/, '@telegram_channel-1835296767:bee'/*+9 bytes*/, 1735641169000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'IMAGE', 6306.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!Y6FMK8kz1AB'/*+3006 bytes*/, 'batch/1747428316261/32') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.749Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/, '$xM5MarfwhI3RRCU5pKB2xxdC0qHTmPK'/*+25 bytes*/, '@telegram_5896325452:beeper.loca'/*+1 bytes*/, 1747390456000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6208.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!grRrysIOK3a'/*+531 bytes*/, 'batch/1747428311479/26') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.753Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/20'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.756Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.eventID = '$yFpL_WJPoz1iOzEHZpTBpTaOZUzk9xM'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.756Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.eventID = '$9RfVCNxtMKRhQK1lF5jcL5d_ckKJLfQ'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.758Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.eventID = '$Sn4zgq0VX6fukod0KbkNc0IfIWJOqC9'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.758Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$N1ftEc-Bk02tFTfG3CUKHbDviwU3tW7'/*+25 bytes*/, '@telegram_7603937255:beeper.loca'/*+1 bytes*/, 1746606065000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$ExCqNk98zyrHisGO4c-64dP40FJKOIU'/*+25 bytes*/, 0.0, 'TEXT', 5988.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+623 bytes*/, 'batch/1747428309827/20') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.759Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428342188/33'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.759Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428316261/33'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.763Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428311479/27'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.764Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$xEgdJ-qx2YI4Ms2vCwfK5dOOowmiDGr'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.764Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/, '$yFpL_WJPoz1iOzEHZpTBpTaOZUzk9xM'/*+25 bytes*/, '@telegram_channel-1368728425:bee'/*+9 bytes*/, 1669914108000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6446.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!RbrZlVP9cuG'/*+1657 bytes*/, 'batch/1747428342188/33') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.765Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/, '$9RfVCNxtMKRhQK1lF5jcL5d_ckKJLfQ'/*+25 bytes*/, '@telegram_channel-1835296767:bee'/*+9 bytes*/, 1735663981000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'IMAGE', 6307.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!Y6FMK8kz1AB'/*+1198 bytes*/, 'batch/1747428316261/33') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.768Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/, '$Sn4zgq0VX6fukod0KbkNc0IfIWJOqC9'/*+25 bytes*/, '@telegram_609517172:beeper.local', 1747390461000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$sjZxCFjQ4W70oA03pp2-ugYOtv2ylyv'/*+25 bytes*/, 0.0, 'TEXT', 6209.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!grRrysIOK3a'/*+615 bytes*/, 'batch/1747428311479/27') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.774Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/21'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.783Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.eventID = '$_xXZkIwlcBAnED7rO32p5SlGid8_9DD'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.787Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.eventID = '$PTKMXeR7gRlCA3epmMzrJCFoQxyNHpI'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.794Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.eventID = '$LkCLBp-nTz83Qm9QVISCoVAonI5_F3i'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.796Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$xEgdJ-qx2YI4Ms2vCwfK5dOOowmiDGr'/*+25 bytes*/, '@telegram_7603937255:beeper.loca'/*+1 bytes*/, 1746606087000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$5UjSw4sH2hNakM4rb7yBdUw57TQJL3Z'/*+25 bytes*/, 0.0, 'TEXT', 5989.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+618 bytes*/, 'batch/1747428309827/21') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.798Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428342188/34'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.798Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428316261/34'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.798Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428311479/28'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.803Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$kZRjd8NGgyN4dBe0gGjjZuSZRvTKp1k'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.804Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/, '$_xXZkIwlcBAnED7rO32p5SlGid8_9DD'/*+25 bytes*/, '@telegram_channel-1368728425:bee'/*+9 bytes*/, 1669914118000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6447.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!RbrZlVP9cuG'/*+2200 bytes*/, 'batch/1747428342188/34') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.804Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/, '$PTKMXeR7gRlCA3epmMzrJCFoQxyNHpI'/*+25 bytes*/, '@telegram_channel-1835296767:bee'/*+9 bytes*/, 1737217470000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'FILE', 6308.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!Y6FMK8kz1AB'/*+2179 bytes*/, 'batch/1747428316261/34') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.805Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/, '$LkCLBp-nTz83Qm9QVISCoVAonI5_F3i'/*+25 bytes*/, '@telegram_channel-2588212450:bee'/*+9 bytes*/, 1747400511000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$xM5MarfwhI3RRCU5pKB2xxdC0qHTmPK'/*+25 bytes*/, 0.0, 'TEXT', 6210.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!grRrysIOK3a'/*+643 bytes*/, 'batch/1747428311479/28') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.809Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/22'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.813Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.eventID = '$mhiklcjX0hhBhUol6iulf7C-s5KCBgt'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.826Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.eventID = '$Un1R27znMKQvJxGQmyyQaglTHqo-m9W'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.831Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.eventID = '$9tRwsAmuIpef3yJzcDS2MLo7yqGeSU_'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.832Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$kZRjd8NGgyN4dBe0gGjjZuSZRvTKp1k'/*+25 bytes*/, '@telegram_7816590493:beeper.loca'/*+1 bytes*/, 1746616295000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$L2jX82hU6dwabzknqIIPcw-1VtdwAbU'/*+25 bytes*/, 0.0, 'TEXT', 5990.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+616 bytes*/, 'batch/1747428309827/22') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.833Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428342188/35'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.833Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428316261/35'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.833Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428311479/29'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.843Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$ONlFs4czktAldOwmOrHF0s-zg4SjPO9'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.843Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/, '$mhiklcjX0hhBhUol6iulf7C-s5KCBgt'/*+25 bytes*/, '@telegram_channel-1368728425:bee'/*+9 bytes*/, 1669914123000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6448.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!RbrZlVP9cuG'/*+2104 bytes*/, 'batch/1747428342188/35') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.845Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/, '$Un1R27znMKQvJxGQmyyQaglTHqo-m9W'/*+25 bytes*/, '@telegram_channel-1835296767:bee'/*+9 bytes*/, 1737649511000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'IMAGE', 6309.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!Y6FMK8kz1AB'/*+2317 bytes*/, 'batch/1747428316261/35') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.857Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/, '$9tRwsAmuIpef3yJzcDS2MLo7yqGeSU_'/*+25 bytes*/, '@telegram_609517172:beeper.local', 1747400514000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$LkCLBp-nTz83Qm9QVISCoVAonI5_F3i'/*+25 bytes*/, 0.0, 'TEXT', 6211.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!grRrysIOK3a'/*+897 bytes*/, 'batch/1747428311479/29') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.857Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/23'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.872Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.eventID = '$CYQDVX8_UO0I4gwHjR4E-H47jLEHtld'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.876Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.eventID = '$Qn1vcVchbbD_c5j5sYaRix7pdGNgYwT'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.881Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.eventID = '$w9CcrL7FXJodqsmOoxn0xcUUtR8HyWU'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.881Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$ONlFs4czktAldOwmOrHF0s-zg4SjPO9'/*+25 bytes*/, '@telegram_6013007187:beeper.loca'/*+1 bytes*/, 1746761227000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$L2jX82hU6dwabzknqIIPcw-1VtdwAbU'/*+25 bytes*/, 0.0, 'TEXT', 5991.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+601 bytes*/, 'batch/1747428309827/23') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.882Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428342188/36'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.882Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428316261/36'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.893Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428311479/30'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.898Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$HnTsxg3X9FqfNigJFUreUzCJQdwSsQR'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.900Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/, '$CYQDVX8_UO0I4gwHjR4E-H47jLEHtld'/*+25 bytes*/, '@telegram_channel-1368728425:bee'/*+9 bytes*/, 1669914765000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6449.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!RbrZlVP9cuG'/*+1746 bytes*/, 'batch/1747428342188/36') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.901Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/, '$Qn1vcVchbbD_c5j5sYaRix7pdGNgYwT'/*+25 bytes*/, '@telegram_channel-1835296767:bee'/*+9 bytes*/, 1737732892000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$Un1R27znMKQvJxGQmyyQaglTHqo-m9W'/*+25 bytes*/, 0.0, 'TEXT', 6310.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!Y6FMK8kz1AB'/*+733 bytes*/, 'batch/1747428316261/36') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.901Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/, '$w9CcrL7FXJodqsmOoxn0xcUUtR8HyWU'/*+25 bytes*/, '@telegram_6821234622:beeper.loca'/*+1 bytes*/, 1747400535000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$LkCLBp-nTz83Qm9QVISCoVAonI5_F3i'/*+25 bytes*/, 0.0, 'TEXT', 6212.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!grRrysIOK3a'/*+609 bytes*/, 'batch/1747428311479/30') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.905Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/24'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.908Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.eventID = '$wwkfteCR3pCmqKnY61pX_2LzXb3Glht'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.910Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.eventID = '$pOr9WBQmAzOPhE49JGas7_tQk1iQPmr'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.911Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.eventID = '$V49x72GDdzRwuEz_Q0lKI53e4Re61Dh'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.912Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$HnTsxg3X9FqfNigJFUreUzCJQdwSsQR'/*+25 bytes*/, '@telegram_6468136964:beeper.loca'/*+1 bytes*/, 1746774127000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 5992.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+567 bytes*/, 'batch/1747428309827/24') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.915Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428342188/37'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.916Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428316261/37'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.920Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428311479/31'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.923Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$Y4wgWURxpX_EIC9n9d9WgakBPlzr1gi'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.924Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/, '$wwkfteCR3pCmqKnY61pX_2LzXb3Glht'/*+25 bytes*/, '@telegram_channel-1368728425:bee'/*+9 bytes*/, 1669914934000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6450.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!RbrZlVP9cuG'/*+2018 bytes*/, 'batch/1747428342188/37') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.928Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/, '$pOr9WBQmAzOPhE49JGas7_tQk1iQPmr'/*+25 bytes*/, '@telegram_channel-1835296767:bee'/*+9 bytes*/, 1738423183000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'IMAGE', 6311.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!Y6FMK8kz1AB'/*+1023 bytes*/, 'batch/1747428316261/37') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.930Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/, '$V49x72GDdzRwuEz_Q0lKI53e4Re61Dh'/*+25 bytes*/, '@telegram_6821234622:beeper.loca'/*+1 bytes*/, 1747400544000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6213.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!grRrysIOK3a'/*+543 bytes*/, 'batch/1747428311479/31') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.930Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/25'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.942Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.eventID = '$_cunhOs87a_Qa3C8amVdSDPrKKUbqAh'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.951Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.eventID = '$BWL5YtHP8EbgatZAuhycAQFOKQ4yviR'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.951Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.eventID = '$SwySG2S1Y0AifcXrUyi8jST-fshPo0K'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.952Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$Y4wgWURxpX_EIC9n9d9WgakBPlzr1gi'/*+25 bytes*/, '@telegram_7458013732:beeper.loca'/*+1 bytes*/, 1746796750000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$L2jX82hU6dwabzknqIIPcw-1VtdwAbU'/*+25 bytes*/, 0.0, 'TEXT', 5993.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+637 bytes*/, 'batch/1747428309827/25') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.953Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428342188/38'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.954Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428316261/38'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.954Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428311479/32'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.954Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$ALRE5DbH6DlyO3iCf1MjyjTPU1hk9K-'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.955Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/, '$_cunhOs87a_Qa3C8amVdSDPrKKUbqAh'/*+25 bytes*/, '@telegram_channel-1368728425:bee'/*+9 bytes*/, 1669914938000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6451.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!RbrZlVP9cuG'/*+2022 bytes*/, 'batch/1747428342188/38') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.959Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/, '$BWL5YtHP8EbgatZAuhycAQFOKQ4yviR'/*+25 bytes*/, '@telegram_channel-1835296767:bee'/*+9 bytes*/, 1739031223000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'IMAGE', 6312.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!Y6FMK8kz1AB'/*+1831 bytes*/, 'batch/1747428316261/38') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.959Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/, '$SwySG2S1Y0AifcXrUyi8jST-fshPo0K'/*+25 bytes*/, '@telegram_channel-2588212450:bee'/*+9 bytes*/, 1747400546000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$w9CcrL7FXJodqsmOoxn0xcUUtR8HyWU'/*+25 bytes*/, 0.0, 'TEXT', 6214.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!grRrysIOK3a'/*+639 bytes*/, 'batch/1747428311479/32') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.963Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/26'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.969Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.eventID = '$sJyj344_NYJ-czj2pRPNy2VieM1dmYS'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.974Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.eventID = '$ApZiyfrQSdNkkX0N4wVjcHfErOdxloM'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.977Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.eventID = '$WiwMc7CSdpjYRSksVwm-mhjkEfillhb'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.979Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$ALRE5DbH6DlyO3iCf1MjyjTPU1hk9K-'/*+25 bytes*/, '@telegram_7458013732:beeper.loca'/*+1 bytes*/, 1746796764000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$L2jX82hU6dwabzknqIIPcw-1VtdwAbU'/*+25 bytes*/, 0.0, 'TEXT', 5994.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+618 bytes*/, 'batch/1747428309827/26') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.982Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428342188/39'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.982Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428316261/39'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.982Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428311479/33'
LIMIT 1
    
[debug] [2025-05-16T20:45:48.984Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$hnqvtC1mrKB-WtROayr0pQPwfA2R72V'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:48.984Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/, '$sJyj344_NYJ-czj2pRPNy2VieM1dmYS'/*+25 bytes*/, '@telegram_channel-1368728425:bee'/*+9 bytes*/, 1669914940000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6452.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!RbrZlVP9cuG'/*+2022 bytes*/, 'batch/1747428342188/39') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.987Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/, '$ApZiyfrQSdNkkX0N4wVjcHfErOdxloM'/*+25 bytes*/, '@telegram_channel-1835296767:bee'/*+9 bytes*/, 1739446802000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6313.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!Y6FMK8kz1AB'/*+911 bytes*/, 'batch/1747428316261/39') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.990Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/, '$WiwMc7CSdpjYRSksVwm-mhjkEfillhb'/*+25 bytes*/, '@telegram_channel-2588212450:bee'/*+9 bytes*/, 1747400551000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6215.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!grRrysIOK3a'/*+566 bytes*/, 'batch/1747428311479/33') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:48.995Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/27'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.011Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.eventID = '$8YVy0_uI-Ky32THWyGdy2uCqX5E4MV5'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.022Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.eventID = '$3iqA0qzLYHCmQ8ThsHiKBd4Q4Om7cdo'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.022Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.eventID = '$sTSh23Nv3Q83cUny6wyHRi-JWEz1zTU'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.022Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$hnqvtC1mrKB-WtROayr0pQPwfA2R72V'/*+25 bytes*/, '@telegram_7458013732:beeper.loca'/*+1 bytes*/, 1746796781000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$L2jX82hU6dwabzknqIIPcw-1VtdwAbU'/*+25 bytes*/, 0.0, 'TEXT', 5995.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+627 bytes*/, 'batch/1747428309827/27') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.023Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428342188/40'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.025Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428316261/40'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.025Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428311479/34'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.025Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$gxZN8ysFK3_Aq1T0R0TxzfFImm45YKS'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.026Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/, '$8YVy0_uI-Ky32THWyGdy2uCqX5E4MV5'/*+25 bytes*/, '@telegram_channel-1368728425:bee'/*+9 bytes*/, 1669915298000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6453.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!RbrZlVP9cuG'/*+1771 bytes*/, 'batch/1747428342188/40') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.030Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/, '$3iqA0qzLYHCmQ8ThsHiKBd4Q4Om7cdo'/*+25 bytes*/, '@telegram_channel-1835296767:bee'/*+9 bytes*/, 1740752941000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$ApZiyfrQSdNkkX0N4wVjcHfErOdxloM'/*+25 bytes*/, 0.0, 'TEXT', 6314.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!Y6FMK8kz1AB'/*+633 bytes*/, 'batch/1747428316261/40') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.033Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/, '$sTSh23Nv3Q83cUny6wyHRi-JWEz1zTU'/*+25 bytes*/, '@telegram_channel-2588212450:bee'/*+9 bytes*/, 1747400552000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6216.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!grRrysIOK3a'/*+533 bytes*/, 'batch/1747428311479/34') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.034Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/28'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.040Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.eventID = '$Y4ThQttPfzevumu5yXNrK36jq7JBOQ2'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.040Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.eventID = '$-MGDFnzzfZefUhC35_iYptjf2xvECTF'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.043Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.eventID = '$WvSunFfGr_HYnlUWSr3Lp0iETVYRGaq'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.043Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$gxZN8ysFK3_Aq1T0R0TxzfFImm45YKS'/*+25 bytes*/, '@telegram_7458013732:beeper.loca'/*+1 bytes*/, 1746796812000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$L2jX82hU6dwabzknqIIPcw-1VtdwAbU'/*+25 bytes*/, 0.0, 'TEXT', 5996.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+605 bytes*/, 'batch/1747428309827/28') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.044Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428342188/41'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.045Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428316261/41'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.045Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428311479/35'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.046Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$D-507Bo6YI7Y6OnZiIemGG5iphOMraE'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.046Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/, '$Y4ThQttPfzevumu5yXNrK36jq7JBOQ2'/*+25 bytes*/, '@telegram_channel-1368728425:bee'/*+9 bytes*/, 1670606005000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6454.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!RbrZlVP9cuG'/*+1735 bytes*/, 'batch/1747428342188/41') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.048Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/, '$-MGDFnzzfZefUhC35_iYptjf2xvECTF'/*+25 bytes*/, '@telegram_channel-1835296767:bee'/*+9 bytes*/, 1741135754000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'STICKER', 6315.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!Y6FMK8kz1AB'/*+1352 bytes*/, 'batch/1747428316261/41') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.048Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/, '$WvSunFfGr_HYnlUWSr3Lp0iETVYRGaq'/*+25 bytes*/, '@telegram_channel-2588212450:bee'/*+9 bytes*/, 1747400553000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6217.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!grRrysIOK3a'/*+536 bytes*/, 'batch/1747428311479/35') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.049Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/29'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.148Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.eventID = '$MhAxHXLsb9NWYvtXkR5xhUtLqlKuwB5'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.149Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.eventID = '$MN2rYhqdbcZ4M8f4wE48CMwq67JFHFk'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.149Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.eventID = '$W7vI1l1fQk10TPi4b5z1muqflRKUvnp'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.149Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$D-507Bo6YI7Y6OnZiIemGG5iphOMraE'/*+25 bytes*/, '@telegram_7458013732:beeper.loca'/*+1 bytes*/, 1746797401000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$L2jX82hU6dwabzknqIIPcw-1VtdwAbU'/*+25 bytes*/, 0.0, 'TEXT', 5997.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+610 bytes*/, 'batch/1747428309827/29') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.155Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428342188/42'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.155Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428316261/42'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.156Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428311479/36'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.157Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$zPuraObbHM5fwH882ES-KmillaPQXgg'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.157Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/, '$MhAxHXLsb9NWYvtXkR5xhUtLqlKuwB5'/*+25 bytes*/, '@telegram_channel-1368728425:bee'/*+9 bytes*/, 1670606008000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6455.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!RbrZlVP9cuG'/*+1719 bytes*/, 'batch/1747428342188/42') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.162Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/, '$MN2rYhqdbcZ4M8f4wE48CMwq67JFHFk'/*+25 bytes*/, '@telegram_channel-1835296767:bee'/*+9 bytes*/, 1743339349000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6316.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!Y6FMK8kz1AB'/*+562 bytes*/, 'batch/1747428316261/42') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.166Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/, '$W7vI1l1fQk10TPi4b5z1muqflRKUvnp'/*+25 bytes*/, '@telegram_6821234622:beeper.loca'/*+1 bytes*/, 1747400562000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6218.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!grRrysIOK3a'/*+526 bytes*/, 'batch/1747428311479/36') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.177Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/30'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.180Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.eventID = '$9CehsUbpQxUQoh464-IaHccf66_H_e9'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.180Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.eventID = '$JfL1O5AtTfJm6C4K8kGKuInSMCaeCEl'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.180Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.eventID = '$G9nwdnD4eezgiCXZIJRidlGIjqmEdqA'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.180Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$zPuraObbHM5fwH882ES-KmillaPQXgg'/*+25 bytes*/, '@telegram_7458013732:beeper.loca'/*+1 bytes*/, 1746797544000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$L2jX82hU6dwabzknqIIPcw-1VtdwAbU'/*+25 bytes*/, 0.0, 'TEXT', 5998.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+636 bytes*/, 'batch/1747428309827/30') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.187Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428342188/43'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.188Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428316261/43'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.188Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428311479/37'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.190Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$rF7xJ5kBb4uKuCzEZdRIha263yyFWWK'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.192Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/, '$9CehsUbpQxUQoh464-IaHccf66_H_e9'/*+25 bytes*/, '@telegram_channel-1368728425:bee'/*+9 bytes*/, 1672593121000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6456.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!RbrZlVP9cuG'/*+2065 bytes*/, 'batch/1747428342188/43') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.195Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/, '$JfL1O5AtTfJm6C4K8kGKuInSMCaeCEl'/*+25 bytes*/, '@telegram_channel-1835296767:bee'/*+9 bytes*/, 1743574578000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'VIDEO', 6317.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!Y6FMK8kz1AB'/*+968 bytes*/, 'batch/1747428316261/43') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.197Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/, '$G9nwdnD4eezgiCXZIJRidlGIjqmEdqA'/*+25 bytes*/, '@telegram_6821234622:beeper.loca'/*+1 bytes*/, 1747400566000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6219.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!grRrysIOK3a'/*+539 bytes*/, 'batch/1747428311479/37') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.200Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/31'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.207Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.eventID = '$0dfXpUJa-KSnKEKeYrFeas_wJ1E0NNH'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.207Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.eventID = '$nGyGFOro8T8HCOutsnS9abuQib2Stvr'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.207Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.eventID = '$L7znQSXr6bT_xfQ-TJwd_i9ix5wC92k'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.207Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$rF7xJ5kBb4uKuCzEZdRIha263yyFWWK'/*+25 bytes*/, '@telegram_7458013732:beeper.loca'/*+1 bytes*/, 1746797567000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$L2jX82hU6dwabzknqIIPcw-1VtdwAbU'/*+25 bytes*/, 0.0, 'TEXT', 5999.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+616 bytes*/, 'batch/1747428309827/31') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.210Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428342188/44'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.210Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428316261/44'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.210Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428311479/38'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.216Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$xUPcuG8p5T4H1TeCLROwGtgJDqkLLeS'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.216Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/, '$0dfXpUJa-KSnKEKeYrFeas_wJ1E0NNH'/*+25 bytes*/, '@telegram_channel-1368728425:bee'/*+9 bytes*/, 1672593158000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6457.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!RbrZlVP9cuG'/*+1879 bytes*/, 'batch/1747428342188/44') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.218Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/, '$nGyGFOro8T8HCOutsnS9abuQib2Stvr'/*+25 bytes*/, '@telegram_channel-1835296767:bee'/*+9 bytes*/, 1745738922000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'VIDEO', 6318.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!Y6FMK8kz1AB'/*+962 bytes*/, 'batch/1747428316261/44') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.223Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/, '$L7znQSXr6bT_xfQ-TJwd_i9ix5wC92k'/*+25 bytes*/, '@telegram_6821234622:beeper.loca'/*+1 bytes*/, 1747400568000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6220.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!grRrysIOK3a'/*+527 bytes*/, 'batch/1747428311479/38') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.226Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/32'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.226Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.eventID = '$zIywJjz3HZmt7bMKvbRxnA5re0at6jI'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.232Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.eventID = '$FEsTSS6l0paAK8Z61T7_THZAM9T-_sI'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.233Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.eventID = '$UVCli9lQIJHl8UwIZXpHrit14KkUdIY'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.233Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$xUPcuG8p5T4H1TeCLROwGtgJDqkLLeS'/*+25 bytes*/, '@telegram_7603937255:beeper.loca'/*+1 bytes*/, 1746803544000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$rF7xJ5kBb4uKuCzEZdRIha263yyFWWK'/*+25 bytes*/, 0.0, 'TEXT', 6000.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+1470 bytes*/, 'batch/1747428309827/32') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.237Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428342188/45'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.237Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428316261/45'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.237Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428311479/39'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.240Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$EgpCNSUByY6PJ9bKDEdMR-Wt2kQj49-'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.240Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/, '$zIywJjz3HZmt7bMKvbRxnA5re0at6jI'/*+25 bytes*/, '@telegram_channel-1368728425:bee'/*+9 bytes*/, 1672593256000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6458.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!RbrZlVP9cuG'/*+1768 bytes*/, 'batch/1747428342188/45') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.241Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/, '$FEsTSS6l0paAK8Z61T7_THZAM9T-_sI'/*+25 bytes*/, '@telegram_channel-1835296767:bee'/*+9 bytes*/, 1746540183000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6319.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!Y6FMK8kz1AB'/*+1682 bytes*/, 'batch/1747428316261/45') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.242Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/, '$UVCli9lQIJHl8UwIZXpHrit14KkUdIY'/*+25 bytes*/, '@telegram_6821234622:beeper.loca'/*+1 bytes*/, 1747400569000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6221.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!grRrysIOK3a'/*+529 bytes*/, 'batch/1747428311479/39') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.247Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/33'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.268Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.eventID = '$A59bA0_S7zZR6wWFinA3XtOCe3tUGRD'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.268Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND m.eventID = '$lSGLhApkdiIJXpJ7CAe6CWGG4a5LVWA'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.268Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.eventID = '$SvgtVMaimKrIYRp8no3iZbkD53OoSae'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.274Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$EgpCNSUByY6PJ9bKDEdMR-Wt2kQj49-'/*+25 bytes*/, '@telegram_1185223315:beeper.loca'/*+1 bytes*/, 1746865912000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6001.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+569 bytes*/, 'batch/1747428309827/33') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.275Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428342188/46'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.277Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/, '$lSGLhApkdiIJXpJ7CAe6CWGG4a5LVWA'/*+25 bytes*/, '@telegrambot:beeper.local', 1747428316381.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6320.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.power_lev'/*+475 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:45:49.279Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428311479/40'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.286Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$-IGUF-KDtwFyFM5uRaaZYFaxMj61eLg'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.286Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/, '$A59bA0_S7zZR6wWFinA3XtOCe3tUGRD'/*+25 bytes*/, '@telegram_channel-1368728425:bee'/*+9 bytes*/, 1672593387000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6459.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!RbrZlVP9cuG'/*+1862 bytes*/, 'batch/1747428342188/46') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.292Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:45:49.294Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/, '$SvgtVMaimKrIYRp8no3iZbkD53OoSae'/*+25 bytes*/, '@telegram_channel-2588212450:bee'/*+9 bytes*/, 1747400572000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6222.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!grRrysIOK3a'/*+537 bytes*/, 'batch/1747428311479/40') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.294Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/34'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.300Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.eventID = '$opVyNllox6EYqHdnJQihQOUH5vcpS_C'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.300Z] 
      SELECT
          COUNT(DISTINCT mx_room_messages.id) AS unreadCount,
          SUM(CASE WHEN mention.value = '@room' OR mention.value = '@timii:beeper.com' THEN 1 ELSE 0 END) AS unreadMentionsCount
      FROM mx_room_messages
      LEFT JOIN json_each(mx_room_messages.message, '$.mentions') AS mention
      WHERE
          mx_room_messages.roomId = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ AND
          mx_room_messages.isSentByMe = 0 AND
          mx_room_messages.isDeleted = 0 AND
          mx_room_messages.countsAsUnread = 1 AND
          mx_room_messages.hsOrder > 6319.0
    
[debug] [2025-05-16T20:45:49.300Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:45:49.300Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.eventID = '$RVuqX-7TRdWPDzfhRIygEfOrTgHy7cF'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.301Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$-IGUF-KDtwFyFM5uRaaZYFaxMj61eLg'/*+25 bytes*/, '@telegram_1185223315:beeper.loca'/*+1 bytes*/, 1746865949000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$ikTnU-ixVpPi4jeiEd9uRkbB3eGjDZW'/*+25 bytes*/, 0.0, 'TEXT', 6002.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+655 bytes*/, 'batch/1747428309827/34') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.305Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428342188/47'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.307Z] INSERT OR REPLACE INTO threads VALUES ('!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{},"bridge":{"b'/*+3781 bytes*/, NULL)
[debug] [2025-05-16T20:45:49.307Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428311479/41'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.308Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$bcX2YO2deEs0CHKBDu1gPXQ4WdzKA8K'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.310Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/, '$opVyNllox6EYqHdnJQihQOUH5vcpS_C'/*+25 bytes*/, '@telegram_channel-1368728425:bee'/*+9 bytes*/, 1672593405000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6460.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!RbrZlVP9cuG'/*+1886 bytes*/, 'batch/1747428342188/47') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.310Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:45:49.313Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/, '$RVuqX-7TRdWPDzfhRIygEfOrTgHy7cF'/*+25 bytes*/, '@telegram_channel-2588212450:bee'/*+9 bytes*/, 1747400573000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6223.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!grRrysIOK3a'/*+535 bytes*/, 'batch/1747428311479/41') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.317Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/35'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.318Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.eventID = '$na1oKvzPX8NXRIyltu8DCS3miBBrtMd'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.321Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:45:49.321Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.eventID = '$as2AiyaoxEt6WujzmBZ6lmWhsXcTBfb'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.321Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$bcX2YO2deEs0CHKBDu1gPXQ4WdzKA8K'/*+25 bytes*/, '@telegram_1185223315:beeper.loca'/*+1 bytes*/, 1746866070000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$IbdGIwtjWhKyqqpfqzNOiFTMOitf4B3'/*+25 bytes*/, 0.0, 'TEXT', 6003.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+639 bytes*/, 'batch/1747428309827/35') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.325Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428342188/48'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.325Z] UPDATE threads SET thread = json_patch(thread, '{"lastReadMessageSortKey":6319,"'/*+1883 bytes*/), timestamp = COALESCE(1746540183000.0, timestamp) WHERE threadID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:45:49.327Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428311479/42'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.328Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$9geg1VqVfG1brcbM4AEcm1v7OiMPCP6'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.330Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/, '$na1oKvzPX8NXRIyltu8DCS3miBBrtMd'/*+25 bytes*/, '@telegram_channel-1368728425:bee'/*+9 bytes*/, 1672593438000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6461.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!RbrZlVP9cuG'/*+1856 bytes*/, 'batch/1747428342188/48') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.333Z] SELECT accountID, thread FROM threads WHERE threadID = '!Y6FMK8kz1AB4O0PQK7U4:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:45:49.333Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/, '$as2AiyaoxEt6WujzmBZ6lmWhsXcTBfb'/*+25 bytes*/, '@telegram_609517172:beeper.local', 1747401647000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6224.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!grRrysIOK3a'/*+594 bytes*/, 'batch/1747428311479/42') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.339Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/36'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.339Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.eventID = '$RBu8Bock4QwXoy76TgkRKAGozvl4yXF'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.341Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.eventID = '$ozhg7g7BZV0wY7wI5FvWX0SpUKf8Jrd'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.342Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$9geg1VqVfG1brcbM4AEcm1v7OiMPCP6'/*+25 bytes*/, '@telegram_609517172:beeper.local', 1746866070000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$bcX2YO2deEs0CHKBDu1gPXQ4WdzKA8K'/*+25 bytes*/, 0.0, 'TEXT', 6004.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+638 bytes*/, 'batch/1747428309827/36') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.342Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428342188/49'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.342Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428311479/43'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.344Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$FuVvVxX2w8wPj5WeqwBuNCMatwA8NIX'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.345Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/, '$RBu8Bock4QwXoy76TgkRKAGozvl4yXF'/*+25 bytes*/, '@telegram_channel-1368728425:bee'/*+9 bytes*/, 1672593487000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6462.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!RbrZlVP9cuG'/*+1963 bytes*/, 'batch/1747428342188/49') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.346Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/, '$ozhg7g7BZV0wY7wI5FvWX0SpUKf8Jrd'/*+25 bytes*/, '@telegram_609517172:beeper.local', 1747408724000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6225.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!grRrysIOK3a'/*+594 bytes*/, 'batch/1747428311479/43') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.354Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/37'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.354Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND m.eventID = '$oFTlfesqlSeL7kSTBu9mRz8zcRf-bwM'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.359Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND m.eventID = '$iFy1CbKHraouvRUwmUe6lfTjsErpItS'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.360Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$FuVvVxX2w8wPj5WeqwBuNCMatwA8NIX'/*+25 bytes*/, '@telegram_5607539508:beeper.loca'/*+1 bytes*/, 1747081969000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6005.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+535 bytes*/, 'batch/1747428309827/37') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.360Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/, '$oFTlfesqlSeL7kSTBu9mRz8zcRf-bwM'/*+25 bytes*/, '@telegrambot:beeper.local', 1747428342237.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6463.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.power_lev'/*+475 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:45:49.362Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/, '$iFy1CbKHraouvRUwmUe6lfTjsErpItS'/*+25 bytes*/, '@telegrambot:beeper.local', 1747428311576.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6226.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.power_lev'/*+475 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:45:49.364Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$oT1qM_26ksF8ZP1B7sw0eqXM1BCc8We'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.364Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:45:49.366Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:45:49.367Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/38'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.367Z] 
      SELECT
          COUNT(DISTINCT mx_room_messages.id) AS unreadCount,
          SUM(CASE WHEN mention.value = '@room' OR mention.value = '@timii:beeper.com' THEN 1 ELSE 0 END) AS unreadMentionsCount
      FROM mx_room_messages
      LEFT JOIN json_each(mx_room_messages.message, '$.mentions') AS mention
      WHERE
          mx_room_messages.roomId = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ AND
          mx_room_messages.isSentByMe = 0 AND
          mx_room_messages.isDeleted = 0 AND
          mx_room_messages.countsAsUnread = 1 AND
          mx_room_messages.hsOrder > 6462.0
    
[debug] [2025-05-16T20:45:49.367Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:45:49.367Z] 
      SELECT
          COUNT(DISTINCT mx_room_messages.id) AS unreadCount,
          SUM(CASE WHEN mention.value = '@room' OR mention.value = '@timii:beeper.com' THEN 1 ELSE 0 END) AS unreadMentionsCount
      FROM mx_room_messages
      LEFT JOIN json_each(mx_room_messages.message, '$.mentions') AS mention
      WHERE
          mx_room_messages.roomId = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ AND
          mx_room_messages.isSentByMe = 0 AND
          mx_room_messages.isDeleted = 0 AND
          mx_room_messages.countsAsUnread = 1 AND
          mx_room_messages.hsOrder > 3592.0
    
[debug] [2025-05-16T20:45:49.371Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:45:49.374Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$oT1qM_26ksF8ZP1B7sw0eqXM1BCc8We'/*+25 bytes*/, '@telegram_7603937255:beeper.loca'/*+1 bytes*/, 1747124444000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$FuVvVxX2w8wPj5WeqwBuNCMatwA8NIX'/*+25 bytes*/, 0.0, 'TEXT', 6006.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+604 bytes*/, 'batch/1747428309827/38') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.374Z] INSERT OR REPLACE INTO threads VALUES ('!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{},"bridge":{"b'/*+3718 bytes*/, NULL)
[debug] [2025-05-16T20:45:49.375Z] INSERT OR REPLACE INTO threads VALUES ('!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{},"bridge":{"b'/*+5795 bytes*/, NULL)
[debug] [2025-05-16T20:45:49.378Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$2xzLhTc1EL8wP15O1cw4N0h9_agfHtu'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.379Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:45:49.379Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:45:49.379Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/39'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.379Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:45:49.381Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:45:49.382Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$2xzLhTc1EL8wP15O1cw4N0h9_agfHtu'/*+25 bytes*/, '@telegram_609517172:beeper.local', 1747132600000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$ikTnU-ixVpPi4jeiEd9uRkbB3eGjDZW'/*+25 bytes*/, 0.0, 'TEXT', 6007.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+824 bytes*/, 'batch/1747428309827/39') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.386Z] UPDATE threads SET thread = json_patch(thread, '{"lastReadMessageSortKey":6462,"'/*+2164 bytes*/), timestamp = COALESCE(1672593487000.0, timestamp) WHERE threadID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:45:49.390Z] UPDATE threads SET thread = json_patch(thread, '{"lastReadMessageSortKey":3592,"'/*+795 bytes*/), timestamp = COALESCE(1747408724000.0, timestamp) WHERE threadID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:45:49.394Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$QI1EMw_7O7FAHkUY638doqv_SuvdhhP'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.394Z] SELECT accountID, thread FROM threads WHERE threadID = '!RbrZlVP9cuGPGEHxrj4Q:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:45:49.394Z] SELECT accountID, thread FROM threads WHERE threadID = '!grRrysIOK3a7QFCn2nxy:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:45:49.394Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/40'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.401Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$QI1EMw_7O7FAHkUY638doqv_SuvdhhP'/*+25 bytes*/, '@telegram_7816590493:beeper.loca'/*+1 bytes*/, 1747139537000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$ikTnU-ixVpPi4jeiEd9uRkbB3eGjDZW'/*+25 bytes*/, 0.0, 'TEXT', 6008.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+611 bytes*/, 'batch/1747428309827/40') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.407Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$u0Z9riROyWC5Q6P3u1eTd06UIevthFM'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.408Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/41'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.411Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$u0Z9riROyWC5Q6P3u1eTd06UIevthFM'/*+25 bytes*/, '@telegram_5613652336:beeper.loca'/*+1 bytes*/, 1747151164000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6009.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+529 bytes*/, 'batch/1747428309827/41') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.413Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$XlzgL8et1Ym0YytgBZNeU_DkQMe2GMG'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.414Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/42'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.416Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$XlzgL8et1Ym0YytgBZNeU_DkQMe2GMG'/*+25 bytes*/, '@telegram_5613652336:beeper.loca'/*+1 bytes*/, 1747151186000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6010.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+544 bytes*/, 'batch/1747428309827/42') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.422Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$5PEA7qK63su-gnTZf6Bmq-S1kR2RjUz'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.424Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/43'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.425Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$5PEA7qK63su-gnTZf6Bmq-S1kR2RjUz'/*+25 bytes*/, '@telegram_7603937255:beeper.loca'/*+1 bytes*/, 1747202770000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$XlzgL8et1Ym0YytgBZNeU_DkQMe2GMG'/*+25 bytes*/, 0.0, 'TEXT', 6011.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+604 bytes*/, 'batch/1747428309827/43') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.429Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$T6DYeFzjqCVAn4XANN-yAeRu6VV_1bt'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.430Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/44'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.441Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$T6DYeFzjqCVAn4XANN-yAeRu6VV_1bt'/*+25 bytes*/, '@telegram_7595606027:beeper.loca'/*+1 bytes*/, 1747250437000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$mv5e5HrorWd2MDweGogweE6OMp3-Csu'/*+25 bytes*/, 0.0, 'TEXT', 6012.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+619 bytes*/, 'batch/1747428309827/44') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.444Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$o21xgGpziljQGYAxL7O8mU3GHCGsU-U'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.445Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/45'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.446Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$o21xgGpziljQGYAxL7O8mU3GHCGsU-U'/*+25 bytes*/, '@telegram_7595606027:beeper.loca'/*+1 bytes*/, 1747250464000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6013.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+569 bytes*/, 'batch/1747428309827/45') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.448Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$-sKW8N0D_BRa76c5AYfACRgKZ_zJQTQ'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.450Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/46'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.451Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$-sKW8N0D_BRa76c5AYfACRgKZ_zJQTQ'/*+25 bytes*/, '@telegram_7595606027:beeper.loca'/*+1 bytes*/, 1747250491000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6014.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+572 bytes*/, 'batch/1747428309827/46') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.458Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$F3OUWRWjBcOCM7Cx18WWeOjZBDjj8-D'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.553Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/47'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.553Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$F3OUWRWjBcOCM7Cx18WWeOjZBDjj8-D'/*+25 bytes*/, '@telegram_7595606027:beeper.loca'/*+1 bytes*/, 1747250546000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6015.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+623 bytes*/, 'batch/1747428309827/47') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.557Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$sqY2-gR5LuMsPpcDQrJ2CjDR1J5RFl9'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.557Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/48'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.558Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$sqY2-gR5LuMsPpcDQrJ2CjDR1J5RFl9'/*+25 bytes*/, '@telegram_7595606027:beeper.loca'/*+1 bytes*/, 1747250556000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6016.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+554 bytes*/, 'batch/1747428309827/48') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.560Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$ZehXOayFPf1_7fGQnZxuSzXCYE3O7ZL'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.561Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'batch/1747428309827/49'
LIMIT 1
    
[debug] [2025-05-16T20:45:49.561Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$ZehXOayFPf1_7fGQnZxuSzXCYE3O7ZL'/*+25 bytes*/, '@telegram_7595606027:beeper.loca'/*+1 bytes*/, 1747250662000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6017.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!OEZesxiuU9i'/*+550 bytes*/, 'batch/1747428309827/49') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:49.563Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$u5hbFOxCRZJSdVlMLsXyWYY8_hQatw4'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:49.564Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, '$u5hbFOxCRZJSdVlMLsXyWYY8_hQatw4'/*+25 bytes*/, '@telegrambot:beeper.local', 1747428309963.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6018.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.power_lev'/*+475 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:45:49.567Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:45:49.568Z] 
      SELECT
          COUNT(DISTINCT mx_room_messages.id) AS unreadCount,
          SUM(CASE WHEN mention.value = '@room' OR mention.value = '@timii:beeper.com' THEN 1 ELSE 0 END) AS unreadMentionsCount
      FROM mx_room_messages
      LEFT JOIN json_each(mx_room_messages.message, '$.mentions') AS mention
      WHERE
          mx_room_messages.roomId = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ AND
          mx_room_messages.isSentByMe = 0 AND
          mx_room_messages.isDeleted = 0 AND
          mx_room_messages.countsAsUnread = 1 AND
          mx_room_messages.hsOrder > 3743.0
    
[debug] [2025-05-16T20:45:49.569Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:45:49.571Z] INSERT OR REPLACE INTO threads VALUES ('!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{},"bridge":{"b'/*+7607 bytes*/, NULL)
[debug] [2025-05-16T20:45:49.571Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:45:49.573Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:45:49.574Z] UPDATE threads SET thread = json_patch(thread, '{"lastReadMessageSortKey":3743,"'/*+751 bytes*/), timestamp = COALESCE(1747250662000.0, timestamp) WHERE threadID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:45:49.574Z] SELECT accountID, thread FROM threads WHERE threadID = '!OEZesxiuU9iU4uOLUlJ3:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:45:50.836Z] INSERT OR REPLACE INTO key_values VALUES ('ad:com.beeper.device_metadata.MZ'/*+8 bytes*/, '{"app_name":"Beeper Desktop v4 ('/*+165 bytes*/)
[debug] [2025-05-16T20:45:50.836Z] INSERT OR REPLACE INTO key_values VALUES ('ad:com.beeper.desktop.prefs', '{"after_archive":"select_next_th'/*+1226 bytes*/)
[debug] [2025-05-16T20:45:51.066Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!6sNa0R3Fm3fXTx7Fbx0Q:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:45:51.171Z] SELECT * FROM breadcrumbs WHERE id = '!6sNa0R3Fm3fXTx7Fbx0Q:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:45:51.179Z] INSERT OR REPLACE INTO breadcrumbs (id, sentCount, sentLast, openCount, lastOpenTime) VALUES ('!6sNa0R3Fm3fXTx7Fbx0Q:beeper.loc'/*+2 bytes*/, 0.0, 0.0, 1.0, 1747428351178.0)
[debug] [2025-05-16T20:45:51.187Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!6sNa0R3Fm3fXTx7Fbx0Q:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 1515.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:45:51.298Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!6sNa0R3Fm3fXTx7Fbx0Q:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 1514.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:45:51.403Z] SELECT accountID, thread FROM threads WHERE threadID = '!6sNa0R3Fm3fXTx7Fbx0Q:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:45:51.409Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!6sNa0R3Fm3fXTx7Fbx0Q:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:45:51.412Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!6sNa0R3Fm3fXTx7Fbx0Q:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:45:51.419Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!6sNa0R3Fm3fXTx7Fbx0Q:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:45:51.487Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!6sNa0R3Fm3fXTx7Fbx0Q:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 1514.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:45:51.625Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!6sNa0R3Fm3fXTx7Fbx0Q:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:45:52.007Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!6sNa0R3Fm3fXTx7Fbx0Q:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 1514.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:45:52.060Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!6sNa0R3Fm3fXTx7Fbx0Q:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:45:52.849Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!6sNa0R3Fm3fXTx7Fbx0Q:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 1514.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:45:52.904Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!6sNa0R3Fm3fXTx7Fbx0Q:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:45:54.484Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!6sNa0R3Fm3fXTx7Fbx0Q:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 1514.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:45:54.515Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!6sNa0R3Fm3fXTx7Fbx0Q:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:45:56.590Z] SELECT accountID, thread FROM threads WHERE threadID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:45:56.591Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$o5uvmYU903uRT-Cl9vttjhO3D5FNukJ'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:56.592Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$o5uvmYU903uRT-Cl9vttjhO3D5FNukJ'/*+25 bytes*/, '@telegrambot:beeper.local', 1747428374879.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6540.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+490 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:45:56.593Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$-lxFEdrDMltA3XGQk6Yyr_KuueSZim_'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:56.594Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (95.0, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$-lxFEdrDMltA3XGQk6Yyr_KuueSZim_'/*+25 bytes*/, '@telegram_channel-1161123794:bee'/*+9 bytes*/, 1747427903078.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"95","text":"m.room.member'/*+505 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:45:56.595Z] 
SELECT COUNT(*) as count
FROM mx_room_messages
WHERE roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND type != 'HIDDEN' AND type != 'REACTION'
  
[debug] [2025-05-16T20:45:56.596Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$o5uvmYU903uRT-Cl9vttjhO3D5FNukJ'/*+25 bytes*/, '@telegrambot:beeper.local', 1747428374879.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'MEMBERSHIP', 6540.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"senderID":"@telegrambot'/*+874 bytes*/, NULL) RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:56.599Z] INSERT OR REPLACE INTO threads VALUES ('!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{},"bridge":{"b'/*+7132 bytes*/, 1747427789000.0)
[debug] [2025-05-16T20:45:56.599Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:45:56.600Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:45:57.281Z] SELECT accountID, thread FROM threads WHERE threadID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:45:57.284Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$2XZOHaK0c2r-9vLaCy2K3ZVMTtHgKpP'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:57.286Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$2XZOHaK0c2r-9vLaCy2K3ZVMTtHgKpP'/*+25 bytes*/, '@telegram_6825918760:beeper.loca'/*+1 bytes*/, 1747428375147.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6543.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+497 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:45:57.289Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$-lxFEdrDMltA3XGQk6Yyr_KuueSZim_'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:57.290Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (95.0, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$-lxFEdrDMltA3XGQk6Yyr_KuueSZim_'/*+25 bytes*/, '@telegram_channel-1161123794:bee'/*+9 bytes*/, 1747427903078.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"95","text":"m.room.member'/*+505 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:45:57.292Z] 
SELECT COUNT(*) as count
FROM mx_room_messages
WHERE roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND type != 'HIDDEN' AND type != 'REACTION'
  
[debug] [2025-05-16T20:45:57.293Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$zXPEjj7OPHYKrUkINl5doezomrJIZhy'/*+25 bytes*/, '@telegram_6825918760:beeper.loca'/*+1 bytes*/, 1747428374888.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'MEMBERSHIP', 6541.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"senderID":"@telegram_68'/*+888 bytes*/, NULL) RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:57.296Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$olUgVeHZWO-w3SaMEC54hFiTWuRkcwa'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:57.297Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'mautrix-go_1747428374899373449_1'
LIMIT 1
    
[debug] [2025-05-16T20:45:57.297Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$olUgVeHZWO-w3SaMEC54hFiTWuRkcwa'/*+25 bytes*/, '@telegram_6825918760:beeper.loca'/*+1 bytes*/, 1747428368000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$umQUFMEFpbxwpZUIi9nUwTx9-Mo7IqB'/*+25 bytes*/, 0.0, 'TEXT', 6542.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!KyFDFn3rZOu'/*+645 bytes*/, 'mautrix-go_1747428374899373449_1') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:45:57.302Z] 
SELECT COUNT(*) as count
FROM mx_room_messages
WHERE roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND type != 'HIDDEN' AND type != 'REACTION'
  
[debug] [2025-05-16T20:45:57.303Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$2XZOHaK0c2r-9vLaCy2K3ZVMTtHgKpP'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:57.304Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (6389.0, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$2XZOHaK0c2r-9vLaCy2K3ZVMTtHgKpP'/*+25 bytes*/, '@telegram_6825918760:beeper.loca'/*+1 bytes*/, 1747428375147.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6543.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"6389","text":"m.room.memb'/*+502 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:45:57.305Z] SELECT * FROM mx_read_receipts WHERE userID = '@telegram_6825918760:beeper.loca'/*+1 bytes*/ AND roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:45:57.306Z] 
    INSERT OR REPLACE INTO mx_read_receipts (userID, timestamp, roomID, relatesToID, hsOrder, hsSuborder, hsOrderString, lastVisibleEventID)
    VALUES ('@telegram_6825918760:beeper.loca'/*+1 bytes*/, 1747428374906.0, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$olUgVeHZWO-w3SaMEC54hFiTWuRkcwa'/*+25 bytes*/, 6542.0, NULL, NULL, (
      SELECT eventID
      FROM mx_room_messages
      WHERE
        roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND
        type != 'HIDDEN' AND
        type != 'REACTION' AND
        (hsOrder <= 6542.0 OR senderContactID = '@telegram_6825918760:beeper.loca'/*+1 bytes*/)
      ORDER BY hsOrder DESC LIMIT 1
    ) )
    RETURNING *
  
[debug] [2025-05-16T20:45:57.306Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$olUgVeHZWO-w3SaMEC54hFiTWuRkcwa'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:57.308Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:45:57.309Z] 
      SELECT
          COUNT(DISTINCT mx_room_messages.id) AS unreadCount,
          SUM(CASE WHEN mention.value = '@room' OR mention.value = '@timii:beeper.com' THEN 1 ELSE 0 END) AS unreadMentionsCount
      FROM mx_room_messages
      LEFT JOIN json_each(mx_room_messages.message, '$.mentions') AS mention
      WHERE
          mx_room_messages.roomId = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND
          mx_room_messages.isSentByMe = 0 AND
          mx_room_messages.isDeleted = 0 AND
          mx_room_messages.countsAsUnread = 1 AND
          mx_room_messages.hsOrder > 221.0
    
[debug] [2025-05-16T20:45:57.311Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:45:57.312Z] INSERT OR REPLACE INTO threads VALUES ('!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{},"bridge":{"b'/*+7156 bytes*/, 1747427789000.0)
[debug] [2025-05-16T20:45:57.313Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:45:57.313Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:45:57.314Z] UPDATE threads SET thread = json_patch(thread, '{"lastReadMessageSortKey":221,"p'/*+1475 bytes*/), timestamp = COALESCE(1747428368000.0, timestamp) WHERE threadID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:45:57.314Z] SELECT accountID, thread FROM threads WHERE threadID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:45:58.542Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:45:58.551Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 2174.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:45:58.634Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 2154.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:45:58.667Z] SELECT * FROM breadcrumbs WHERE id = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:45:58.669Z] INSERT OR REPLACE INTO breadcrumbs (id, sentCount, sentLast, openCount, lastOpenTime) VALUES ('!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/, 0.0, 0.0, 1.0, 1747428358668.0)
[debug] [2025-05-16T20:45:58.692Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 2134.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:45:59.732Z] SELECT * FROM mx_room_messages WHERE roomID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/ AND id = '2785'
[debug] [2025-05-16T20:45:59.879Z] SELECT * FROM mx_room_messages WHERE roomID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/ AND id = '2791'
[debug] [2025-05-16T20:45:59.937Z] SELECT accountID, thread FROM threads WHERE threadID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:45:59.941Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:45:59.943Z] 
    INSERT OR REPLACE INTO mx_read_receipts (userID, timestamp, roomID, relatesToID, hsOrder, hsSuborder, hsOrderString, lastVisibleEventID)
    VALUES ('@timii:beeper.com', 1747428378246.0, '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/, '$wI8c5OOpbcBcqhBe4h7bHPg-5cXUPzU'/*+26 bytes*/, 2172.0, NULL, NULL, (
      SELECT eventID
      FROM mx_room_messages
      WHERE
        roomID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/ AND
        type != 'HIDDEN' AND
        type != 'REACTION' AND
        (hsOrder <= 2172.0 OR senderContactID = '@timii:beeper.com')
      ORDER BY hsOrder DESC LIMIT 1
    ) )
    RETURNING *
  
[debug] [2025-05-16T20:45:59.946Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/ AND m.eventID = '$0L_d40dgmB3ogpJ3QJ4sz-UzhpM4uY-'/*+26 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:59.946Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/ AND m.eventID = '$wI8c5OOpbcBcqhBe4h7bHPg-5cXUPzU'/*+26 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:45:59.954Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:45:59.955Z] 
      SELECT
          COUNT(DISTINCT mx_room_messages.id) AS unreadCount,
          SUM(CASE WHEN mention.value = '@room' OR mention.value = '@timii:beeper.com' THEN 1 ELSE 0 END) AS unreadMentionsCount
      FROM mx_room_messages
      LEFT JOIN json_each(mx_room_messages.message, '$.mentions') AS mention
      WHERE
          mx_room_messages.roomId = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/ AND
          mx_room_messages.isSentByMe = 0 AND
          mx_room_messages.isDeleted = 0 AND
          mx_room_messages.countsAsUnread = 1 AND
          mx_room_messages.hsOrder > 2172.0
    
[debug] [2025-05-16T20:45:59.957Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:45:59.960Z] INSERT OR REPLACE INTO threads VALUES ('!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/, 'instagramgo', '{"extra":{"tags":{},"bridge":{"b'/*+3589 bytes*/, 1747371556873.0)
[debug] [2025-05-16T20:45:59.962Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:45:59.968Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:46:00.619Z] SELECT accountID, thread FROM threads WHERE threadID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:46:00.623Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:46:00.633Z] 
    INSERT OR REPLACE INTO mx_read_receipts (userID, timestamp, roomID, relatesToID, hsOrder, hsSuborder, hsOrderString, lastVisibleEventID)
    VALUES ('@timii:beeper.com', 1747428378703.0, '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/, '$bP7DSgzaQ5Ba_KbmXRpKyxDGypVtUCd'/*+26 bytes*/, 2173.0, NULL, NULL, (
      SELECT eventID
      FROM mx_room_messages
      WHERE
        roomID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/ AND
        type != 'HIDDEN' AND
        type != 'REACTION' AND
        (hsOrder <= 2173.0 OR senderContactID = '@timii:beeper.com')
      ORDER BY hsOrder DESC LIMIT 1
    ) )
    RETURNING *
  
[debug] [2025-05-16T20:46:00.638Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/ AND m.eventID = '$wI8c5OOpbcBcqhBe4h7bHPg-5cXUPzU'/*+26 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:00.639Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/ AND m.eventID = '$bP7DSgzaQ5Ba_KbmXRpKyxDGypVtUCd'/*+26 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:00.647Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:46:00.654Z] 
      SELECT
          COUNT(DISTINCT mx_room_messages.id) AS unreadCount,
          SUM(CASE WHEN mention.value = '@room' OR mention.value = '@timii:beeper.com' THEN 1 ELSE 0 END) AS unreadMentionsCount
      FROM mx_room_messages
      LEFT JOIN json_each(mx_room_messages.message, '$.mentions') AS mention
      WHERE
          mx_room_messages.roomId = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/ AND
          mx_room_messages.isSentByMe = 0 AND
          mx_room_messages.isDeleted = 0 AND
          mx_room_messages.countsAsUnread = 1 AND
          mx_room_messages.hsOrder > 2173.0
    
[debug] [2025-05-16T20:46:00.655Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:46:00.657Z] INSERT OR REPLACE INTO threads VALUES ('!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/, 'instagramgo', '{"extra":{"tags":{},"bridge":{"b'/*+3589 bytes*/, 1747371556873.0)
[debug] [2025-05-16T20:46:00.661Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:46:00.665Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:46:00.689Z] SELECT * FROM mx_room_messages WHERE roomID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/ AND id = '2797'
[debug] [2025-05-16T20:46:01.442Z] SELECT accountID, thread FROM threads WHERE threadID = '!TCT1WkVji8C7yqSvNLcH:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:46:01.443Z] SELECT accountID, thread FROM threads WHERE threadID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:46:01.446Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!TCT1WkVji8C7yqSvNLcH:beeper.loc'/*+2 bytes*/ AND m.eventID = '$Nou_HkeGlYw_syOlOHWZBclKEEfs6MM'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:01.446Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:46:01.447Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!TCT1WkVji8C7yqSvNLcH:beeper.loc'/*+2 bytes*/, '$Nou_HkeGlYw_syOlOHWZBclKEEfs6MM'/*+25 bytes*/, '@telegram_2007287270:beeper.loca'/*+1 bytes*/, 1747428378967.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6544.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:46:01.448Z] 
    INSERT OR REPLACE INTO mx_read_receipts (userID, timestamp, roomID, relatesToID, hsOrder, hsSuborder, hsOrderString, lastVisibleEventID)
    VALUES ('@timii:beeper.com', 1747428379018.0, '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/, '$fBg9CscbVYdcqDZzG3_2JOJZguyy6vi'/*+26 bytes*/, 2174.0, NULL, NULL, (
      SELECT eventID
      FROM mx_room_messages
      WHERE
        roomID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/ AND
        type != 'HIDDEN' AND
        type != 'REACTION' AND
        (hsOrder <= 2174.0 OR senderContactID = '@timii:beeper.com')
      ORDER BY hsOrder DESC LIMIT 1
    ) )
    RETURNING *
  
[debug] [2025-05-16T20:46:01.449Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!TCT1WkVji8C7yqSvNLcH:beeper.loc'/*+2 bytes*/ AND m.eventID = '$uYNvoZZR2AD54Fh1-eWpmeQOOG5Y3qp'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:01.450Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/ AND m.eventID = '$bP7DSgzaQ5Ba_KbmXRpKyxDGypVtUCd'/*+26 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:01.450Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/ AND m.eventID = '$fBg9CscbVYdcqDZzG3_2JOJZguyy6vi'/*+26 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:01.450Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!TCT1WkVji8C7yqSvNLcH:beeper.loc'/*+2 bytes*/, '$uYNvoZZR2AD54Fh1-eWpmeQOOG5Y3qp'/*+25 bytes*/, '@telegram_6094444989:beeper.loca'/*+1 bytes*/, 1747428378971.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6545.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:46:01.453Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:46:01.454Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!TCT1WkVji8C7yqSvNLcH:beeper.loc'/*+2 bytes*/ AND m.eventID = '$fsgB1DwZA3efCy4vmK530j1qiaNuMn4'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:01.454Z] 
      SELECT
          COUNT(DISTINCT mx_room_messages.id) AS unreadCount,
          SUM(CASE WHEN mention.value = '@room' OR mention.value = '@timii:beeper.com' THEN 1 ELSE 0 END) AS unreadMentionsCount
      FROM mx_room_messages
      LEFT JOIN json_each(mx_room_messages.message, '$.mentions') AS mention
      WHERE
          mx_room_messages.roomId = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/ AND
          mx_room_messages.isSentByMe = 0 AND
          mx_room_messages.isDeleted = 0 AND
          mx_room_messages.countsAsUnread = 1 AND
          mx_room_messages.hsOrder > 2174.0
    
[debug] [2025-05-16T20:46:01.454Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:46:01.455Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!TCT1WkVji8C7yqSvNLcH:beeper.loc'/*+2 bytes*/, '$fsgB1DwZA3efCy4vmK530j1qiaNuMn4'/*+25 bytes*/, '@telegram_6821234622:beeper.loca'/*+1 bytes*/, 1747428378974.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6546.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:46:01.457Z] INSERT OR REPLACE INTO threads VALUES ('!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/, 'instagramgo', '{"extra":{"tags":{},"bridge":{"b'/*+3592 bytes*/, 1747371556873.0)
[debug] [2025-05-16T20:46:01.459Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!TCT1WkVji8C7yqSvNLcH:beeper.loc'/*+2 bytes*/ AND m.eventID = '$JN4JA7Yk8Yk_7-iKTqT67nHS5M--xwB'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:01.459Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:46:01.460Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!TCT1WkVji8C7yqSvNLcH:beeper.loc'/*+2 bytes*/, '$JN4JA7Yk8Yk_7-iKTqT67nHS5M--xwB'/*+25 bytes*/, '@telegram_5764264292:beeper.loca'/*+1 bytes*/, 1747428378978.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6547.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:46:01.462Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!c3DVoEzMKEIZ21uzcFtp:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:46:01.464Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!TCT1WkVji8C7yqSvNLcH:beeper.loc'/*+2 bytes*/ AND m.eventID = '$INfOoFxuRG7OqLj5YaRLeCfrcq8Lz6Y'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:01.465Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!TCT1WkVji8C7yqSvNLcH:beeper.loc'/*+2 bytes*/, '$INfOoFxuRG7OqLj5YaRLeCfrcq8Lz6Y'/*+25 bytes*/, '@telegram_6936314264:beeper.loca'/*+1 bytes*/, 1747428378981.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6548.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:46:01.467Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!TCT1WkVji8C7yqSvNLcH:beeper.loc'/*+2 bytes*/ AND m.eventID = '$gCGOc-_lkqvXpZyBRNcKUpn15pefpKk'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:01.468Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!TCT1WkVji8C7yqSvNLcH:beeper.loc'/*+2 bytes*/, '$gCGOc-_lkqvXpZyBRNcKUpn15pefpKk'/*+25 bytes*/, '@telegram_5392483295:beeper.loca'/*+1 bytes*/, 1747428378985.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6549.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:46:01.469Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!TCT1WkVji8C7yqSvNLcH:beeper.loc'/*+2 bytes*/ AND m.eventID = '$medlreiTR5wkjIxd_xRk6Vok7pJlJKB'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:01.470Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!TCT1WkVji8C7yqSvNLcH:beeper.loc'/*+2 bytes*/, '$medlreiTR5wkjIxd_xRk6Vok7pJlJKB'/*+25 bytes*/, '@telegram_6568337635:beeper.loca'/*+1 bytes*/, 1747428378988.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6550.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:46:01.472Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!TCT1WkVji8C7yqSvNLcH:beeper.loc'/*+2 bytes*/ AND m.eventID = '$wKA4TnIlCeJG7OVVKinDR2WVxIT_pMf'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:01.473Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!TCT1WkVji8C7yqSvNLcH:beeper.loc'/*+2 bytes*/, '$wKA4TnIlCeJG7OVVKinDR2WVxIT_pMf'/*+25 bytes*/, '@telegram_5668124096:beeper.loca'/*+1 bytes*/, 1747428378991.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6551.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:46:01.475Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!TCT1WkVji8C7yqSvNLcH:beeper.loc'/*+2 bytes*/ AND m.eventID = '$1FOIOEzR_1BIYUS4UWg1zO_-eNDz1yY'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:01.475Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!TCT1WkVji8C7yqSvNLcH:beeper.loc'/*+2 bytes*/, '$1FOIOEzR_1BIYUS4UWg1zO_-eNDz1yY'/*+25 bytes*/, '@telegram_7595433849:beeper.loca'/*+1 bytes*/, 1747428378995.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6552.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:46:01.479Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!TCT1WkVji8C7yqSvNLcH:beeper.loc'/*+2 bytes*/ AND m.eventID = '$IGkhSyNi1ylezFZv_mTTw6VQdOm6Is6'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:01.480Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!TCT1WkVji8C7yqSvNLcH:beeper.loc'/*+2 bytes*/, '$IGkhSyNi1ylezFZv_mTTw6VQdOm6Is6'/*+25 bytes*/, '@telegram_7714008070:beeper.loca'/*+1 bytes*/, 1747428378998.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6553.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:46:01.488Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!TCT1WkVji8C7yqSvNLcH:beeper.loc'/*+2 bytes*/ AND m.eventID = '$qU1-WxV_VoYAW55Rg0QyLe1DnxNT1p3'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:01.489Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!TCT1WkVji8C7yqSvNLcH:beeper.loc'/*+2 bytes*/, '$qU1-WxV_VoYAW55Rg0QyLe1DnxNT1p3'/*+25 bytes*/, '@telegram_823449584:beeper.local', 1747428379001.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6554.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+494 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:46:01.491Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!TCT1WkVji8C7yqSvNLcH:beeper.loc'/*+2 bytes*/ AND m.eventID = '$0GrusDzwZR9bhJh1Ecj5I6yt3mYq3dg'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:01.494Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (268.0, '!TCT1WkVji8C7yqSvNLcH:beeper.loc'/*+2 bytes*/, '$0GrusDzwZR9bhJh1Ecj5I6yt3mYq3dg'/*+25 bytes*/, '@telegram_channel-2222101251:bee'/*+9 bytes*/, 1747427902954.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"268","text":"m.room.membe'/*+506 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:46:01.500Z] INSERT OR REPLACE INTO threads VALUES ('!TCT1WkVji8C7yqSvNLcH:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{"m.favourite":'/*+13980 bytes*/, 1747426573000.0)
[debug] [2025-05-16T20:46:01.501Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!TCT1WkVji8C7yqSvNLcH:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:46:01.502Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!TCT1WkVji8C7yqSvNLcH:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:46:11.607Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:46:11.625Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 2549.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:46:11.710Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 2529.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:46:11.756Z] SELECT * FROM breadcrumbs WHERE id = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:46:11.758Z] INSERT OR REPLACE INTO breadcrumbs (id, sentCount, sentLast, openCount, lastOpenTime) VALUES ('!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/, 0.0, 0.0, 1.0, 1747428371756.0)
[debug] [2025-05-16T20:46:11.769Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 2509.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:46:11.844Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 2489.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:46:12.138Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND (m.id = '$9GQHjalqWGJ7aKeNOufwEttaCKgtpmx'/*+26 bytes*/ OR m.eventID = '$9GQHjalqWGJ7aKeNOufwEttaCKgtpmx'/*+26 bytes*/ OR m.lastEditionID = '$9GQHjalqWGJ7aKeNOufwEttaCKgtpmx'/*+26 bytes*/)
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:46:12.139Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND (m.id = '$yBDJmne_SCNcXvUSL7hTZvi4LrD3kuI'/*+26 bytes*/ OR m.eventID = '$yBDJmne_SCNcXvUSL7hTZvi4LrD3kuI'/*+26 bytes*/ OR m.lastEditionID = '$yBDJmne_SCNcXvUSL7hTZvi4LrD3kuI'/*+26 bytes*/)
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:46:12.892Z] SELECT * FROM mx_room_messages WHERE roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND id = '2195'
[debug] [2025-05-16T20:46:13.203Z] SELECT * FROM mx_room_messages WHERE roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND id = '2201'
[debug] [2025-05-16T20:46:13.287Z] SELECT * FROM mx_room_messages WHERE roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND id = '2215'
[debug] [2025-05-16T20:46:13.457Z] SELECT accountID, thread FROM threads WHERE threadID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:46:13.463Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:46:13.470Z] 
    INSERT OR REPLACE INTO mx_read_receipts (userID, timestamp, roomID, relatesToID, hsOrder, hsSuborder, hsOrderString, lastVisibleEventID)
    VALUES ('@timii:beeper.com', 1747428391757.0, '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/, '$7MvXo8gahxHgRqGSJ-OV8Y09AFY15Ms'/*+26 bytes*/, 2524.0, NULL, NULL, (
      SELECT eventID
      FROM mx_room_messages
      WHERE
        roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND
        type != 'HIDDEN' AND
        type != 'REACTION' AND
        (hsOrder <= 2524.0 OR senderContactID = '@timii:beeper.com')
      ORDER BY hsOrder DESC LIMIT 1
    ) )
    RETURNING *
  
[debug] [2025-05-16T20:46:13.476Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND m.eventID = '$UJHxcygPqF8EBgoEgH2Z1LL0oTBN8i6'/*+26 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:13.477Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND m.eventID = '$7MvXo8gahxHgRqGSJ-OV8Y09AFY15Ms'/*+26 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:13.490Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:46:13.491Z] 
      SELECT
          COUNT(DISTINCT mx_room_messages.id) AS unreadCount,
          SUM(CASE WHEN mention.value = '@room' OR mention.value = '@timii:beeper.com' THEN 1 ELSE 0 END) AS unreadMentionsCount
      FROM mx_room_messages
      LEFT JOIN json_each(mx_room_messages.message, '$.mentions') AS mention
      WHERE
          mx_room_messages.roomId = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND
          mx_room_messages.isSentByMe = 0 AND
          mx_room_messages.isDeleted = 0 AND
          mx_room_messages.countsAsUnread = 1 AND
          mx_room_messages.hsOrder > 2524.0
    
[debug] [2025-05-16T20:46:13.501Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:46:13.512Z] INSERT OR REPLACE INTO threads VALUES ('!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/, 'instagramgo', '{"extra":{"tags":{},"bridge":{"b'/*+3298 bytes*/, 1747412383041.0)
[debug] [2025-05-16T20:46:13.515Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:46:13.515Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:46:13.600Z] SELECT * FROM mx_room_messages WHERE roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND id = '2229'
[debug] [2025-05-16T20:46:13.934Z] SELECT * FROM mx_room_messages WHERE roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND id = '2249'
[debug] [2025-05-16T20:46:13.992Z] SELECT * FROM mx_room_messages WHERE roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND id = '2256'
[debug] [2025-05-16T20:46:14.224Z] SELECT * FROM mx_room_messages WHERE roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND id = '2275'
[debug] [2025-05-16T20:46:14.250Z] SELECT accountID, thread FROM threads WHERE threadID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:46:14.253Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:46:14.255Z] 
    INSERT OR REPLACE INTO mx_read_receipts (userID, timestamp, roomID, relatesToID, hsOrder, hsSuborder, hsOrderString, lastVisibleEventID)
    VALUES ('@timii:beeper.com', 1747428392276.0, '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/, '$Z_D4ESowYousf6HczLm3xCBooE8J7Fb'/*+26 bytes*/, 2529.0, NULL, NULL, (
      SELECT eventID
      FROM mx_room_messages
      WHERE
        roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND
        type != 'HIDDEN' AND
        type != 'REACTION' AND
        (hsOrder <= 2529.0 OR senderContactID = '@timii:beeper.com')
      ORDER BY hsOrder DESC LIMIT 1
    ) )
    RETURNING *
  
[debug] [2025-05-16T20:46:14.257Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND m.eventID = '$7MvXo8gahxHgRqGSJ-OV8Y09AFY15Ms'/*+26 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:14.257Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND m.eventID = '$Z_D4ESowYousf6HczLm3xCBooE8J7Fb'/*+26 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:14.260Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:46:14.260Z] 
      SELECT
          COUNT(DISTINCT mx_room_messages.id) AS unreadCount,
          SUM(CASE WHEN mention.value = '@room' OR mention.value = '@timii:beeper.com' THEN 1 ELSE 0 END) AS unreadMentionsCount
      FROM mx_room_messages
      LEFT JOIN json_each(mx_room_messages.message, '$.mentions') AS mention
      WHERE
          mx_room_messages.roomId = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND
          mx_room_messages.isSentByMe = 0 AND
          mx_room_messages.isDeleted = 0 AND
          mx_room_messages.countsAsUnread = 1 AND
          mx_room_messages.hsOrder > 2529.0
    
[debug] [2025-05-16T20:46:14.261Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:46:14.264Z] INSERT OR REPLACE INTO threads VALUES ('!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/, 'instagramgo', '{"extra":{"tags":{},"bridge":{"b'/*+3336 bytes*/, 1747412383041.0)
[debug] [2025-05-16T20:46:14.265Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:46:14.266Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:46:14.550Z] SELECT * FROM mx_room_messages WHERE roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND id = '2288'
[debug] [2025-05-16T20:46:14.870Z] SELECT * FROM mx_room_messages WHERE roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND id = '2303'
[debug] [2025-05-16T20:46:15.110Z] SELECT accountID, thread FROM threads WHERE threadID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:46:15.118Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:46:15.122Z] 
    INSERT OR REPLACE INTO mx_read_receipts (userID, timestamp, roomID, relatesToID, hsOrder, hsSuborder, hsOrderString, lastVisibleEventID)
    VALUES ('@timii:beeper.com', 1747428393131.0, '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/, '$csXrJ6eP2KKlvliJo_McMT4dRAaJ58j'/*+26 bytes*/, 2538.0, NULL, NULL, (
      SELECT eventID
      FROM mx_room_messages
      WHERE
        roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND
        type != 'HIDDEN' AND
        type != 'REACTION' AND
        (hsOrder <= 2538.0 OR senderContactID = '@timii:beeper.com')
      ORDER BY hsOrder DESC LIMIT 1
    ) )
    RETURNING *
  
[debug] [2025-05-16T20:46:15.124Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND m.eventID = '$Z_D4ESowYousf6HczLm3xCBooE8J7Fb'/*+26 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:15.124Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND m.eventID = '$csXrJ6eP2KKlvliJo_McMT4dRAaJ58j'/*+26 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:15.137Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:46:15.137Z] 
      SELECT
          COUNT(DISTINCT mx_room_messages.id) AS unreadCount,
          SUM(CASE WHEN mention.value = '@room' OR mention.value = '@timii:beeper.com' THEN 1 ELSE 0 END) AS unreadMentionsCount
      FROM mx_room_messages
      LEFT JOIN json_each(mx_room_messages.message, '$.mentions') AS mention
      WHERE
          mx_room_messages.roomId = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND
          mx_room_messages.isSentByMe = 0 AND
          mx_room_messages.isDeleted = 0 AND
          mx_room_messages.countsAsUnread = 1 AND
          mx_room_messages.hsOrder > 2538.0
    
[debug] [2025-05-16T20:46:15.138Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:46:15.144Z] INSERT OR REPLACE INTO threads VALUES ('!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/, 'instagramgo', '{"extra":{"tags":{},"bridge":{"b'/*+3336 bytes*/, 1747412383041.0)
[debug] [2025-05-16T20:46:15.148Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:46:15.152Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:46:15.229Z] SELECT * FROM mx_room_messages WHERE roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND id = '2308'
[debug] [2025-05-16T20:46:15.359Z] SELECT * FROM mx_room_messages WHERE roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND id = '2312'
[debug] [2025-05-16T20:46:15.696Z] SELECT accountID, thread FROM threads WHERE threadID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:46:15.702Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:46:15.707Z] 
    INSERT OR REPLACE INTO mx_read_receipts (userID, timestamp, roomID, relatesToID, hsOrder, hsSuborder, hsOrderString, lastVisibleEventID)
    VALUES ('@timii:beeper.com', 1747428393891.0, '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/, '$ZPMwsII5hWJSlmn9BVC5ZxnWHS3LHYv'/*+26 bytes*/, 2543.0, NULL, NULL, (
      SELECT eventID
      FROM mx_room_messages
      WHERE
        roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND
        type != 'HIDDEN' AND
        type != 'REACTION' AND
        (hsOrder <= 2543.0 OR senderContactID = '@timii:beeper.com')
      ORDER BY hsOrder DESC LIMIT 1
    ) )
    RETURNING *
  
[debug] [2025-05-16T20:46:15.709Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND m.eventID = '$csXrJ6eP2KKlvliJo_McMT4dRAaJ58j'/*+26 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:15.710Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND m.eventID = '$ZPMwsII5hWJSlmn9BVC5ZxnWHS3LHYv'/*+26 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:15.715Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:46:15.715Z] 
      SELECT
          COUNT(DISTINCT mx_room_messages.id) AS unreadCount,
          SUM(CASE WHEN mention.value = '@room' OR mention.value = '@timii:beeper.com' THEN 1 ELSE 0 END) AS unreadMentionsCount
      FROM mx_room_messages
      LEFT JOIN json_each(mx_room_messages.message, '$.mentions') AS mention
      WHERE
          mx_room_messages.roomId = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND
          mx_room_messages.isSentByMe = 0 AND
          mx_room_messages.isDeleted = 0 AND
          mx_room_messages.countsAsUnread = 1 AND
          mx_room_messages.hsOrder > 2543.0
    
[debug] [2025-05-16T20:46:15.718Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:46:15.722Z] INSERT OR REPLACE INTO threads VALUES ('!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/, 'instagramgo', '{"extra":{"tags":{},"bridge":{"b'/*+3335 bytes*/, 1747412383041.0)
[debug] [2025-05-16T20:46:15.723Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:46:15.724Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:46:16.753Z] SELECT * FROM mx_room_messages WHERE roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND id = '2323'
[debug] [2025-05-16T20:46:16.971Z] SELECT accountID, thread FROM threads WHERE threadID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:46:16.978Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:46:16.980Z] 
    INSERT OR REPLACE INTO mx_read_receipts (userID, timestamp, roomID, relatesToID, hsOrder, hsSuborder, hsOrderString, lastVisibleEventID)
    VALUES ('@timii:beeper.com', 1747428395276.0, '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/, '$4GZkLivSDFKcIOgR8dXp_-j80OF0DaV'/*+26 bytes*/, 2546.0, NULL, NULL, (
      SELECT eventID
      FROM mx_room_messages
      WHERE
        roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND
        type != 'HIDDEN' AND
        type != 'REACTION' AND
        (hsOrder <= 2546.0 OR senderContactID = '@timii:beeper.com')
      ORDER BY hsOrder DESC LIMIT 1
    ) )
    RETURNING *
  
[debug] [2025-05-16T20:46:16.983Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND m.eventID = '$ZPMwsII5hWJSlmn9BVC5ZxnWHS3LHYv'/*+26 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:16.983Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND m.eventID = '$4GZkLivSDFKcIOgR8dXp_-j80OF0DaV'/*+26 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:16.990Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:46:16.993Z] 
      SELECT
          COUNT(DISTINCT mx_room_messages.id) AS unreadCount,
          SUM(CASE WHEN mention.value = '@room' OR mention.value = '@timii:beeper.com' THEN 1 ELSE 0 END) AS unreadMentionsCount
      FROM mx_room_messages
      LEFT JOIN json_each(mx_room_messages.message, '$.mentions') AS mention
      WHERE
          mx_room_messages.roomId = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND
          mx_room_messages.isSentByMe = 0 AND
          mx_room_messages.isDeleted = 0 AND
          mx_room_messages.countsAsUnread = 1 AND
          mx_room_messages.hsOrder > 2546.0
    
[debug] [2025-05-16T20:46:16.993Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:46:16.997Z] INSERT OR REPLACE INTO threads VALUES ('!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/, 'instagramgo', '{"extra":{"tags":{},"bridge":{"b'/*+3335 bytes*/, 1747412383041.0)
[debug] [2025-05-16T20:46:16.999Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:46:17.003Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:46:17.166Z] SELECT * FROM mx_room_messages WHERE roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND id = '2328'
[debug] [2025-05-16T20:46:17.674Z] SELECT accountID, thread FROM threads WHERE threadID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:46:17.682Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:46:17.683Z] 
    INSERT OR REPLACE INTO mx_read_receipts (userID, timestamp, roomID, relatesToID, hsOrder, hsSuborder, hsOrderString, lastVisibleEventID)
    VALUES ('@timii:beeper.com', 1747428395976.0, '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/, '$bFlNPe1nmkxxYwO1BPz7SQ6VG_4utpv'/*+26 bytes*/, 2549.0, NULL, NULL, (
      SELECT eventID
      FROM mx_room_messages
      WHERE
        roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND
        type != 'HIDDEN' AND
        type != 'REACTION' AND
        (hsOrder <= 2549.0 OR senderContactID = '@timii:beeper.com')
      ORDER BY hsOrder DESC LIMIT 1
    ) )
    RETURNING *
  
[debug] [2025-05-16T20:46:17.684Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND m.eventID = '$4GZkLivSDFKcIOgR8dXp_-j80OF0DaV'/*+26 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:17.684Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND m.eventID = '$bFlNPe1nmkxxYwO1BPz7SQ6VG_4utpv'/*+26 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:17.690Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:46:17.694Z] 
      SELECT
          COUNT(DISTINCT mx_room_messages.id) AS unreadCount,
          SUM(CASE WHEN mention.value = '@room' OR mention.value = '@timii:beeper.com' THEN 1 ELSE 0 END) AS unreadMentionsCount
      FROM mx_room_messages
      LEFT JOIN json_each(mx_room_messages.message, '$.mentions') AS mention
      WHERE
          mx_room_messages.roomId = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ AND
          mx_room_messages.isSentByMe = 0 AND
          mx_room_messages.isDeleted = 0 AND
          mx_room_messages.countsAsUnread = 1 AND
          mx_room_messages.hsOrder > 2549.0
    
[debug] [2025-05-16T20:46:17.695Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:46:17.699Z] INSERT OR REPLACE INTO threads VALUES ('!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/, 'instagramgo', '{"extra":{"tags":{},"bridge":{"b'/*+3338 bytes*/, 1747412383041.0)
[debug] [2025-05-16T20:46:17.704Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:46:17.706Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:46:32.312Z] SELECT * FROM breadcrumbs WHERE id = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:46:32.316Z] INSERT OR REPLACE INTO breadcrumbs (id, sentCount, sentLast, openCount, lastOpenTime) VALUES ('!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/, 0.0, 0.0, 2.0, 1747428392313.0)
[debug] [2025-05-16T20:46:33.035Z] SELECT * FROM breadcrumbs WHERE id = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:46:33.040Z] INSERT OR REPLACE INTO breadcrumbs (id, sentCount, sentLast, openCount, lastOpenTime) VALUES ('!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/, 0.0, 0.0, 3.0, 1747428393039.0)
[debug] [2025-05-16T20:46:42.537Z] SELECT accountID, thread FROM threads WHERE threadID = '!dFbKi6jWlETHNnU5vqlk:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:46:42.541Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!dFbKi6jWlETHNnU5vqlk:beeper.loc'/*+2 bytes*/ AND m.eventID = '$EgN-FNwKeZRNULIUmJwXPlZDzhdBWC5'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:42.542Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!dFbKi6jWlETHNnU5vqlk:beeper.loc'/*+2 bytes*/, '$EgN-FNwKeZRNULIUmJwXPlZDzhdBWC5'/*+25 bytes*/, '@telegram_5775521289:beeper.loca'/*+1 bytes*/, 1747428400215.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6555.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:46:42.547Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!dFbKi6jWlETHNnU5vqlk:beeper.loc'/*+2 bytes*/ AND m.eventID = '$5cThosvQ-vR2oZFMFT-eyqdKErcPjaP'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:42.548Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!dFbKi6jWlETHNnU5vqlk:beeper.loc'/*+2 bytes*/, '$5cThosvQ-vR2oZFMFT-eyqdKErcPjaP'/*+25 bytes*/, '@telegram_7714008070:beeper.loca'/*+1 bytes*/, 1747428400219.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6556.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:46:42.552Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!dFbKi6jWlETHNnU5vqlk:beeper.loc'/*+2 bytes*/ AND m.eventID = '$PD2gL8DtQNL1Rvw93Q6m88V-ZwQEu5Y'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:42.553Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!dFbKi6jWlETHNnU5vqlk:beeper.loc'/*+2 bytes*/, '$PD2gL8DtQNL1Rvw93Q6m88V-ZwQEu5Y'/*+25 bytes*/, '@telegram_609517172:beeper.local', 1747428400223.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6557.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+494 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:46:42.557Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!dFbKi6jWlETHNnU5vqlk:beeper.loc'/*+2 bytes*/ AND m.eventID = '$qBYLmoZW54rBQrkyo6hpt5HwlpsSiUQ'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:42.558Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!dFbKi6jWlETHNnU5vqlk:beeper.loc'/*+2 bytes*/, '$qBYLmoZW54rBQrkyo6hpt5HwlpsSiUQ'/*+25 bytes*/, '@telegram_793977288:beeper.local', 1747428400226.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6558.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+494 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:46:42.562Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!dFbKi6jWlETHNnU5vqlk:beeper.loc'/*+2 bytes*/ AND m.eventID = '$f16XWyHP7T3D5EtH7v4dtYadGSzQfdW'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:42.562Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!dFbKi6jWlETHNnU5vqlk:beeper.loc'/*+2 bytes*/, '$f16XWyHP7T3D5EtH7v4dtYadGSzQfdW'/*+25 bytes*/, '@telegram_6114614513:beeper.loca'/*+1 bytes*/, 1747428400229.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6559.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:46:42.589Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!dFbKi6jWlETHNnU5vqlk:beeper.loc'/*+2 bytes*/ AND m.eventID = '$k8VmDiAcRtNR5NG62lC9zAf0cjwNPnB'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:42.596Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!dFbKi6jWlETHNnU5vqlk:beeper.loc'/*+2 bytes*/, '$k8VmDiAcRtNR5NG62lC9zAf0cjwNPnB'/*+25 bytes*/, '@telegram_6946471683:beeper.loca'/*+1 bytes*/, 1747428400233.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6560.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:46:42.606Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!dFbKi6jWlETHNnU5vqlk:beeper.loc'/*+2 bytes*/ AND m.eventID = '$VuIppJMXeF444YlnDO-AKEu2WA7o6Vn'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:42.610Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!dFbKi6jWlETHNnU5vqlk:beeper.loc'/*+2 bytes*/, '$VuIppJMXeF444YlnDO-AKEu2WA7o6Vn'/*+25 bytes*/, '@telegram_6487692932:beeper.loca'/*+1 bytes*/, 1747428400236.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6561.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:46:42.620Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!dFbKi6jWlETHNnU5vqlk:beeper.loc'/*+2 bytes*/ AND m.eventID = '$pss410wv4_bdcBA9dbWvpB0ORvuHqj9'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:42.624Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!dFbKi6jWlETHNnU5vqlk:beeper.loc'/*+2 bytes*/, '$pss410wv4_bdcBA9dbWvpB0ORvuHqj9'/*+25 bytes*/, '@telegram_6431080972:beeper.loca'/*+1 bytes*/, 1747428400239.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6562.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:46:42.628Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!dFbKi6jWlETHNnU5vqlk:beeper.loc'/*+2 bytes*/ AND m.eventID = '$qo82uTAsQ0izMifTL1DTAmaXznD8Eku'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:42.633Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!dFbKi6jWlETHNnU5vqlk:beeper.loc'/*+2 bytes*/, '$qo82uTAsQ0izMifTL1DTAmaXznD8Eku'/*+25 bytes*/, '@telegram_7786015400:beeper.loca'/*+1 bytes*/, 1747428400242.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6563.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:46:42.639Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!dFbKi6jWlETHNnU5vqlk:beeper.loc'/*+2 bytes*/ AND m.eventID = '$puoME2RlshPEPZmMnZsnDm0ebqjF7rW'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:42.641Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!dFbKi6jWlETHNnU5vqlk:beeper.loc'/*+2 bytes*/, '$puoME2RlshPEPZmMnZsnDm0ebqjF7rW'/*+25 bytes*/, '@telegram_889839684:beeper.local', 1747428400246.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6564.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+494 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:46:42.648Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!dFbKi6jWlETHNnU5vqlk:beeper.loc'/*+2 bytes*/ AND m.eventID = '$SuXw1qpSHXNQdU0Z2r94PQZY37Ye4lD'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:46:42.653Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (284.0, '!dFbKi6jWlETHNnU5vqlk:beeper.loc'/*+2 bytes*/, '$SuXw1qpSHXNQdU0Z2r94PQZY37Ye4lD'/*+25 bytes*/, '@telegram_channel-2593466792:bee'/*+9 bytes*/, 1747427903018.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"284","text":"m.room.membe'/*+506 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:46:42.661Z] INSERT OR REPLACE INTO threads VALUES ('!dFbKi6jWlETHNnU5vqlk:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{"m.favourite":'/*+8860 bytes*/, 1747425709000.0)
[debug] [2025-05-16T20:46:42.664Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!dFbKi6jWlETHNnU5vqlk:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:46:42.669Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!dFbKi6jWlETHNnU5vqlk:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:46:51.342Z] SELECT * FROM breadcrumbs WHERE id = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:46:51.345Z] INSERT OR REPLACE INTO breadcrumbs (id, sentCount, sentLast, openCount, lastOpenTime) VALUES ('!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/, 0.0, 0.0, 4.0, 1747428411344.0)
[debug] [2025-05-16T20:46:52.446Z] SELECT * FROM breadcrumbs WHERE id = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:46:52.452Z] INSERT OR REPLACE INTO breadcrumbs (id, sentCount, sentLast, openCount, lastOpenTime) VALUES ('!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/, 0.0, 0.0, 5.0, 1747428412450.0)
[debug] [2025-05-16T20:47:04.383Z] SELECT accountID, thread FROM threads WHERE threadID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:47:04.395Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$IzFdVm3e_E_NxpZnIywzQ3WinfT9Y2n'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:47:04.397Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$IzFdVm3e_E_NxpZnIywzQ3WinfT9Y2n'/*+25 bytes*/, '@telegram_7410298411:beeper.loca'/*+1 bytes*/, 1747428422399.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6565.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:47:04.413Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$-lxFEdrDMltA3XGQk6Yyr_KuueSZim_'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:47:04.417Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (95.0, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$-lxFEdrDMltA3XGQk6Yyr_KuueSZim_'/*+25 bytes*/, '@telegram_channel-1161123794:bee'/*+9 bytes*/, 1747427903078.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"95","text":"m.room.member'/*+505 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:47:04.419Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$2XZOHaK0c2r-9vLaCy2K3ZVMTtHgKpP'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:47:04.426Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (6389.0, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$2XZOHaK0c2r-9vLaCy2K3ZVMTtHgKpP'/*+25 bytes*/, '@telegram_6825918760:beeper.loca'/*+1 bytes*/, 1747428375147.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"6389","text":"m.room.memb'/*+499 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:47:04.434Z] INSERT OR REPLACE INTO threads VALUES ('!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{},"bridge":{"b'/*+8107 bytes*/, 1747428368000.0)
[debug] [2025-05-16T20:47:04.435Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:47:04.436Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:47:14.287Z] SELECT * FROM breadcrumbs WHERE id = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:47:14.292Z] INSERT OR REPLACE INTO breadcrumbs (id, sentCount, sentLast, openCount, lastOpenTime) VALUES ('!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/, 0.0, 0.0, 6.0, 1747428434291.0)
[debug] [2025-05-16T20:47:17.896Z] SELECT * FROM breadcrumbs WHERE id = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:47:17.901Z] INSERT OR REPLACE INTO breadcrumbs (id, sentCount, sentLast, openCount, lastOpenTime) VALUES ('!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/, 0.0, 0.0, 7.0, 1747428437900.0)
[debug] [2025-05-16T20:47:29.148Z] SELECT accountID, thread FROM threads WHERE threadID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:47:29.149Z] SELECT accountID, thread FROM threads WHERE threadID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:47:29.152Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/ AND m.eventID = '$j2Y8zriyoXIeCzS9IErgWWhsO9e3WwN'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:47:29.154Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND m.eventID = '$qNThI8x0OZqDjKU9JVIWMRaZ1kcn0zQ'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:47:29.154Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/, '$j2Y8zriyoXIeCzS9IErgWWhsO9e3WwN'/*+25 bytes*/, '@telegrambot:beeper.local', 1747428467188.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6569.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+490 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:47:29.157Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, '$qNThI8x0OZqDjKU9JVIWMRaZ1kcn0zQ'/*+25 bytes*/, '@telegram_7783714628:beeper.loca'/*+1 bytes*/, 1747428447366.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6566.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:47:29.159Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/ AND m.eventID = '$ObDCSq7Bs8rxndQr_3LKD7KaB_Cap7i'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:47:29.160Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND m.eventID = '$ZlOK-D34_E2VC4rMnLrPDpazm9u4rl6'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:47:29.210Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (98.0, '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/, '$ObDCSq7Bs8rxndQr_3LKD7KaB_Cap7i'/*+25 bytes*/, '@telegram_channel-1624786248:bee'/*+9 bytes*/, 1747427902893.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"98","text":"m.room.member'/*+505 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:47:29.213Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, '$ZlOK-D34_E2VC4rMnLrPDpazm9u4rl6'/*+25 bytes*/, '@telegram_2089086774:beeper.loca'/*+1 bytes*/, 1747428447371.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6567.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:47:29.216Z] 
SELECT COUNT(*) as count
FROM mx_room_messages
WHERE roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/ AND type != 'HIDDEN' AND type != 'REACTION'
  
[debug] [2025-05-16T20:47:29.218Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND m.eventID = '$TR-fyP_DN1E3C6A-hTqDUBff31qATIX'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:47:29.220Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/, '$j2Y8zriyoXIeCzS9IErgWWhsO9e3WwN'/*+25 bytes*/, '@telegrambot:beeper.local', 1747428467188.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'MEMBERSHIP', 6569.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"senderID":"@telegrambot'/*+834 bytes*/, NULL) RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:47:29.221Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, '$TR-fyP_DN1E3C6A-hTqDUBff31qATIX'/*+25 bytes*/, '@telegram_6830463907:beeper.loca'/*+1 bytes*/, 1747428447376.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6568.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:47:29.229Z] INSERT OR REPLACE INTO threads VALUES ('!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{},"bridge":{"b'/*+14633 bytes*/, 1747427431000.0)
[debug] [2025-05-16T20:47:29.231Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND m.eventID = '$fRvsK6qq1ykSXBGz_Og1fNm6f-w6kN3'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:47:29.232Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:47:29.232Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (267.0, '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, '$fRvsK6qq1ykSXBGz_Og1fNm6f-w6kN3'/*+25 bytes*/, '@telegram_channel-2034414192:bee'/*+9 bytes*/, 1747427903143.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"267","text":"m.room.membe'/*+506 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:47:29.233Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:47:29.236Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND m.eventID = '$vLZFlPXhcZYhcGE_RZe9slieXjvJcOL'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:47:29.237Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (757.0, '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, '$vLZFlPXhcZYhcGE_RZe9slieXjvJcOL'/*+25 bytes*/, '@telegram_7595433849:beeper.loca'/*+1 bytes*/, 1747427922833.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"757","text":"m.room.membe'/*+498 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:47:29.239Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND m.eventID = '$r2nqSNQJ1S2T520ttMJN-PdlojDYse3'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:47:29.242Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (2852.0, '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, '$r2nqSNQJ1S2T520ttMJN-PdlojDYse3'/*+25 bytes*/, '@telegram_6182866805:beeper.loca'/*+1 bytes*/, 1747428043855.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"2852","text":"m.room.memb'/*+499 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:47:29.245Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND m.eventID = '$DbqpoHFLOK3kYstxXem0SEV4QrUZ0ji'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:47:29.247Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (2859.0, '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, '$DbqpoHFLOK3kYstxXem0SEV4QrUZ0ji'/*+25 bytes*/, '@telegram_7140010318:beeper.loca'/*+1 bytes*/, 1747428069479.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"2859","text":"m.room.memb'/*+499 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:47:29.249Z] INSERT OR REPLACE INTO threads VALUES ('!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{},"bridge":{"b'/*+8903 bytes*/, 1747428234000.0)
[debug] [2025-05-16T20:47:29.250Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:47:29.250Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:47:30.057Z] SELECT accountID, thread FROM threads WHERE threadID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:47:30.059Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/ AND m.eventID = '$AUBb3UN_DMUNC06_51vxMRJ66Fon1_g'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:47:30.060Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/, '$AUBb3UN_DMUNC06_51vxMRJ66Fon1_g'/*+25 bytes*/, '@telegram_1401255074:beeper.loca'/*+1 bytes*/, 1747428467199.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6570.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+497 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:47:30.062Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/ AND m.eventID = '$ObDCSq7Bs8rxndQr_3LKD7KaB_Cap7i'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:47:30.063Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (98.0, '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/, '$ObDCSq7Bs8rxndQr_3LKD7KaB_Cap7i'/*+25 bytes*/, '@telegram_channel-1624786248:bee'/*+9 bytes*/, 1747427902893.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"98","text":"m.room.member'/*+505 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:47:30.064Z] 
SELECT COUNT(*) as count
FROM mx_room_messages
WHERE roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/ AND type != 'HIDDEN' AND type != 'REACTION'
  
[debug] [2025-05-16T20:47:30.066Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/, '$AUBb3UN_DMUNC06_51vxMRJ66Fon1_g'/*+25 bytes*/, '@telegram_1401255074:beeper.loca'/*+1 bytes*/, 1747428467199.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'MEMBERSHIP', 6570.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"senderID":"@telegram_14'/*+848 bytes*/, NULL) RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:47:30.068Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/ AND m.eventID = '$4blUR5cxJ6igYB9oqo4cOqSGewdoPkQ'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:47:30.069Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'mautrix-go_1747428467207988011_1'
LIMIT 1
    
[debug] [2025-05-16T20:47:30.069Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/, '$4blUR5cxJ6igYB9oqo4cOqSGewdoPkQ'/*+25 bytes*/, '@telegram_1401255074:beeper.loca'/*+1 bytes*/, 1747428466000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6571.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!97RAWGW8Y4g'/*+559 bytes*/, 'mautrix-go_1747428467207988011_1') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:47:30.072Z] SELECT * FROM mx_read_receipts WHERE userID = '@telegram_1401255074:beeper.loca'/*+1 bytes*/ AND roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:47:30.072Z] 
    INSERT OR REPLACE INTO mx_read_receipts (userID, timestamp, roomID, relatesToID, hsOrder, hsSuborder, hsOrderString, lastVisibleEventID)
    VALUES ('@telegram_1401255074:beeper.loca'/*+1 bytes*/, 1747428467215.0, '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/, '$4blUR5cxJ6igYB9oqo4cOqSGewdoPkQ'/*+25 bytes*/, 6571.0, NULL, NULL, (
      SELECT eventID
      FROM mx_room_messages
      WHERE
        roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/ AND
        type != 'HIDDEN' AND
        type != 'REACTION' AND
        (hsOrder <= 6571.0 OR senderContactID = '@telegram_1401255074:beeper.loca'/*+1 bytes*/)
      ORDER BY hsOrder DESC LIMIT 1
    ) )
    RETURNING *
  
[debug] [2025-05-16T20:47:30.074Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/ AND m.eventID = '$4blUR5cxJ6igYB9oqo4cOqSGewdoPkQ'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:47:30.075Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:47:30.076Z] 
      SELECT
          COUNT(DISTINCT mx_room_messages.id) AS unreadCount,
          SUM(CASE WHEN mention.value = '@room' OR mention.value = '@timii:beeper.com' THEN 1 ELSE 0 END) AS unreadMentionsCount
      FROM mx_room_messages
      LEFT JOIN json_each(mx_room_messages.message, '$.mentions') AS mention
      WHERE
          mx_room_messages.roomId = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/ AND
          mx_room_messages.isSentByMe = 0 AND
          mx_room_messages.isDeleted = 0 AND
          mx_room_messages.countsAsUnread = 1 AND
          mx_room_messages.hsOrder > 173.0
    
[debug] [2025-05-16T20:47:30.084Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:47:30.091Z] INSERT OR REPLACE INTO threads VALUES ('!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{},"bridge":{"b'/*+14634 bytes*/, 1747427431000.0)
[debug] [2025-05-16T20:47:30.092Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:47:30.093Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:47:30.093Z] UPDATE threads SET thread = json_patch(thread, '{"lastReadMessageSortKey":173,"p'/*+841 bytes*/), timestamp = COALESCE(1747428466000.0, timestamp) WHERE threadID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:47:30.094Z] SELECT accountID, thread FROM threads WHERE threadID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:47:30.985Z] SELECT accountID, thread FROM threads WHERE threadID = '!PysmbCHXOEr4zuKBZPZ3:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:47:30.986Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!PysmbCHXOEr4zuKBZPZ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$rvgzzbqe9wQpbyCaDcoQ7OABf6NoIA2'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:47:30.988Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!PysmbCHXOEr4zuKBZPZ3:beeper.loc'/*+2 bytes*/, '$rvgzzbqe9wQpbyCaDcoQ7OABf6NoIA2'/*+25 bytes*/, '@telegram_7702348086:beeper.loca'/*+1 bytes*/, 1747428468665.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6572.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:47:30.992Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!PysmbCHXOEr4zuKBZPZ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$xGkh60dxFvomFmpYvwlY1f4kObXXTBI'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:47:30.993Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!PysmbCHXOEr4zuKBZPZ3:beeper.loc'/*+2 bytes*/, '$xGkh60dxFvomFmpYvwlY1f4kObXXTBI'/*+25 bytes*/, '@telegram_8020818526:beeper.loca'/*+1 bytes*/, 1747428468669.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6573.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:47:30.995Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!PysmbCHXOEr4zuKBZPZ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$9A1r13vtrWELJsKv7HmNg28E0luGYIr'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:47:30.997Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!PysmbCHXOEr4zuKBZPZ3:beeper.loc'/*+2 bytes*/, '$9A1r13vtrWELJsKv7HmNg28E0luGYIr'/*+25 bytes*/, '@telegram_7696586114:beeper.loca'/*+1 bytes*/, 1747428468672.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6574.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:47:31.001Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!PysmbCHXOEr4zuKBZPZ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$40IvNSTBFJwPT6X1DKVanDfpMV_ZqL9'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:47:31.003Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!PysmbCHXOEr4zuKBZPZ3:beeper.loc'/*+2 bytes*/, '$40IvNSTBFJwPT6X1DKVanDfpMV_ZqL9'/*+25 bytes*/, '@telegram_7947501502:beeper.loca'/*+1 bytes*/, 1747428468676.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6575.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:47:31.006Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!PysmbCHXOEr4zuKBZPZ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$PvX-QpVqI-Lvkmlnyyp_O5jQ4Qbt8pY'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:47:31.007Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!PysmbCHXOEr4zuKBZPZ3:beeper.loc'/*+2 bytes*/, '$PvX-QpVqI-Lvkmlnyyp_O5jQ4Qbt8pY'/*+25 bytes*/, '@telegram_6844199402:beeper.loca'/*+1 bytes*/, 1747428468679.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6576.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:47:31.008Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!PysmbCHXOEr4zuKBZPZ3:beeper.loc'/*+2 bytes*/ AND m.eventID = '$Q3uSiNouSKFs5VE1zOydeGa0BdpRWK7'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:47:31.009Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (96.0, '!PysmbCHXOEr4zuKBZPZ3:beeper.loc'/*+2 bytes*/, '$Q3uSiNouSKFs5VE1zOydeGa0BdpRWK7'/*+25 bytes*/, '@telegram_channel-2190724330:bee'/*+9 bytes*/, 1747427903255.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"96","text":"m.room.member'/*+505 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:47:31.011Z] INSERT OR REPLACE INTO threads VALUES ('!PysmbCHXOEr4zuKBZPZ3:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{},"bridge":{"b'/*+10501 bytes*/, 1747422442000.0)
[debug] [2025-05-16T20:47:31.012Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!PysmbCHXOEr4zuKBZPZ3:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:47:31.013Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!PysmbCHXOEr4zuKBZPZ3:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:48:32.730Z] SELECT accountID, thread FROM threads WHERE threadID = '!xhUQ3X40iNGckQNU9NIW:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:48:32.732Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!xhUQ3X40iNGckQNU9NIW:beeper.loc'/*+2 bytes*/ AND m.eventID = '$MTmRMq0CB5epVnmx9jKCaXeoCS4b8K7'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:48:32.732Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!xhUQ3X40iNGckQNU9NIW:beeper.loc'/*+2 bytes*/, '$MTmRMq0CB5epVnmx9jKCaXeoCS4b8K7'/*+25 bytes*/, '@telegram_1563587662:beeper.loca'/*+1 bytes*/, 1747428512367.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6577.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:48:32.734Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!xhUQ3X40iNGckQNU9NIW:beeper.loc'/*+2 bytes*/ AND m.eventID = '$LC5MOMwjTA3CCcxLw8E8te5OHuBcQ_G'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:48:32.735Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!xhUQ3X40iNGckQNU9NIW:beeper.loc'/*+2 bytes*/, '$LC5MOMwjTA3CCcxLw8E8te5OHuBcQ_G'/*+25 bytes*/, '@telegram_6336694489:beeper.loca'/*+1 bytes*/, 1747428512371.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6578.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:48:32.737Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!xhUQ3X40iNGckQNU9NIW:beeper.loc'/*+2 bytes*/ AND m.eventID = '$ElkZ_KdiByoOWDWzYXIc2WVMHte780k'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:48:32.737Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!xhUQ3X40iNGckQNU9NIW:beeper.loc'/*+2 bytes*/, '$ElkZ_KdiByoOWDWzYXIc2WVMHte780k'/*+25 bytes*/, '@telegram_7096447653:beeper.loca'/*+1 bytes*/, 1747428512375.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6579.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:48:32.739Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!xhUQ3X40iNGckQNU9NIW:beeper.loc'/*+2 bytes*/ AND m.eventID = '$N21JAV731CGfzaPZrzYoJXE51Q5BU-v'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:48:32.740Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!xhUQ3X40iNGckQNU9NIW:beeper.loc'/*+2 bytes*/, '$N21JAV731CGfzaPZrzYoJXE51Q5BU-v'/*+25 bytes*/, '@telegram_600812539:beeper.local', 1747428512378.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6580.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+494 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:48:32.742Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!xhUQ3X40iNGckQNU9NIW:beeper.loc'/*+2 bytes*/ AND m.eventID = '$jU5E04L0tSesCEgYgFAhGuds7K8Dew-'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:48:32.742Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!xhUQ3X40iNGckQNU9NIW:beeper.loc'/*+2 bytes*/, '$jU5E04L0tSesCEgYgFAhGuds7K8Dew-'/*+25 bytes*/, '@telegram_300860929:beeper.local', 1747428512381.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6581.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+494 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:48:32.744Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!xhUQ3X40iNGckQNU9NIW:beeper.loc'/*+2 bytes*/ AND m.eventID = '$b5zSxxrSKqTaVp6uVpp8ZduNfdAHLQJ'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:48:32.744Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!xhUQ3X40iNGckQNU9NIW:beeper.loc'/*+2 bytes*/, '$b5zSxxrSKqTaVp6uVpp8ZduNfdAHLQJ'/*+25 bytes*/, '@telegram_5779268386:beeper.loca'/*+1 bytes*/, 1747428512384.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6582.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:48:32.747Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!xhUQ3X40iNGckQNU9NIW:beeper.loc'/*+2 bytes*/ AND m.eventID = '$qhiAydNBLltjLeY8fw98fJog0oLLqCZ'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:48:32.748Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (94.0, '!xhUQ3X40iNGckQNU9NIW:beeper.loc'/*+2 bytes*/, '$qhiAydNBLltjLeY8fw98fJog0oLLqCZ'/*+25 bytes*/, '@telegram_channel-1989303490:bee'/*+9 bytes*/, 1747427902777.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"94","text":"m.room.member'/*+505 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:48:32.750Z] INSERT OR REPLACE INTO threads VALUES ('!xhUQ3X40iNGckQNU9NIW:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{},"bridge":{"b'/*+11419 bytes*/, 1747427610000.0)
[debug] [2025-05-16T20:48:32.751Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!xhUQ3X40iNGckQNU9NIW:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:48:32.752Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!xhUQ3X40iNGckQNU9NIW:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:49:14.813Z] SELECT accountID, thread FROM threads WHERE threadID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:49:14.816Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$I76t_PVTaA-XxjQ_4ag3A5jNsRKUZEK'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:49:14.817Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$I76t_PVTaA-XxjQ_4ag3A5jNsRKUZEK'/*+25 bytes*/, '@telegrambot:beeper.local', 1747428572953.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6583.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+490 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:49:14.820Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$-lxFEdrDMltA3XGQk6Yyr_KuueSZim_'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:49:14.822Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (95.0, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$-lxFEdrDMltA3XGQk6Yyr_KuueSZim_'/*+25 bytes*/, '@telegram_channel-1161123794:bee'/*+9 bytes*/, 1747427903078.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"95","text":"m.room.member'/*+505 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:49:14.824Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$2XZOHaK0c2r-9vLaCy2K3ZVMTtHgKpP'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:49:14.825Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (6389.0, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$2XZOHaK0c2r-9vLaCy2K3ZVMTtHgKpP'/*+25 bytes*/, '@telegram_6825918760:beeper.loca'/*+1 bytes*/, 1747428375147.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"6389","text":"m.room.memb'/*+499 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:49:14.827Z] 
SELECT COUNT(*) as count
FROM mx_room_messages
WHERE roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND type != 'HIDDEN' AND type != 'REACTION'
  
[debug] [2025-05-16T20:49:14.828Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$I76t_PVTaA-XxjQ_4ag3A5jNsRKUZEK'/*+25 bytes*/, '@telegrambot:beeper.local', 1747428572953.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'MEMBERSHIP', 6583.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"senderID":"@telegrambot'/*+1000 bytes*/, NULL) RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:49:14.833Z] INSERT OR REPLACE INTO threads VALUES ('!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{},"bridge":{"b'/*+8464 bytes*/, 1747428368000.0)
[debug] [2025-05-16T20:49:14.833Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:49:14.834Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:49:15.739Z] SELECT accountID, thread FROM threads WHERE threadID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:49:15.741Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$MrkX7lLbyTDrebWI_9NW74V48meYc6W'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:49:15.742Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$MrkX7lLbyTDrebWI_9NW74V48meYc6W'/*+25 bytes*/, '@telegram_channel-1585018554:bee'/*+9 bytes*/, 1747428572962.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6584.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+505 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:49:15.744Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$-lxFEdrDMltA3XGQk6Yyr_KuueSZim_'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:49:15.745Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (95.0, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$-lxFEdrDMltA3XGQk6Yyr_KuueSZim_'/*+25 bytes*/, '@telegram_channel-1161123794:bee'/*+9 bytes*/, 1747427903078.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"95","text":"m.room.member'/*+505 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:49:15.747Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$2XZOHaK0c2r-9vLaCy2K3ZVMTtHgKpP'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:49:15.748Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (6389.0, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$2XZOHaK0c2r-9vLaCy2K3ZVMTtHgKpP'/*+25 bytes*/, '@telegram_6825918760:beeper.loca'/*+1 bytes*/, 1747428375147.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"6389","text":"m.room.memb'/*+499 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:49:15.750Z] 
SELECT COUNT(*) as count
FROM mx_room_messages
WHERE roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND type != 'HIDDEN' AND type != 'REACTION'
  
[debug] [2025-05-16T20:49:15.751Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$MrkX7lLbyTDrebWI_9NW74V48meYc6W'/*+25 bytes*/, '@telegram_channel-1585018554:bee'/*+9 bytes*/, 1747428572962.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'MEMBERSHIP', 6584.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"senderID":"@telegram_ch'/*+1030 bytes*/, NULL) RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:49:15.753Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$H1uBDjk1W51otnphK2FdOz9n4TnB6gt'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:49:15.754Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'mautrix-go_1747428572973254136_1'
LIMIT 1
    
[debug] [2025-05-16T20:49:15.754Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$H1uBDjk1W51otnphK2FdOz9n4TnB6gt'/*+25 bytes*/, '@telegram_channel-1585018554:bee'/*+9 bytes*/, 1747428571000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'IMAGE', 6585.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!KyFDFn3rZOu'/*+926 bytes*/, 'mautrix-go_1747428572973254136_1') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:49:15.759Z] SELECT * FROM mx_read_receipts WHERE userID = '@telegram_channel-1585018554:bee'/*+9 bytes*/ AND roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:49:15.760Z] 
    INSERT OR REPLACE INTO mx_read_receipts (userID, timestamp, roomID, relatesToID, hsOrder, hsSuborder, hsOrderString, lastVisibleEventID)
    VALUES ('@telegram_channel-1585018554:bee'/*+9 bytes*/, 1747428572981.0, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$H1uBDjk1W51otnphK2FdOz9n4TnB6gt'/*+25 bytes*/, 6585.0, NULL, NULL, (
      SELECT eventID
      FROM mx_room_messages
      WHERE
        roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND
        type != 'HIDDEN' AND
        type != 'REACTION' AND
        (hsOrder <= 6585.0 OR senderContactID = '@telegram_channel-1585018554:bee'/*+9 bytes*/)
      ORDER BY hsOrder DESC LIMIT 1
    ) )
    RETURNING *
  
[debug] [2025-05-16T20:49:15.761Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$H1uBDjk1W51otnphK2FdOz9n4TnB6gt'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:49:15.762Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:49:15.763Z] 
      SELECT
          COUNT(DISTINCT mx_room_messages.id) AS unreadCount,
          SUM(CASE WHEN mention.value = '@room' OR mention.value = '@timii:beeper.com' THEN 1 ELSE 0 END) AS unreadMentionsCount
      FROM mx_room_messages
      LEFT JOIN json_each(mx_room_messages.message, '$.mentions') AS mention
      WHERE
          mx_room_messages.roomId = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND
          mx_room_messages.isSentByMe = 0 AND
          mx_room_messages.isDeleted = 0 AND
          mx_room_messages.countsAsUnread = 1 AND
          mx_room_messages.hsOrder > 221.0
    
[debug] [2025-05-16T20:49:15.764Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:49:15.766Z] INSERT OR REPLACE INTO threads VALUES ('!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{},"bridge":{"b'/*+8465 bytes*/, 1747428368000.0)
[debug] [2025-05-16T20:49:15.766Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:49:15.766Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:49:15.768Z] UPDATE threads SET thread = json_patch(thread, '{"lastReadMessageSortKey":221,"p'/*+1216 bytes*/), timestamp = COALESCE(1747428571000.0, timestamp) WHERE threadID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:49:15.768Z] SELECT accountID, thread FROM threads WHERE threadID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:49:55.957Z] SELECT accountID, thread FROM threads WHERE threadID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:49:55.975Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$rJye0U6XHmnpeKWKOu7OWH9SaLf16Z_'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:49:55.976Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'mautrix-go_1747428614256059319_2'
LIMIT 1
    
[debug] [2025-05-16T20:49:55.977Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$rJye0U6XHmnpeKWKOu7OWH9SaLf16Z_'/*+25 bytes*/, '@telegram_channel-1585018554:bee'/*+9 bytes*/, 1747428609000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6586.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!KyFDFn3rZOu'/*+1488 bytes*/, 'mautrix-go_1747428614256059319_2') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:49:55.983Z] SELECT * FROM mx_read_receipts WHERE userID = '@telegram_channel-1585018554:bee'/*+9 bytes*/ AND roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:49:55.984Z] 
    INSERT OR REPLACE INTO mx_read_receipts (userID, timestamp, roomID, relatesToID, hsOrder, hsSuborder, hsOrderString, lastVisibleEventID)
    VALUES ('@telegram_channel-1585018554:bee'/*+9 bytes*/, 1747428614263.0, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$rJye0U6XHmnpeKWKOu7OWH9SaLf16Z_'/*+25 bytes*/, 6586.0, NULL, NULL, (
      SELECT eventID
      FROM mx_room_messages
      WHERE
        roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND
        type != 'HIDDEN' AND
        type != 'REACTION' AND
        (hsOrder <= 6586.0 OR senderContactID = '@telegram_channel-1585018554:bee'/*+9 bytes*/)
      ORDER BY hsOrder DESC LIMIT 1
    ) )
    RETURNING *
  
[debug] [2025-05-16T20:49:55.985Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$H1uBDjk1W51otnphK2FdOz9n4TnB6gt'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:49:55.986Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$rJye0U6XHmnpeKWKOu7OWH9SaLf16Z_'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:49:55.988Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:49:55.989Z] 
      SELECT
          COUNT(DISTINCT mx_room_messages.id) AS unreadCount,
          SUM(CASE WHEN mention.value = '@room' OR mention.value = '@timii:beeper.com' THEN 1 ELSE 0 END) AS unreadMentionsCount
      FROM mx_room_messages
      LEFT JOIN json_each(mx_room_messages.message, '$.mentions') AS mention
      WHERE
          mx_room_messages.roomId = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND
          mx_room_messages.isSentByMe = 0 AND
          mx_room_messages.isDeleted = 0 AND
          mx_room_messages.countsAsUnread = 1 AND
          mx_room_messages.hsOrder > 221.0
    
[debug] [2025-05-16T20:49:55.990Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:49:55.993Z] INSERT OR REPLACE INTO threads VALUES ('!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{},"bridge":{"b'/*+8907 bytes*/, 1747428571000.0)
[debug] [2025-05-16T20:49:55.994Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:49:55.994Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:49:55.995Z] UPDATE threads SET thread = json_patch(thread, '{"lastReadMessageSortKey":221,"p'/*+1778 bytes*/), timestamp = COALESCE(1747428609000.0, timestamp) WHERE threadID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:49:55.996Z] SELECT accountID, thread FROM threads WHERE threadID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:50:38.071Z] SELECT accountID, thread FROM threads WHERE threadID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:50:38.081Z] SELECT * FROM mx_reactions WHERE roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND eventID = '$MmAt24Gy4IfpRk8rcrrcsTZAepSx2oO'/*+25 bytes*/ LIMIT 1
[debug] [2025-05-16T20:50:38.083Z] INSERT OR REPLACE INTO mx_reactions (roomID, reactionID, eventID, senderID, description, path, "order", timestamp, isEdited, isDeleted, isSentByMe, echoInfo, sendStatus, reaction) VALUES ('!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, '$MmAt24Gy4IfpRk8rcrrcsTZAepSx2oO'/*+25 bytes*/, '$1lKSlah8QpJLu4_LLicC1Vvu0uDC5fO'/*+25 bytes*/, '@telegram_6182866805:beeper.loca'/*+1 bytes*/, '', NULL, 0.0, 1747428655000.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"@telegram_6182866805:beep'/*+96 bytes*/)
[debug] [2025-05-16T20:50:38.084Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND m.eventID = '$1lKSlah8QpJLu4_LLicC1Vvu0uDC5fO'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:50:38.084Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND m.eventID = '$MmAt24Gy4IfpRk8rcrrcsTZAepSx2oO'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:50:38.085Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, '$MmAt24Gy4IfpRk8rcrrcsTZAepSx2oO'/*+25 bytes*/, '@telegram_6182866805:beeper.loca'/*+1 bytes*/, 1747428655000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$1lKSlah8QpJLu4_LLicC1Vvu0uDC5fO'/*+25 bytes*/, 0.0, 'REACTION', 6587.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"threadID":"!T0GpQnHej0R'/*+816 bytes*/, NULL) RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:50:38.087Z] SELECT * FROM mx_read_receipts WHERE userID = '@telegram_6182866805:beeper.loca'/*+1 bytes*/ AND roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:50:38.087Z] 
    INSERT OR REPLACE INTO mx_read_receipts (userID, timestamp, roomID, relatesToID, hsOrder, hsSuborder, hsOrderString, lastVisibleEventID)
    VALUES ('@telegram_6182866805:beeper.loca'/*+1 bytes*/, 1747428656190.0, '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, '$MmAt24Gy4IfpRk8rcrrcsTZAepSx2oO'/*+25 bytes*/, 6587.0, NULL, NULL, (
      SELECT eventID
      FROM mx_room_messages
      WHERE
        roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND
        type != 'HIDDEN' AND
        type != 'REACTION' AND
        (hsOrder <= 6587.0 OR senderContactID = '@telegram_6182866805:beeper.loca'/*+1 bytes*/)
      ORDER BY hsOrder DESC LIMIT 1
    ) )
    RETURNING *
  
[debug] [2025-05-16T20:50:38.088Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND m.eventID = '$xjoxjabf5fJbIYk7zTc95-Soqb10_Qa'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:50:38.088Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND m.eventID = '$s2GY6hrhDH610QjplxNpW6ZHQojTFW-'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:50:38.088Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:50:38.091Z] 
      SELECT
          COUNT(DISTINCT mx_room_messages.id) AS unreadCount,
          SUM(CASE WHEN mention.value = '@room' OR mention.value = '@timii:beeper.com' THEN 1 ELSE 0 END) AS unreadMentionsCount
      FROM mx_room_messages
      LEFT JOIN json_each(mx_room_messages.message, '$.mentions') AS mention
      WHERE
          mx_room_messages.roomId = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND
          mx_room_messages.isSentByMe = 0 AND
          mx_room_messages.isDeleted = 0 AND
          mx_room_messages.countsAsUnread = 1 AND
          mx_room_messages.hsOrder > 237.0
    
[debug] [2025-05-16T20:50:38.092Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:50:38.096Z] INSERT OR REPLACE INTO threads VALUES ('!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{},"bridge":{"b'/*+8903 bytes*/, 1747428234000.0)
[debug] [2025-05-16T20:50:38.098Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:50:38.100Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:50:39.291Z] SELECT accountID, thread FROM threads WHERE threadID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:50:39.296Z] SELECT * FROM mx_reactions WHERE roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND eventID = '$cqAyTuwDgPlyvMp09SugpYUGxaUI-V0'/*+25 bytes*/ LIMIT 1
[debug] [2025-05-16T20:50:39.298Z] INSERT OR REPLACE INTO mx_reactions (roomID, reactionID, eventID, senderID, description, path, "order", timestamp, isEdited, isDeleted, isSentByMe, echoInfo, sendStatus, reaction) VALUES ('!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, '$cqAyTuwDgPlyvMp09SugpYUGxaUI-V0'/*+25 bytes*/, '$s0l7G8cU7fdQMRb45NVUonuaZjzwSeq'/*+25 bytes*/, '@telegram_6182866805:beeper.loca'/*+1 bytes*/, '', NULL, 0.0, 1747428656000.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"@telegram_6182866805:beep'/*+98 bytes*/)
[debug] [2025-05-16T20:50:39.298Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND m.eventID = '$s0l7G8cU7fdQMRb45NVUonuaZjzwSeq'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:50:39.298Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND m.eventID = '$cqAyTuwDgPlyvMp09SugpYUGxaUI-V0'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:50:39.299Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, '$cqAyTuwDgPlyvMp09SugpYUGxaUI-V0'/*+25 bytes*/, '@telegram_6182866805:beeper.loca'/*+1 bytes*/, 1747428656000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$s0l7G8cU7fdQMRb45NVUonuaZjzwSeq'/*+25 bytes*/, 0.0, 'REACTION', 6588.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"threadID":"!T0GpQnHej0R'/*+820 bytes*/, NULL) RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:50:39.304Z] SELECT * FROM mx_read_receipts WHERE userID = '@telegram_6182866805:beeper.loca'/*+1 bytes*/ AND roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:50:39.304Z] 
    INSERT OR REPLACE INTO mx_read_receipts (userID, timestamp, roomID, relatesToID, hsOrder, hsSuborder, hsOrderString, lastVisibleEventID)
    VALUES ('@telegram_6182866805:beeper.loca'/*+1 bytes*/, 1747428657406.0, '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, '$cqAyTuwDgPlyvMp09SugpYUGxaUI-V0'/*+25 bytes*/, 6588.0, NULL, NULL, (
      SELECT eventID
      FROM mx_room_messages
      WHERE
        roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND
        type != 'HIDDEN' AND
        type != 'REACTION' AND
        (hsOrder <= 6588.0 OR senderContactID = '@telegram_6182866805:beeper.loca'/*+1 bytes*/)
      ORDER BY hsOrder DESC LIMIT 1
    ) )
    RETURNING *
  
[debug] [2025-05-16T20:50:39.306Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:50:39.307Z] 
      SELECT
          COUNT(DISTINCT mx_room_messages.id) AS unreadCount,
          SUM(CASE WHEN mention.value = '@room' OR mention.value = '@timii:beeper.com' THEN 1 ELSE 0 END) AS unreadMentionsCount
      FROM mx_room_messages
      LEFT JOIN json_each(mx_room_messages.message, '$.mentions') AS mention
      WHERE
          mx_room_messages.roomId = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND
          mx_room_messages.isSentByMe = 0 AND
          mx_room_messages.isDeleted = 0 AND
          mx_room_messages.countsAsUnread = 1 AND
          mx_room_messages.hsOrder > 237.0
    
[debug] [2025-05-16T20:50:39.308Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:50:39.310Z] INSERT OR REPLACE INTO threads VALUES ('!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{},"bridge":{"b'/*+8903 bytes*/, 1747428234000.0)
[debug] [2025-05-16T20:50:39.311Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:50:39.313Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:52:13.607Z] SELECT accountID, thread FROM threads WHERE threadID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:52:13.608Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$bNOlKndl1odj5IbZv-kTVkvH2Ah0cd3'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:52:13.609Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$bNOlKndl1odj5IbZv-kTVkvH2Ah0cd3'/*+25 bytes*/, '@telegrambot:beeper.local', 1747428751627.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6589.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+490 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:52:13.611Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$-lxFEdrDMltA3XGQk6Yyr_KuueSZim_'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:52:13.613Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (95.0, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$-lxFEdrDMltA3XGQk6Yyr_KuueSZim_'/*+25 bytes*/, '@telegram_channel-1161123794:bee'/*+9 bytes*/, 1747427903078.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"95","text":"m.room.member'/*+505 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:52:13.614Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$2XZOHaK0c2r-9vLaCy2K3ZVMTtHgKpP'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:52:13.616Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (6389.0, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$2XZOHaK0c2r-9vLaCy2K3ZVMTtHgKpP'/*+25 bytes*/, '@telegram_6825918760:beeper.loca'/*+1 bytes*/, 1747428375147.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"6389","text":"m.room.memb'/*+499 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:52:13.618Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$MrkX7lLbyTDrebWI_9NW74V48meYc6W'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:52:13.619Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (6436.0, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$MrkX7lLbyTDrebWI_9NW74V48meYc6W'/*+25 bytes*/, '@telegram_channel-1585018554:bee'/*+9 bytes*/, 1747428572962.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"6436","text":"m.room.memb'/*+507 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:52:13.621Z] 
SELECT COUNT(*) as count
FROM mx_room_messages
WHERE roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND type != 'HIDDEN' AND type != 'REACTION'
  
[debug] [2025-05-16T20:52:13.623Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$bNOlKndl1odj5IbZv-kTVkvH2Ah0cd3'/*+25 bytes*/, '@telegrambot:beeper.local', 1747428751627.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'MEMBERSHIP', 6589.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"senderID":"@telegrambot'/*+852 bytes*/, NULL) RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:52:13.626Z] INSERT OR REPLACE INTO threads VALUES ('!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{},"bridge":{"b'/*+9457 bytes*/, 1747428609000.0)
[debug] [2025-05-16T20:52:13.627Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:52:13.628Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:52:14.527Z] SELECT accountID, thread FROM threads WHERE threadID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:52:14.530Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$ZE0BET6XsA7ijJXpH2YR2MU1BPcCtWi'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:52:14.531Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$ZE0BET6XsA7ijJXpH2YR2MU1BPcCtWi'/*+25 bytes*/, '@telegram_587595224:beeper.local', 1747428751640.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6590.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+496 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:52:14.534Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$-lxFEdrDMltA3XGQk6Yyr_KuueSZim_'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:52:14.537Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (95.0, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$-lxFEdrDMltA3XGQk6Yyr_KuueSZim_'/*+25 bytes*/, '@telegram_channel-1161123794:bee'/*+9 bytes*/, 1747427903078.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"95","text":"m.room.member'/*+505 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:52:14.539Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$2XZOHaK0c2r-9vLaCy2K3ZVMTtHgKpP'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:52:14.539Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (6389.0, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$2XZOHaK0c2r-9vLaCy2K3ZVMTtHgKpP'/*+25 bytes*/, '@telegram_6825918760:beeper.loca'/*+1 bytes*/, 1747428375147.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"6389","text":"m.room.memb'/*+499 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:52:14.541Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$MrkX7lLbyTDrebWI_9NW74V48meYc6W'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:52:14.542Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (6436.0, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$MrkX7lLbyTDrebWI_9NW74V48meYc6W'/*+25 bytes*/, '@telegram_channel-1585018554:bee'/*+9 bytes*/, 1747428572962.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"6436","text":"m.room.memb'/*+507 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:52:14.544Z] 
SELECT COUNT(*) as count
FROM mx_room_messages
WHERE roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND type != 'HIDDEN' AND type != 'REACTION'
  
[debug] [2025-05-16T20:52:14.544Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$ZE0BET6XsA7ijJXpH2YR2MU1BPcCtWi'/*+25 bytes*/, '@telegram_587595224:beeper.local', 1747428751640.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'MEMBERSHIP', 6590.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"senderID":"@telegram_58'/*+864 bytes*/, NULL) RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:52:14.546Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$2XtFKwcQKuWTwyxGPUICkiluYlRsN9C'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:52:14.586Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'mautrix-go_1747428751648622381_1'
LIMIT 1
    
[debug] [2025-05-16T20:52:14.586Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$2XtFKwcQKuWTwyxGPUICkiluYlRsN9C'/*+25 bytes*/, '@telegram_587595224:beeper.local', 1747428745000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$H1uBDjk1W51otnphK2FdOz9n4TnB6gt'/*+25 bytes*/, 0.0, 'VIDEO', 6591.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!KyFDFn3rZOu'/*+1045 bytes*/, 'mautrix-go_1747428751648622381_1') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:52:14.591Z] SELECT * FROM mx_read_receipts WHERE userID = '@telegram_587595224:beeper.local' AND roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:52:14.592Z] 
    INSERT OR REPLACE INTO mx_read_receipts (userID, timestamp, roomID, relatesToID, hsOrder, hsSuborder, hsOrderString, lastVisibleEventID)
    VALUES ('@telegram_587595224:beeper.local', 1747428751657.0, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$2XtFKwcQKuWTwyxGPUICkiluYlRsN9C'/*+25 bytes*/, 6591.0, NULL, NULL, (
      SELECT eventID
      FROM mx_room_messages
      WHERE
        roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND
        type != 'HIDDEN' AND
        type != 'REACTION' AND
        (hsOrder <= 6591.0 OR senderContactID = '@telegram_587595224:beeper.local')
      ORDER BY hsOrder DESC LIMIT 1
    ) )
    RETURNING *
  
[debug] [2025-05-16T20:52:14.592Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$2XtFKwcQKuWTwyxGPUICkiluYlRsN9C'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:52:14.596Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:52:14.596Z] 
      SELECT
          COUNT(DISTINCT mx_room_messages.id) AS unreadCount,
          SUM(CASE WHEN mention.value = '@room' OR mention.value = '@timii:beeper.com' THEN 1 ELSE 0 END) AS unreadMentionsCount
      FROM mx_room_messages
      LEFT JOIN json_each(mx_room_messages.message, '$.mentions') AS mention
      WHERE
          mx_room_messages.roomId = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND
          mx_room_messages.isSentByMe = 0 AND
          mx_room_messages.isDeleted = 0 AND
          mx_room_messages.countsAsUnread = 1 AND
          mx_room_messages.hsOrder > 221.0
    
[debug] [2025-05-16T20:52:14.597Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:52:14.601Z] INSERT OR REPLACE INTO threads VALUES ('!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{},"bridge":{"b'/*+9458 bytes*/, 1747428609000.0)
[debug] [2025-05-16T20:52:14.601Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:52:14.602Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:52:14.603Z] UPDATE threads SET thread = json_patch(thread, '{"lastReadMessageSortKey":221,"p'/*+2253 bytes*/), timestamp = COALESCE(1747428745000.0, timestamp) WHERE threadID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:52:14.605Z] SELECT accountID, thread FROM threads WHERE threadID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:52:41.258Z] SELECT accountID, thread FROM threads WHERE threadID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:52:41.260Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$wdqVP4kwrxNd8SSrf2mDrXBFuQJLqcN'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:52:41.262Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$wdqVP4kwrxNd8SSrf2mDrXBFuQJLqcN'/*+25 bytes*/, '@telegrambot:beeper.local', 1747428779358.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6592.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+490 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:52:41.264Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$-lxFEdrDMltA3XGQk6Yyr_KuueSZim_'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:52:41.266Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (95.0, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$-lxFEdrDMltA3XGQk6Yyr_KuueSZim_'/*+25 bytes*/, '@telegram_channel-1161123794:bee'/*+9 bytes*/, 1747427903078.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"95","text":"m.room.member'/*+505 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:52:41.268Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$2XZOHaK0c2r-9vLaCy2K3ZVMTtHgKpP'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:52:41.269Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (6389.0, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$2XZOHaK0c2r-9vLaCy2K3ZVMTtHgKpP'/*+25 bytes*/, '@telegram_6825918760:beeper.loca'/*+1 bytes*/, 1747428375147.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"6389","text":"m.room.memb'/*+499 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:52:41.270Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$MrkX7lLbyTDrebWI_9NW74V48meYc6W'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:52:41.272Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (6436.0, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$MrkX7lLbyTDrebWI_9NW74V48meYc6W'/*+25 bytes*/, '@telegram_channel-1585018554:bee'/*+9 bytes*/, 1747428572962.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"6436","text":"m.room.memb'/*+507 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:52:41.275Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$ZE0BET6XsA7ijJXpH2YR2MU1BPcCtWi'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:52:41.276Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (6444.0, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$ZE0BET6XsA7ijJXpH2YR2MU1BPcCtWi'/*+25 bytes*/, '@telegram_587595224:beeper.local', 1747428751640.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"6444","text":"m.room.memb'/*+498 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:52:41.277Z] 
SELECT COUNT(*) as count
FROM mx_room_messages
WHERE roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND type != 'HIDDEN' AND type != 'REACTION'
  
[debug] [2025-05-16T20:52:41.278Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$wdqVP4kwrxNd8SSrf2mDrXBFuQJLqcN'/*+25 bytes*/, '@telegrambot:beeper.local', 1747428779358.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'MEMBERSHIP', 6592.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"senderID":"@telegrambot'/*+934 bytes*/, NULL) RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:52:41.286Z] INSERT OR REPLACE INTO threads VALUES ('!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{},"bridge":{"b'/*+10377 bytes*/, 1747428745000.0)
[debug] [2025-05-16T20:52:41.287Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:52:41.288Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:52:42.207Z] SELECT accountID, thread FROM threads WHERE threadID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:52:42.216Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$9wl9QzF3jfzTLPW4Kq52WTqf7txZQN7'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:52:42.217Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$9wl9QzF3jfzTLPW4Kq52WTqf7txZQN7'/*+25 bytes*/, '@telegram_5067894626:beeper.loca'/*+1 bytes*/, 1747428779368.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6593.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+497 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:52:42.221Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$RMxIdWzX53k3o3r7HJVdb0-BHb6xxrx'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:52:42.222Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$RMxIdWzX53k3o3r7HJVdb0-BHb6xxrx'/*+25 bytes*/, '@telegram_8108095705:beeper.loca'/*+1 bytes*/, 1747428779423.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6597.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+497 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:52:42.224Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$-lxFEdrDMltA3XGQk6Yyr_KuueSZim_'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:52:42.226Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (95.0, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$-lxFEdrDMltA3XGQk6Yyr_KuueSZim_'/*+25 bytes*/, '@telegram_channel-1161123794:bee'/*+9 bytes*/, 1747427903078.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"95","text":"m.room.member'/*+505 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:52:42.228Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$2XZOHaK0c2r-9vLaCy2K3ZVMTtHgKpP'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:52:42.230Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (6389.0, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$2XZOHaK0c2r-9vLaCy2K3ZVMTtHgKpP'/*+25 bytes*/, '@telegram_6825918760:beeper.loca'/*+1 bytes*/, 1747428375147.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"6389","text":"m.room.memb'/*+499 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:52:42.232Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$MrkX7lLbyTDrebWI_9NW74V48meYc6W'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:52:42.234Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (6436.0, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$MrkX7lLbyTDrebWI_9NW74V48meYc6W'/*+25 bytes*/, '@telegram_channel-1585018554:bee'/*+9 bytes*/, 1747428572962.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"6436","text":"m.room.memb'/*+507 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:52:42.238Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$ZE0BET6XsA7ijJXpH2YR2MU1BPcCtWi'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:52:42.239Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (6444.0, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$ZE0BET6XsA7ijJXpH2YR2MU1BPcCtWi'/*+25 bytes*/, '@telegram_587595224:beeper.local', 1747428751640.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"6444","text":"m.room.memb'/*+498 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:52:42.240Z] 
SELECT COUNT(*) as count
FROM mx_room_messages
WHERE roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND type != 'HIDDEN' AND type != 'REACTION'
  
[debug] [2025-05-16T20:52:42.241Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$9wl9QzF3jfzTLPW4Kq52WTqf7txZQN7'/*+25 bytes*/, '@telegram_5067894626:beeper.loca'/*+1 bytes*/, 1747428779368.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'MEMBERSHIP', 6593.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"senderID":"@telegram_50'/*+948 bytes*/, NULL) RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:52:42.245Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$dEDehoAIVy40DE-2K_IN_vqwcdHcEeR'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:52:42.246Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'mautrix-go_1747428779377157063_1'
LIMIT 1
    
[debug] [2025-05-16T20:52:42.247Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$dEDehoAIVy40DE-2K_IN_vqwcdHcEeR'/*+25 bytes*/, '@telegram_5067894626:beeper.loca'/*+1 bytes*/, 1747428778000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$2XtFKwcQKuWTwyxGPUICkiluYlRsN9C'/*+25 bytes*/, 0.0, 'TEXT', 6594.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!KyFDFn3rZOu'/*+681 bytes*/, 'mautrix-go_1747428779377157063_1') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:52:42.253Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$P9X_s-iqAo1ud085fc7QWYDmb17dD2B'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:52:42.254Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'mautrix-go_1747428779387724085_2'
LIMIT 1
    
[debug] [2025-05-16T20:52:42.255Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$P9X_s-iqAo1ud085fc7QWYDmb17dD2B'/*+25 bytes*/, '@telegram_587595224:beeper.local', 1747428773000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6595.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!KyFDFn3rZOu'/*+586 bytes*/, 'mautrix-go_1747428779387724085_2') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:52:42.258Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$lvmCeBl93qcy4rtDD8Bn8XkqWssCbTx'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:52:42.259Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$lvmCeBl93qcy4rtDD8Bn8XkqWssCbTx'/*+25 bytes*/, '@telegrambot:beeper.local', 1747428779405.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6596.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+490 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:52:42.263Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$RMxIdWzX53k3o3r7HJVdb0-BHb6xxrx'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:52:42.264Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (6449.0, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$RMxIdWzX53k3o3r7HJVdb0-BHb6xxrx'/*+25 bytes*/, '@telegram_8108095705:beeper.loca'/*+1 bytes*/, 1747428779423.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6597.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"6449","text":"m.room.memb'/*+502 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:52:42.265Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$Wwqh-_BAiDSV-elqtT48h6TWWWvpBh-'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:52:42.267Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'mautrix-go_1747428779436846386_1'
LIMIT 1
    
[debug] [2025-05-16T20:52:42.268Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$Wwqh-_BAiDSV-elqtT48h6TWWWvpBh-'/*+25 bytes*/, '@telegram_8108095705:beeper.loca'/*+1 bytes*/, 1747428774000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$P9X_s-iqAo1ud085fc7QWYDmb17dD2B'/*+25 bytes*/, 0.0, 'VIDEO', 6598.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!KyFDFn3rZOu'/*+1135 bytes*/, 'mautrix-go_1747428779436846386_1') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:52:42.272Z] SELECT * FROM mx_read_receipts WHERE userID = '@telegram_587595224:beeper.local' AND roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:52:42.275Z] 
    INSERT OR REPLACE INTO mx_read_receipts (userID, timestamp, roomID, relatesToID, hsOrder, hsSuborder, hsOrderString, lastVisibleEventID)
    VALUES ('@telegram_587595224:beeper.local', 1747428779395.0, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$P9X_s-iqAo1ud085fc7QWYDmb17dD2B'/*+25 bytes*/, 6595.0, NULL, NULL, (
      SELECT eventID
      FROM mx_room_messages
      WHERE
        roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND
        type != 'HIDDEN' AND
        type != 'REACTION' AND
        (hsOrder <= 6595.0 OR senderContactID = '@telegram_587595224:beeper.local')
      ORDER BY hsOrder DESC LIMIT 1
    ) )
    RETURNING *
  
[debug] [2025-05-16T20:52:42.275Z] SELECT * FROM mx_read_receipts WHERE userID = '@telegram_8108095705:beeper.loca'/*+1 bytes*/ AND roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:52:42.275Z] 
    INSERT OR REPLACE INTO mx_read_receipts (userID, timestamp, roomID, relatesToID, hsOrder, hsSuborder, hsOrderString, lastVisibleEventID)
    VALUES ('@telegram_8108095705:beeper.loca'/*+1 bytes*/, 1747428779442.0, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$Wwqh-_BAiDSV-elqtT48h6TWWWvpBh-'/*+25 bytes*/, 6598.0, NULL, NULL, (
      SELECT eventID
      FROM mx_room_messages
      WHERE
        roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND
        type != 'HIDDEN' AND
        type != 'REACTION' AND
        (hsOrder <= 6598.0 OR senderContactID = '@telegram_8108095705:beeper.loca'/*+1 bytes*/)
      ORDER BY hsOrder DESC LIMIT 1
    ) )
    RETURNING *
  
[debug] [2025-05-16T20:52:42.277Z] SELECT * FROM mx_read_receipts WHERE userID = '@telegram_5067894626:beeper.loca'/*+1 bytes*/ AND roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:52:42.277Z] 
    INSERT OR REPLACE INTO mx_read_receipts (userID, timestamp, roomID, relatesToID, hsOrder, hsSuborder, hsOrderString, lastVisibleEventID)
    VALUES ('@telegram_5067894626:beeper.loca'/*+1 bytes*/, 1747428779384.0, '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, '$dEDehoAIVy40DE-2K_IN_vqwcdHcEeR'/*+25 bytes*/, 6594.0, NULL, NULL, (
      SELECT eventID
      FROM mx_room_messages
      WHERE
        roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND
        type != 'HIDDEN' AND
        type != 'REACTION' AND
        (hsOrder <= 6594.0 OR senderContactID = '@telegram_5067894626:beeper.loca'/*+1 bytes*/)
      ORDER BY hsOrder DESC LIMIT 1
    ) )
    RETURNING *
  
[debug] [2025-05-16T20:52:42.278Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$2XtFKwcQKuWTwyxGPUICkiluYlRsN9C'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:52:42.278Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$P9X_s-iqAo1ud085fc7QWYDmb17dD2B'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:52:42.279Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$Wwqh-_BAiDSV-elqtT48h6TWWWvpBh-'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:52:42.279Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND m.eventID = '$dEDehoAIVy40DE-2K_IN_vqwcdHcEeR'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:52:42.282Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:52:42.283Z] 
      SELECT
          COUNT(DISTINCT mx_room_messages.id) AS unreadCount,
          SUM(CASE WHEN mention.value = '@room' OR mention.value = '@timii:beeper.com' THEN 1 ELSE 0 END) AS unreadMentionsCount
      FROM mx_room_messages
      LEFT JOIN json_each(mx_room_messages.message, '$.mentions') AS mention
      WHERE
          mx_room_messages.roomId = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ AND
          mx_room_messages.isSentByMe = 0 AND
          mx_room_messages.isDeleted = 0 AND
          mx_room_messages.countsAsUnread = 1 AND
          mx_room_messages.hsOrder > 221.0
    
[debug] [2025-05-16T20:52:42.284Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:52:42.285Z] INSERT OR REPLACE INTO threads VALUES ('!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{},"bridge":{"b'/*+10379 bytes*/, 1747428745000.0)
[debug] [2025-05-16T20:52:42.286Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:52:42.287Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:52:42.287Z] UPDATE threads SET thread = json_patch(thread, '{"lastReadMessageSortKey":221,"p'/*+2004 bytes*/), timestamp = COALESCE(1747428774000.0, timestamp) WHERE threadID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:52:42.288Z] SELECT accountID, thread FROM threads WHERE threadID = '!KyFDFn3rZOubUK8NLpwQ:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:53:43.950Z] SELECT accountID, thread FROM threads WHERE threadID = '!sbK9skcMMFeyTfqKC6Eq:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:53:43.952Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!sbK9skcMMFeyTfqKC6Eq:beeper.loc'/*+2 bytes*/ AND m.eventID = '$0zKaxOShVQqyS5-29Y_jRHA3KWztbih'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:53:43.954Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!sbK9skcMMFeyTfqKC6Eq:beeper.loc'/*+2 bytes*/, '$0zKaxOShVQqyS5-29Y_jRHA3KWztbih'/*+25 bytes*/, '@telegram_6357887088:beeper.loca'/*+1 bytes*/, 1747428787988.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6599.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:53:43.962Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!sbK9skcMMFeyTfqKC6Eq:beeper.loc'/*+2 bytes*/ AND m.eventID = '$Boc1DqXt5Wum4N6mxHAkc2YJZzft1Qn'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:53:43.963Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!sbK9skcMMFeyTfqKC6Eq:beeper.loc'/*+2 bytes*/, '$Boc1DqXt5Wum4N6mxHAkc2YJZzft1Qn'/*+25 bytes*/, '@telegram_1339625583:beeper.loca'/*+1 bytes*/, 1747428787991.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6600.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:53:43.968Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!sbK9skcMMFeyTfqKC6Eq:beeper.loc'/*+2 bytes*/ AND m.eventID = '$9p-AgAzl7nCBX92lVt91OjmKcSk-tYf'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:53:43.970Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!sbK9skcMMFeyTfqKC6Eq:beeper.loc'/*+2 bytes*/, '$9p-AgAzl7nCBX92lVt91OjmKcSk-tYf'/*+25 bytes*/, '@telegram_1011625076:beeper.loca'/*+1 bytes*/, 1747428787994.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6601.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:53:43.976Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!sbK9skcMMFeyTfqKC6Eq:beeper.loc'/*+2 bytes*/ AND m.eventID = '$fUoWizzq1ftwHKWUiTH2hRbPC_mA2u4'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:53:43.976Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!sbK9skcMMFeyTfqKC6Eq:beeper.loc'/*+2 bytes*/, '$fUoWizzq1ftwHKWUiTH2hRbPC_mA2u4'/*+25 bytes*/, '@telegram_5286039304:beeper.loca'/*+1 bytes*/, 1747428787998.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6602.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:53:43.983Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!sbK9skcMMFeyTfqKC6Eq:beeper.loc'/*+2 bytes*/ AND m.eventID = '$fBVNTfw8nzA0vOGLBQJFojso94lCDWH'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:53:43.983Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!sbK9skcMMFeyTfqKC6Eq:beeper.loc'/*+2 bytes*/, '$fBVNTfw8nzA0vOGLBQJFojso94lCDWH'/*+25 bytes*/, '@telegram_5766321554:beeper.loca'/*+1 bytes*/, 1747428788001.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6603.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:53:43.990Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!sbK9skcMMFeyTfqKC6Eq:beeper.loc'/*+2 bytes*/ AND m.eventID = '$Xo05mvk7HJdAzB4bSX9r422Rsxs5jnU'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:53:43.991Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!sbK9skcMMFeyTfqKC6Eq:beeper.loc'/*+2 bytes*/, '$Xo05mvk7HJdAzB4bSX9r422Rsxs5jnU'/*+25 bytes*/, '@telegram_5982476848:beeper.loca'/*+1 bytes*/, 1747428788004.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6604.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:53:43.996Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!sbK9skcMMFeyTfqKC6Eq:beeper.loc'/*+2 bytes*/ AND m.eventID = '$E2BBVmFRp18QoOWmWvi_VMxO9FFwfBM'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:53:43.998Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!sbK9skcMMFeyTfqKC6Eq:beeper.loc'/*+2 bytes*/, '$E2BBVmFRp18QoOWmWvi_VMxO9FFwfBM'/*+25 bytes*/, '@telegram_389319948:beeper.local', 1747428788008.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6605.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+494 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:53:44.005Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!sbK9skcMMFeyTfqKC6Eq:beeper.loc'/*+2 bytes*/ AND m.eventID = '$jhPd_TAC-EaOP-GqnAgmEw6e8M-FpqJ'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:53:44.007Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!sbK9skcMMFeyTfqKC6Eq:beeper.loc'/*+2 bytes*/, '$jhPd_TAC-EaOP-GqnAgmEw6e8M-FpqJ'/*+25 bytes*/, '@telegram_324353206:beeper.local', 1747428788011.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6606.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+494 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:53:44.013Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!sbK9skcMMFeyTfqKC6Eq:beeper.loc'/*+2 bytes*/ AND m.eventID = '$bkaf8buS7_1oAJm2UiBwPp9DlGzSqt7'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:53:44.015Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (3638.0, '!sbK9skcMMFeyTfqKC6Eq:beeper.loc'/*+2 bytes*/, '$bkaf8buS7_1oAJm2UiBwPp9DlGzSqt7'/*+25 bytes*/, '@telegram_channel-2009921425:bee'/*+9 bytes*/, 1747428298066.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"3638","text":"m.room.memb'/*+507 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:53:44.021Z] INSERT OR REPLACE INTO threads VALUES ('!sbK9skcMMFeyTfqKC6Eq:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{},"bridge":{"b'/*+8957 bytes*/, 1747419103000.0)
[debug] [2025-05-16T20:53:44.024Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!sbK9skcMMFeyTfqKC6Eq:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:53:44.025Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!sbK9skcMMFeyTfqKC6Eq:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:54:08.604Z] SELECT * FROM breadcrumbs WHERE id = '!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:54:08.605Z] INSERT OR REPLACE INTO breadcrumbs (id, sentCount, sentLast, openCount, lastOpenTime) VALUES ('!bCQ9kEooXam2gTdn7PLj:beeper.loc'/*+2 bytes*/, 0.0, 0.0, 8.0, 1747428848604.0)
[debug] [2025-05-16T20:54:11.877Z] SELECT accountID, thread FROM threads WHERE threadID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:54:11.880Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND m.eventID = '$2Io6Qx-m28YxitiyhOxgaRUbXkHwSbx'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:54:11.881Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, '$2Io6Qx-m28YxitiyhOxgaRUbXkHwSbx'/*+25 bytes*/, '@telegrambot:beeper.local', 1747428870021.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6607.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+490 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:54:11.887Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND m.eventID = '$fRvsK6qq1ykSXBGz_Og1fNm6f-w6kN3'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:54:11.889Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (267.0, '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, '$fRvsK6qq1ykSXBGz_Og1fNm6f-w6kN3'/*+25 bytes*/, '@telegram_channel-2034414192:bee'/*+9 bytes*/, 1747427903143.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"267","text":"m.room.membe'/*+506 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:54:11.893Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND m.eventID = '$vLZFlPXhcZYhcGE_RZe9slieXjvJcOL'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:54:11.895Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (757.0, '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, '$vLZFlPXhcZYhcGE_RZe9slieXjvJcOL'/*+25 bytes*/, '@telegram_7595433849:beeper.loca'/*+1 bytes*/, 1747427922833.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"757","text":"m.room.membe'/*+498 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:54:11.898Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND m.eventID = '$r2nqSNQJ1S2T520ttMJN-PdlojDYse3'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:54:11.899Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (2852.0, '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, '$r2nqSNQJ1S2T520ttMJN-PdlojDYse3'/*+25 bytes*/, '@telegram_6182866805:beeper.loca'/*+1 bytes*/, 1747428043855.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"2852","text":"m.room.memb'/*+499 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:54:11.903Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND m.eventID = '$DbqpoHFLOK3kYstxXem0SEV4QrUZ0ji'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:54:11.904Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (2859.0, '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, '$DbqpoHFLOK3kYstxXem0SEV4QrUZ0ji'/*+25 bytes*/, '@telegram_7140010318:beeper.loca'/*+1 bytes*/, 1747428069479.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"2859","text":"m.room.memb'/*+499 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:54:11.907Z] 
SELECT COUNT(*) as count
FROM mx_room_messages
WHERE roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND type != 'HIDDEN' AND type != 'REACTION'
  
[debug] [2025-05-16T20:54:11.908Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, '$2Io6Qx-m28YxitiyhOxgaRUbXkHwSbx'/*+25 bytes*/, '@telegrambot:beeper.local', 1747428870021.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'MEMBERSHIP', 6607.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"senderID":"@telegrambot'/*+700 bytes*/, NULL) RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:54:11.918Z] INSERT OR REPLACE INTO threads VALUES ('!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{},"bridge":{"b'/*+9048 bytes*/, 1747428234000.0)
[debug] [2025-05-16T20:54:11.922Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:54:11.923Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:54:12.808Z] SELECT accountID, thread FROM threads WHERE threadID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:54:12.809Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND m.eventID = '$9kFR-5YOzlwnsKLvRqcQ7OS27nS1HoN'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:54:12.810Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, '$9kFR-5YOzlwnsKLvRqcQ7OS27nS1HoN'/*+25 bytes*/, '@telegram_7221951985:beeper.loca'/*+1 bytes*/, 1747428870029.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6608.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+497 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:54:12.814Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND m.eventID = '$fRvsK6qq1ykSXBGz_Og1fNm6f-w6kN3'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:54:12.815Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (267.0, '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, '$fRvsK6qq1ykSXBGz_Og1fNm6f-w6kN3'/*+25 bytes*/, '@telegram_channel-2034414192:bee'/*+9 bytes*/, 1747427903143.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"267","text":"m.room.membe'/*+506 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:54:12.818Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND m.eventID = '$vLZFlPXhcZYhcGE_RZe9slieXjvJcOL'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:54:12.818Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (757.0, '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, '$vLZFlPXhcZYhcGE_RZe9slieXjvJcOL'/*+25 bytes*/, '@telegram_7595433849:beeper.loca'/*+1 bytes*/, 1747427922833.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"757","text":"m.room.membe'/*+498 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:54:12.821Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND m.eventID = '$r2nqSNQJ1S2T520ttMJN-PdlojDYse3'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:54:12.823Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (2852.0, '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, '$r2nqSNQJ1S2T520ttMJN-PdlojDYse3'/*+25 bytes*/, '@telegram_6182866805:beeper.loca'/*+1 bytes*/, 1747428043855.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"2852","text":"m.room.memb'/*+499 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:54:12.825Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND m.eventID = '$DbqpoHFLOK3kYstxXem0SEV4QrUZ0ji'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:54:12.826Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (2859.0, '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, '$DbqpoHFLOK3kYstxXem0SEV4QrUZ0ji'/*+25 bytes*/, '@telegram_7140010318:beeper.loca'/*+1 bytes*/, 1747428069479.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"2859","text":"m.room.memb'/*+499 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:54:12.830Z] 
SELECT COUNT(*) as count
FROM mx_room_messages
WHERE roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND type != 'HIDDEN' AND type != 'REACTION'
  
[debug] [2025-05-16T20:54:12.831Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, '$9kFR-5YOzlwnsKLvRqcQ7OS27nS1HoN'/*+25 bytes*/, '@telegram_7221951985:beeper.loca'/*+1 bytes*/, 1747428870029.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'MEMBERSHIP', 6608.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"senderID":"@telegram_72'/*+714 bytes*/, NULL) RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:54:12.836Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND m.eventID = '$Rx3ezFDkiGL_Mq4_Ws65anGIWkhuEdt'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:54:12.838Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'mautrix-go_1747428870037135513_1'
LIMIT 1
    
[debug] [2025-05-16T20:54:12.839Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, '$Rx3ezFDkiGL_Mq4_Ws65anGIWkhuEdt'/*+25 bytes*/, '@telegram_7221951985:beeper.loca'/*+1 bytes*/, 1747428869000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'TEXT', 6609.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!T0GpQnHej0R'/*+606 bytes*/, 'mautrix-go_1747428870037135513_1') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:54:12.845Z] SELECT * FROM mx_read_receipts WHERE userID = '@telegram_7221951985:beeper.loca'/*+1 bytes*/ AND roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:54:12.845Z] 
    INSERT OR REPLACE INTO mx_read_receipts (userID, timestamp, roomID, relatesToID, hsOrder, hsSuborder, hsOrderString, lastVisibleEventID)
    VALUES ('@telegram_7221951985:beeper.loca'/*+1 bytes*/, 1747428870043.0, '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, '$Rx3ezFDkiGL_Mq4_Ws65anGIWkhuEdt'/*+25 bytes*/, 6609.0, NULL, NULL, (
      SELECT eventID
      FROM mx_room_messages
      WHERE
        roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND
        type != 'HIDDEN' AND
        type != 'REACTION' AND
        (hsOrder <= 6609.0 OR senderContactID = '@telegram_7221951985:beeper.loca'/*+1 bytes*/)
      ORDER BY hsOrder DESC LIMIT 1
    ) )
    RETURNING *
  
[debug] [2025-05-16T20:54:12.850Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND m.eventID = '$Rx3ezFDkiGL_Mq4_Ws65anGIWkhuEdt'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:54:12.850Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:54:12.851Z] 
      SELECT
          COUNT(DISTINCT mx_room_messages.id) AS unreadCount,
          SUM(CASE WHEN mention.value = '@room' OR mention.value = '@timii:beeper.com' THEN 1 ELSE 0 END) AS unreadMentionsCount
      FROM mx_room_messages
      LEFT JOIN json_each(mx_room_messages.message, '$.mentions') AS mention
      WHERE
          mx_room_messages.roomId = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ AND
          mx_room_messages.isSentByMe = 0 AND
          mx_room_messages.isDeleted = 0 AND
          mx_room_messages.countsAsUnread = 1 AND
          mx_room_messages.hsOrder > 237.0
    
[debug] [2025-05-16T20:54:12.851Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:54:12.852Z] INSERT OR REPLACE INTO threads VALUES ('!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{},"bridge":{"b'/*+9049 bytes*/, 1747428234000.0)
[debug] [2025-05-16T20:54:12.853Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:54:12.853Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:54:12.854Z] UPDATE threads SET thread = json_patch(thread, '{"lastReadMessageSortKey":237,"p'/*+888 bytes*/), timestamp = COALESCE(1747428869000.0, timestamp) WHERE threadID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:54:12.855Z] SELECT accountID, thread FROM threads WHERE threadID = '!T0GpQnHej0RMh8PpBElO:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:54:17.153Z] SELECT accountID, thread FROM threads WHERE threadID = '!fesckikWHGwB4Z3OZ4L0:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:54:17.168Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!fesckikWHGwB4Z3OZ4L0:beeper.loc'/*+2 bytes*/ AND m.eventID = '$A-u8Sh0O3JXs4P89fvfkbxJ2-YJ44LT'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:54:17.170Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!fesckikWHGwB4Z3OZ4L0:beeper.loc'/*+2 bytes*/, '$A-u8Sh0O3JXs4P89fvfkbxJ2-YJ44LT'/*+25 bytes*/, '@telegram_5764264292:beeper.loca'/*+1 bytes*/, 1747428875432.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6610.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+497 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:54:17.182Z] 
SELECT COUNT(*) as count
FROM mx_room_messages
WHERE roomID = '!fesckikWHGwB4Z3OZ4L0:beeper.loc'/*+2 bytes*/ AND type != 'HIDDEN' AND type != 'REACTION'
  
[debug] [2025-05-16T20:54:17.183Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!fesckikWHGwB4Z3OZ4L0:beeper.loc'/*+2 bytes*/ AND m.eventID = '$A-u8Sh0O3JXs4P89fvfkbxJ2-YJ44LT'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:54:17.184Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (6468.0, '!fesckikWHGwB4Z3OZ4L0:beeper.loc'/*+2 bytes*/, '$A-u8Sh0O3JXs4P89fvfkbxJ2-YJ44LT'/*+25 bytes*/, '@telegram_5764264292:beeper.loca'/*+1 bytes*/, 1747428875432.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6610.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"6468","text":"m.room.memb'/*+502 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:54:17.190Z] INSERT OR REPLACE INTO threads VALUES ('!fesckikWHGwB4Z3OZ4L0:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{},"bridge":{"b'/*+4839 bytes*/, 1745095604000.0)
[debug] [2025-05-16T20:54:17.195Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!fesckikWHGwB4Z3OZ4L0:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:54:17.196Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!fesckikWHGwB4Z3OZ4L0:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:54:17.740Z] SELECT accountID, thread FROM threads WHERE threadID = '!VD6XJWa7yJ9HsQzNxvrA:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:54:17.746Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!VD6XJWa7yJ9HsQzNxvrA:beeper.loc'/*+2 bytes*/ AND m.eventID = '$Gw2dOpEExAKDlMAgy3OMsk6SjuGMMDX'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:54:17.747Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!VD6XJWa7yJ9HsQzNxvrA:beeper.loc'/*+2 bytes*/, '$Gw2dOpEExAKDlMAgy3OMsk6SjuGMMDX'/*+25 bytes*/, '@telegram_5764264292:beeper.loca'/*+1 bytes*/, 1747428875723.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6611.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:54:17.757Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!VD6XJWa7yJ9HsQzNxvrA:beeper.loc'/*+2 bytes*/ AND m.eventID = '$y42zu69UwlluudYuiDMAo7AO_nZxF40'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:54:17.760Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!VD6XJWa7yJ9HsQzNxvrA:beeper.loc'/*+2 bytes*/, '$y42zu69UwlluudYuiDMAo7AO_nZxF40'/*+25 bytes*/, '@telegram_6887499377:beeper.loca'/*+1 bytes*/, 1747428875727.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6612.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:54:17.765Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!VD6XJWa7yJ9HsQzNxvrA:beeper.loc'/*+2 bytes*/ AND m.eventID = '$jcmy4wiGSAsea98ytxMoGqkPSrt2y6y'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:54:17.766Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!VD6XJWa7yJ9HsQzNxvrA:beeper.loc'/*+2 bytes*/, '$jcmy4wiGSAsea98ytxMoGqkPSrt2y6y'/*+25 bytes*/, '@telegram_7884827170:beeper.loca'/*+1 bytes*/, 1747428875730.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6613.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:54:17.775Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!VD6XJWa7yJ9HsQzNxvrA:beeper.loc'/*+2 bytes*/ AND m.eventID = '$ZaxMXid5-LaWJ-gcg_LuRoDVbe32-P6'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:54:17.777Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!VD6XJWa7yJ9HsQzNxvrA:beeper.loc'/*+2 bytes*/, '$ZaxMXid5-LaWJ-gcg_LuRoDVbe32-P6'/*+25 bytes*/, '@telegram_6169370151:beeper.loca'/*+1 bytes*/, 1747428875734.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6614.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+495 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:54:17.786Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!VD6XJWa7yJ9HsQzNxvrA:beeper.loc'/*+2 bytes*/ AND m.eventID = '$EjdidWM0Q84k8gZ-XnLaKLDs0GnRDTL'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:54:17.787Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (3864.0, '!VD6XJWa7yJ9HsQzNxvrA:beeper.loc'/*+2 bytes*/, '$EjdidWM0Q84k8gZ-XnLaKLDs0GnRDTL'/*+25 bytes*/, '@telegram_channel-2671886038:bee'/*+9 bytes*/, 1747428298299.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"3864","text":"m.room.memb'/*+507 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:54:17.793Z] INSERT OR REPLACE INTO threads VALUES ('!VD6XJWa7yJ9HsQzNxvrA:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{},"bridge":{"b'/*+6972 bytes*/, 1746640101000.0)
[debug] [2025-05-16T20:54:17.800Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!VD6XJWa7yJ9HsQzNxvrA:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:54:17.803Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!VD6XJWa7yJ9HsQzNxvrA:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:54:21.386Z] SELECT accountID, thread FROM threads WHERE threadID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:54:21.388Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/ AND m.eventID = '$4NdGLMkrD9cBHE5o0J29i2289U1d7Un'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:54:21.389Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/, '$4NdGLMkrD9cBHE5o0J29i2289U1d7Un'/*+25 bytes*/, '@telegrambot:beeper.local', 1747428879696.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6615.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+490 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:54:21.392Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/ AND m.eventID = '$ObDCSq7Bs8rxndQr_3LKD7KaB_Cap7i'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:54:21.397Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (98.0, '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/, '$ObDCSq7Bs8rxndQr_3LKD7KaB_Cap7i'/*+25 bytes*/, '@telegram_channel-1624786248:bee'/*+9 bytes*/, 1747427902893.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"98","text":"m.room.member'/*+505 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:54:21.405Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/ AND m.eventID = '$AUBb3UN_DMUNC06_51vxMRJ66Fon1_g'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:54:21.407Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (6420.0, '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/, '$AUBb3UN_DMUNC06_51vxMRJ66Fon1_g'/*+25 bytes*/, '@telegram_1401255074:beeper.loca'/*+1 bytes*/, 1747428467199.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"6420","text":"m.room.memb'/*+499 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:54:21.420Z] 
SELECT COUNT(*) as count
FROM mx_room_messages
WHERE roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/ AND type != 'HIDDEN' AND type != 'REACTION'
  
[debug] [2025-05-16T20:54:21.421Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/, '$4NdGLMkrD9cBHE5o0J29i2289U1d7Un'/*+25 bytes*/, '@telegrambot:beeper.local', 1747428879696.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'MEMBERSHIP', 6615.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"senderID":"@telegrambot'/*+848 bytes*/, NULL) RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:54:21.431Z] INSERT OR REPLACE INTO threads VALUES ('!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{},"bridge":{"b'/*+15026 bytes*/, 1747428466000.0)
[debug] [2025-05-16T20:54:21.504Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:54:21.508Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:54:22.157Z] SELECT accountID, thread FROM threads WHERE threadID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:54:22.160Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/ AND m.eventID = '$mo3IleuKMv9GOWi6li7xkXE6ZQb-GSE'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:54:22.167Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/, '$mo3IleuKMv9GOWi6li7xkXE6ZQb-GSE'/*+25 bytes*/, '@telegram_5458903581:beeper.loca'/*+1 bytes*/, 1747428879706.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 6616.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"text":"m.room.member","'/*+497 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:54:22.180Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/ AND m.eventID = '$ObDCSq7Bs8rxndQr_3LKD7KaB_Cap7i'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:54:22.183Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (98.0, '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/, '$ObDCSq7Bs8rxndQr_3LKD7KaB_Cap7i'/*+25 bytes*/, '@telegram_channel-1624786248:bee'/*+9 bytes*/, 1747427902893.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"98","text":"m.room.member'/*+505 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:54:22.192Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/ AND m.eventID = '$AUBb3UN_DMUNC06_51vxMRJ66Fon1_g'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:54:22.194Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (6420.0, '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/, '$AUBb3UN_DMUNC06_51vxMRJ66Fon1_g'/*+25 bytes*/, '@telegram_1401255074:beeper.loca'/*+1 bytes*/, 1747428467199.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'HIDDEN', 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":"6420","text":"m.room.memb'/*+499 bytes*/, NULL) RETURNING id
[debug] [2025-05-16T20:54:22.205Z] 
SELECT COUNT(*) as count
FROM mx_room_messages
WHERE roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/ AND type != 'HIDDEN' AND type != 'REACTION'
  
[debug] [2025-05-16T20:54:22.209Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/, '$mo3IleuKMv9GOWi6li7xkXE6ZQb-GSE'/*+25 bytes*/, '@telegram_5458903581:beeper.loca'/*+1 bytes*/, 1747428879706.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, NULL, 0.0, 'MEMBERSHIP', 6616.0, 0.0, 0.0, 0.0, 0.0, 0.0, NULL, NULL, '{"id":0,"senderID":"@telegram_54'/*+862 bytes*/, NULL) RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:54:22.218Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/ AND m.eventID = '$PKy6p8aDPFf7zfiaaHEiTIXRz42P4lu'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:54:22.218Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/ AND m.echo_echoID = 'mautrix-go_1747428879718442893_1'
LIMIT 1
    
[debug] [2025-05-16T20:54:22.223Z] 
INSERT OR REPLACE INTO mx_room_messages (
  id,
  roomID,
  eventID,
  senderContactID,
  timestamp,
  isEdited,
  lastEditionID,
  isDetached,
  lastEditionTimestamp,
  lastEditionOrder,
  isDeleted,
  isEncrypted,
  inReplyToID,
  isReplyThreadFallback,
  type,
  hsOrder,
  isSentByMe,
  replyCount,
  shouldNotify,
  shouldPreview,
  countsAsUnread,
  lastDeletionID,
  editedType,
  message,
  echo_echoID
) VALUES (NULL, '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/, '$PKy6p8aDPFf7zfiaaHEiTIXRz42P4lu'/*+25 bytes*/, '@telegram_5458903581:beeper.loca'/*+1 bytes*/, 1747428879000.0, 0.0, NULL, 0.0, NULL, NULL, 0.0, 0.0, '$cYSzoPinkACP_8nqv2FW9ZGXG-tZotb'/*+25 bytes*/, 0.0, 'TEXT', 6617.0, 0.0, 0.0, 1.0, 1.0, 1.0, NULL, NULL, '{"id":0,"threadID":"!97RAWGW8Y4g'/*+774 bytes*/, 'mautrix-go_1747428879718442893_1') RETURNING 
    mx_room_messages.id AS mx_msg_id,
    mx_room_messages.roomID AS mx_msg_roomID,
    mx_room_messages.eventID AS mx_msg_eventID,
    mx_room_messages.message AS mx_msg_msg,
    mx_room_messages.hsOrder AS mx_msg_hsOrder,
    mx_room_messages.sendStatus AS mx_msg_sendStatus,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = mx_room_messages.inReplyToID OR linked.lastEditionID = mx_room_messages.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    mx_room_messages.echo_echoID AS mx_msg_echo_echoID
  
[debug] [2025-05-16T20:54:22.236Z] SELECT * FROM mx_read_receipts WHERE userID = '@telegram_5458903581:beeper.loca'/*+1 bytes*/ AND roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:54:22.241Z] 
    INSERT OR REPLACE INTO mx_read_receipts (userID, timestamp, roomID, relatesToID, hsOrder, hsSuborder, hsOrderString, lastVisibleEventID)
    VALUES ('@telegram_5458903581:beeper.loca'/*+1 bytes*/, 1747428879725.0, '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/, '$PKy6p8aDPFf7zfiaaHEiTIXRz42P4lu'/*+25 bytes*/, 6617.0, NULL, NULL, (
      SELECT eventID
      FROM mx_room_messages
      WHERE
        roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/ AND
        type != 'HIDDEN' AND
        type != 'REACTION' AND
        (hsOrder <= 6617.0 OR senderContactID = '@telegram_5458903581:beeper.loca'/*+1 bytes*/)
      ORDER BY hsOrder DESC LIMIT 1
    ) )
    RETURNING *
  
[debug] [2025-05-16T20:54:22.248Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/ AND m.eventID = '$PKy6p8aDPFf7zfiaaHEiTIXRz42P4lu'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:54:22.252Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:54:22.252Z] 
      SELECT
          COUNT(DISTINCT mx_room_messages.id) AS unreadCount,
          SUM(CASE WHEN mention.value = '@room' OR mention.value = '@timii:beeper.com' THEN 1 ELSE 0 END) AS unreadMentionsCount
      FROM mx_room_messages
      LEFT JOIN json_each(mx_room_messages.message, '$.mentions') AS mention
      WHERE
          mx_room_messages.roomId = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/ AND
          mx_room_messages.isSentByMe = 0 AND
          mx_room_messages.isDeleted = 0 AND
          mx_room_messages.countsAsUnread = 1 AND
          mx_room_messages.hsOrder > 173.0
    
[debug] [2025-05-16T20:54:22.253Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:54:22.257Z] INSERT OR REPLACE INTO threads VALUES ('!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{},"bridge":{"b'/*+15027 bytes*/, 1747428466000.0)
[debug] [2025-05-16T20:54:22.267Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:54:22.270Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:54:22.276Z] UPDATE threads SET thread = json_patch(thread, '{"lastReadMessageSortKey":173,"p'/*+1056 bytes*/), timestamp = COALESCE(1747428879000.0, timestamp) WHERE threadID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:54:22.287Z] SELECT accountID, thread FROM threads WHERE threadID = '!97RAWGW8Y4g2gCIpyedp:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:54:23.529Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:23.536Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:23.639Z] SELECT * FROM breadcrumbs WHERE id = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:54:23.640Z] INSERT OR REPLACE INTO breadcrumbs (id, sentCount, sentLast, openCount, lastOpenTime) VALUES ('!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/, 0.0, 0.0, 1.0, 1747428863640.0)
[debug] [2025-05-16T20:54:23.692Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:23.719Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:23.734Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:23.775Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:23.794Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:23.814Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:23.829Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:23.844Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:23.855Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:23.860Z] SELECT accountID, thread FROM threads WHERE threadID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:54:23.866Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:54:23.866Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:23.866Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:54:23.873Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:23.878Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:23.934Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:23.940Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:23.979Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:23.980Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.013Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.023Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.039Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.050Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.077Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.077Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.099Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.100Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.136Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.141Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.155Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.168Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.201Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.204Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.227Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.235Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.256Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.267Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.310Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.322Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.353Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.354Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.371Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.378Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.395Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.401Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.420Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.421Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.438Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.439Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.474Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.478Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.507Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.516Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.536Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.538Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.557Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.557Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.591Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.592Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.626Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.626Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.657Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.665Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.689Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.690Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.718Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.719Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.742Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.743Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.763Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.764Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.785Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.796Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.811Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.812Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.847Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.848Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.873Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.879Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.905Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.907Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.931Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.932Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.953Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.954Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.975Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:24.976Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.002Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.004Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.022Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.022Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.036Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.036Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.054Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.056Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.071Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.072Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.092Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.097Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.117Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.118Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.137Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.138Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.157Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.158Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.190Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.190Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.215Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.217Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.237Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.238Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.261Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.264Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.300Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.300Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.323Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.323Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.346Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.347Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.373Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.380Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.400Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.403Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.423Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.426Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.446Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.449Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.477Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.482Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.501Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.506Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.528Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.531Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.554Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.556Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.572Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.583Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.604Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.605Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.624Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.627Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.653Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.656Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.674Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.675Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.691Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.692Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.713Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.718Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.739Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.740Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.758Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.760Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.780Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.781Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.804Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

