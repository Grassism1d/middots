[debug] [2025-05-16T20:54:25.804Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.825Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.825Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.852Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.854Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.871Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.872Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.893Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.899Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.920Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.922Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.943Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.950Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.970Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.972Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.988Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:25.989Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.010Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.014Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.028Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.030Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.045Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.050Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.064Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.066Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.079Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.082Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.102Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.105Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.121Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.121Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.138Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.139Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.158Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.161Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.183Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.185Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.205Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.205Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.236Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.237Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.254Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.255Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.272Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.275Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.304Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.305Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.323Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.325Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.352Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.354Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.372Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.374Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.397Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.398Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.420Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.422Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.447Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.451Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.471Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.473Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.494Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.494Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.507Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.509Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.530Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.530Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.548Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.548Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.562Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.563Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.580Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.582Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.600Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.602Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.621Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.622Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.634Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.634Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.655Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.657Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.669Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.669Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.691Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.693Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.704Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.705Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.724Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.725Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.739Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.739Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.759Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.761Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.772Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.775Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.790Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.791Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.802Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.805Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.821Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.821Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.834Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.835Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.849Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.856Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.870Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.870Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.886Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.887Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.906Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.908Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.919Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.920Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.935Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.943Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.957Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.957Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.969Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.970Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.987Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.987Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:26.999Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.001Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.012Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.015Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.031Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.031Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.044Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.046Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.055Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.056Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.071Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.072Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.084Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.086Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.096Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.097Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.107Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.108Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.120Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.120Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.132Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.134Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.146Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.147Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.157Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.159Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.170Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.171Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.183Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.183Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.196Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.198Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.209Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.211Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.221Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.224Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.233Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.234Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.244Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.245Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.256Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.258Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.268Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.269Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.280Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.282Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.291Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.295Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.304Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.306Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.319Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.319Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.333Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.334Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.345Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.345Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.360Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.361Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.373Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.375Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.387Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.387Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.400Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.402Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.411Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.413Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.424Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.425Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.436Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.437Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.448Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.450Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.460Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.462Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.477Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.479Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.491Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.492Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.503Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.504Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.515Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.516Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.525Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.530Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.535Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.545Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.546Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.555Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.555Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.567Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.569Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.578Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.581Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.589Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.590Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.606Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.607Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.618Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.618Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.630Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.631Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.641Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.642Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.653Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.654Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.665Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.665Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.681Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.682Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.694Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.695Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.711Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.712Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 
 AND m.hsOrder < 6229.0 
ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:27.794Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/ AND (m.id = '$X3BJKW_JAhto353146eBcJD8MyIimWV'/*+25 bytes*/ OR m.eventID = '$X3BJKW_JAhto353146eBcJD8MyIimWV'/*+25 bytes*/ OR m.lastEditionID = '$X3BJKW_JAhto353146eBcJD8MyIimWV'/*+25 bytes*/)
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:54:27.794Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/ AND (m.id = '$lww01e1b6KTwPi8_ofTFAGNjccP_WBh'/*+25 bytes*/ OR m.eventID = '$lww01e1b6KTwPi8_ofTFAGNjccP_WBh'/*+25 bytes*/ OR m.lastEditionID = '$lww01e1b6KTwPi8_ofTFAGNjccP_WBh'/*+25 bytes*/)
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:54:27.797Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/ AND (m.id = '$aCK1ulWBZXWC_r6bVN5liGV2S3wkpVV'/*+25 bytes*/ OR m.eventID = '$aCK1ulWBZXWC_r6bVN5liGV2S3wkpVV'/*+25 bytes*/ OR m.lastEditionID = '$aCK1ulWBZXWC_r6bVN5liGV2S3wkpVV'/*+25 bytes*/)
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:54:27.798Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/ AND (m.id = '$N9cTVMvUiYw3Lil2VqpFVGFE1Jrd0DV'/*+25 bytes*/ OR m.eventID = '$N9cTVMvUiYw3Lil2VqpFVGFE1Jrd0DV'/*+25 bytes*/ OR m.lastEditionID = '$N9cTVMvUiYw3Lil2VqpFVGFE1Jrd0DV'/*+25 bytes*/)
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:54:27.821Z] 
SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
 AND ((m.type != 'HIDDEN' AND m.type != 'REACTION') OR (m.type = 'REACTION' AND json_extract(m.message, '$.extra.shouldPreview') = true)) 

ORDER BY m.hsOrder DESC
LIMIT 20

[debug] [2025-05-16T20:54:28.406Z] SELECT * FROM mx_room_messages WHERE roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/ AND id = '6153'
[debug] [2025-05-16T20:54:29.350Z] SELECT accountID, thread FROM threads WHERE threadID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:54:29.354Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:54:29.356Z] 
      SELECT
          COUNT(DISTINCT mx_room_messages.id) AS unreadCount,
          SUM(CASE WHEN mention.value = '@room' OR mention.value = '@timii:beeper.com' THEN 1 ELSE 0 END) AS unreadMentionsCount
      FROM mx_room_messages
      LEFT JOIN json_each(mx_room_messages.message, '$.mentions') AS mention
      WHERE
          mx_room_messages.roomId = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/ AND
          mx_room_messages.isSentByMe = 0 AND
          mx_room_messages.isDeleted = 0 AND
          mx_room_messages.countsAsUnread = 1 AND
          mx_room_messages.hsOrder > 3530.0
    
[debug] [2025-05-16T20:54:29.356Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:54:29.358Z] INSERT OR REPLACE INTO threads VALUES ('!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{},"bridge":{"b'/*+5354 bytes*/, 1747406262000.0)
[debug] [2025-05-16T20:54:29.360Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:54:29.360Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:54:29.854Z] SELECT accountID, thread FROM threads WHERE threadID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:54:29.856Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:54:29.857Z] 
    INSERT OR REPLACE INTO mx_read_receipts (userID, timestamp, roomID, relatesToID, hsOrder, hsSuborder, hsOrderString, lastVisibleEventID)
    VALUES ('@timii:beeper.com', 1747428887605.0, '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/, '$x4JtLT7DDWTBy7Hu8woEC-0FQ0JgD5J'/*+25 bytes*/, 6272.0, NULL, NULL, (
      SELECT eventID
      FROM mx_room_messages
      WHERE
        roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/ AND
        type != 'HIDDEN' AND
        type != 'REACTION' AND
        (hsOrder <= 6272.0 OR senderContactID = '@timii:beeper.com')
      ORDER BY hsOrder DESC LIMIT 1
    ) )
    RETURNING *
  
[debug] [2025-05-16T20:54:29.862Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/ AND m.eventID = ''
LIMIT 1
    
[debug] [2025-05-16T20:54:29.863Z] 
SELECT m.id
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/ AND m.eventID = '$x4JtLT7DDWTBy7Hu8woEC-0FQ0JgD5J'/*+25 bytes*/
LIMIT 1
    
[debug] [2025-05-16T20:54:29.866Z] SELECT * FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
[debug] [2025-05-16T20:54:29.867Z] 
      SELECT
          COUNT(DISTINCT mx_room_messages.id) AS unreadCount,
          SUM(CASE WHEN mention.value = '@room' OR mention.value = '@timii:beeper.com' THEN 1 ELSE 0 END) AS unreadMentionsCount
      FROM mx_room_messages
      LEFT JOIN json_each(mx_room_messages.message, '$.mentions') AS mention
      WHERE
          mx_room_messages.roomId = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/ AND
          mx_room_messages.isSentByMe = 0 AND
          mx_room_messages.isDeleted = 0 AND
          mx_room_messages.countsAsUnread = 1 AND
          mx_room_messages.hsOrder > 6272.0
    
[debug] [2025-05-16T20:54:29.867Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/ LIMIT 1
[debug] [2025-05-16T20:54:29.870Z] INSERT OR REPLACE INTO threads VALUES ('!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/, 'telegram', '{"extra":{"tags":{},"bridge":{"b'/*+5356 bytes*/, 1747406262000.0)
[debug] [2025-05-16T20:54:29.882Z] SELECT 
    m.id AS mx_msg_id,
    m.roomID AS mx_msg_roomID,
    m.eventID AS mx_msg_eventID,
    m.message AS mx_msg_msg,
    m.hsOrder AS mx_msg_hsOrder,
    m.sendStatus AS mx_msg_sendStatus,
    (
        SELECT json_group_object(rr.userID, rr.timestamp)
        FROM mx_read_receipts rr
        WHERE rr.roomID = m.roomID
          AND rr.lastVisibleEventID = m.eventID
        GROUP BY rr.lastVisibleEventID
    ) AS mx_msg_readReceipts,
    (
        SELECT json_group_array(json(r.reaction))
        FROM mx_reactions r
        WHERE r.roomID = m.roomID
          AND r.eventID = m.eventID
          AND r.isDeleted = 0
        ORDER BY r.timestamp DESC
    ) AS mx_msg_reactions,
    (
    SELECT json_object('id', linked.id, 'message', linked.message)
    FROM mx_room_messages linked
    WHERE linked.eventID = m.inReplyToID OR linked.lastEditionID = m.inReplyToID
    LIMIT 1
  ) AS mx_msg_linkedMessage,
    m.echo_echoID AS mx_msg_echo_echoID
  
FROM mx_room_messages m
WHERE m.roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/
AND m.type != 'HIDDEN'
AND NOT (m.type = 'REACTION' AND m.isDeleted = true)
AND m.shouldPreview = 1
ORDER BY m.hsOrder DESC
LIMIT 1
[debug] [2025-05-16T20:54:29.883Z] SELECT hsOrder FROM mx_read_receipts WHERE userID = '@timii:beeper.com' AND roomID = '!C2T4YV9DqZUtlv0cX020:beeper.loc'/*+2 bytes*/ LIMIT 1
[log] [2025-05-16T20:54:36.983Z] closing db /home/mid/.config/BeeperTexts/index.db
